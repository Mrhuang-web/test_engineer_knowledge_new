# 高新兴配电智能辅助监控系统-门禁统一通信协议解析（2022版）
## 一、通信基础规范
### 1.1 核心通信参数
| 参数 | 配置详情 |
|------|----------|
| 通信方式 | UDP（SC与FSU之间） |
| 设备映射 | 每个门禁模块独立IP+端口，通过FSU封装访问 |
| 字节序 | 大端模式（高位在前、低位在后） |
| 超时时间 | 500毫秒（未响应则判定通信失败） |
| 协议版本 | V1.0（数据流格式版本VER=22H） |
| 设备地址 | 1-254（ADR字段），支持分组扩展（16组×254台） |

### 1.2 外层报文格式（SC与FSU交互）
#### 下行（SC→FSU）
| 地址范围 | 字段名 | 长度 | 描述 | 默认值/规则 |
|----------|--------|------|------|-------------|
| 0 | P_header | 1字节 | 包头 | 0xFF |
| 1-20 | P_dest_addr | 20字节 | 目标地址 | FSU的ID |
| 21-28 | P_src_addr | 8字节 | 源地址 | SC地址=00 |
| 29 | P_subDevType | 1字节 | 子设备类型 | 1=串口/2=USB/3=IP（一体化设备为3） |
| 30 | P_subDev_addr | 1字节 | 子设备地址 | 00 |
| 31-32 | P_pLen | 2字节 | 协议族数据包长度 | 5+N（N为数据流长度） |
| 33 | RtnFlag | 1字节 | 设置/应答类型 | 0xEE |
| 34-35 | CommType | 2字节 | 命令编号 | 0x0001（数据传输） |
| 36-37 | 数据流长度 | 2字节 | 数据流字节数 | N |
| 38-(38+N-1) | 数据流 | N字节 | 核心命令数据 | 见“数据流格式定义” |
| 38+N | P_verify | 1字节 | 校验字段 | 异或校验（不含包头/包尾） |
| 39+N | P_tailer | 1字节 | 包尾 | 0xFE |

#### 上行（FSU→SC）
| 地址范围 | 字段名 | 长度 | 描述 | 默认值/规则 |
|----------|--------|------|------|-------------|
| 0 | P_header | 1字节 | 包头 | 0xFF |
| 1-8 | P_dest_addr | 8字节 | 目标地址 | SC地址=0x00 |
| 9-28 | P_src_addr | 20字节 | 源地址 | FSU的ID |
| 29 | P_subDevType | 1字节 | 子设备类型 | 同下行定义 |
| 30 | P_subDev_addr | 1字节 | 子设备地址 | 00 |
| 31-32 | P_pLen | 2字节 | 协议族数据包长度 | 5+N |
| 33 | RtnFlag | 1字节 | 设置/应答类型 | 0x00 |
| 34-35 | CommType | 2字节 | 命令编号 | 0x0001（数据传输） |
| 36-37 | 数据流长度 | 2字节 | 数据流字节数 | N |
| 38-(38+N-1) | 数据流 | N字节 | 响应数据 | 见“数据流格式定义” |
| 38+N | P_verify | 1字节 | 校验字段 | 异或校验（不含包头/包尾） |
| 39+N | P_tailer | 1字节 | 包尾 | 0xFE |

### 1.3 数据流格式（门禁模块核心交互）
#### 基础结构
`SOI(1字节) + VER(1字节) + ADR(1字节) + CID1(1字节) + CID2/RTN(1字节) + L.TH(2字节) + INFO(N字节) + CHK-SUM(2字节) + EOI(1字节)`

#### 核心字段说明
| 字段 | 标识/规则 | 描述 |
|------|-----------|------|
| SOI | 0x7E | 数据流起始符 |
| VER | 0x22 | 数据流协议版本（V2.2） |
| ADR | 1-254 | 门禁设备地址 |
| CID1 | 0x81 | 设备分类码（高4位=8）+ 分组号（低4位=1） |
| CID2/RTN | - | 下发时为CID2（命令分类码=0x01），响应时为执行结果 |
| L.TH | 2字节 | 参数长度标识（含校验位，计算规则见下文） |
| INFO | - | 命令参数（下发）或响应数据（上行），格式为`CMD(2字节)+SUBCMD(1字节)+DATAF(N字节)` |
| CHK-SUM | 2字节 | 校验和（VER至INFO末尾ASCII码累加，模65536取补） |
| EOI | 0x0D | 数据流结束符 |

#### L.TH计算规则
1. 数据信息字节长度为L，ASCII码个数LENID=2L
2. LENID按4位分组累加，模16取补得到LCHKSUM（高4位）
3. 16位结构：LCHKSUM（4位）+ LENID（12位）
4. 校验：4个4位分组累加和为0

### 1.4 响应码（RTN）
| RTN值 | 含义 |
|-------|------|
| 00H | 命令正常执行 |
| 01H | 协议版本不符 |
| 02H | 校验和错误 |
| 03H | LCHKSUM错误 |
| 04H | CID2无效 |
| 05H | 命令格式错误 |
| 06H | 数据无效 |
| 80H | 不支持的命令号 |
| 81H | CID1无效 |
| EFH | 其他错误 |

---

## 二、核心命令报文格式（数据流INFO字段解析）
### 2.1 时间管理命令
#### 0x01 设置日期时间
##### 请求报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x01 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |
| 3-8 | 日期时间 | 6字节 | 年月日时分秒 | 各1字节，年份从2000起算（BCD格式） |

##### 响应报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x01 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |

#### 0x02 读取日期时间
##### 请求报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x02 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |

##### 响应报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x02 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |
| 3-8 | 日期时间 | 6字节 | 年月日时分秒 | 各1字节，年份从2000起算（BCD格式） |

### 2.2 设备管理命令
#### 0x03 读取软件版本号
##### 请求报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x03 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |

##### 响应报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x03 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |
| 3-18 | 软件版本号 | 16字节 | 版本字符串 | 不足16位后补0（例："1.00"） |

#### 0x04 重启设备
##### 请求报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x04 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |

##### 响应报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x04 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |

#### 0x14 恢复出厂设置
##### 请求报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x14 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |
| 3 | 魔数 | 1字节 | 验证字段 | 固定为123 |
| 4 | 等级 | 1字节 | 恢复范围 | 位0=固定参数，位1=所有参数，位2=其他数据 |
| 5 | 是否重启 | 1字节 | 重启控制 | 0=不重启，1=重启 |

##### 响应报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x14 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |

### 2.3 用户管理命令
#### 0x15 增加/修改用户
##### 请求报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x15 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |
| 3 | 用户数量 | 1字节 | 操作用户数 | 1-10 |
| 4 | 卡类型和长度 | 1字节 | 卡属性 | bit7-4=卡类型（0=普通/5=巡更/6=胁迫）；bit3-0=卡号长度（无卡号填0） |
| 5-14 | 卡号 | 10字节 | 卡号数据 | 不足10字节后补0 |
| 15 | 指纹类型和长度 | 1字节 | 指纹属性 | bit7-4=类型；bit3-0=长度（无指纹填0） |
| 16-25 | 指纹号 | 10字节 | 指纹数据 | 不足10字节后补0 |
| 26-27 | 有效期开始 | 2字节 | 起始时间 | 年（bit15-9）、月（bit8-5）、日（bit4-0），从2000起算 |
| 28-29 | 有效期结束 | 2字节 | 结束时间 | 格式同起始时间 |
| 30-31 | 使用次数 | 2字节 | 使用限制 | 1-1000；0xFFFF=无限次 |
| 32 | 授权门掩码 | 1字节 | 门授权 | 每位对应1个门，位1=授权（bit0=门1，bit1=门2…） |
| 33 | 权限和时段索引 | 1字节 | 权限配置 | bit7-4=用户权限；bit3-0=准进时段表索引 |
| 34 | 保留 | 1字节 | 填充字段 | 0 |
| 35-69 | 重复用户数据 | 35字节 | 多用户时重复 | 重复4-34字节（最多10个用户） |

##### 响应报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x15 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |
| 3 | 实际用户数 | 1字节 | 成功操作数 | 实际增加/修改的用户数量 |

#### 0x16 删除用户
##### 请求报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x16 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |
| 3 | 用户数量 | 1字节 | 操作用户数 | 1-10 |
| 4 | 卡类型和长度 | 1字节 | 卡属性 | 同0x15命令定义 |
| 5-14 | 卡号 | 10字节 | 卡号数据 | 不足10字节后补0 |
| 15 | 指纹类型和长度 | 1字节 | 指纹属性 | 同0x15命令定义 |
| 16-25 | 指纹号 | 10字节 | 指纹数据 | 不足10字节后补0 |
| 26 | 保留 | 1字节 | 填充字段 | 0 |
| 27-52 | 重复用户数据 | 26字节 | 多用户时重复 | 重复4-26字节（最多10个用户） |

##### 响应报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x16 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |
| 3 | 实际用户数 | 1字节 | 成功操作数 | 实际删除的用户数量 |

#### 0x3C 删除所有用户
##### 请求报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x3C |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |

##### 响应报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x3C |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |

### 2.4 门禁控制命令
#### 0x20 远程开门
##### 请求报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x20 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |
| 3 | 门掩码 | 1字节 | 开门控制 | 每位对应1个门，位1=开门（bit0=门1，bit1=门2…） |

##### 响应报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x20 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |

#### 0x21 强制开关门
##### 请求报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x21 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |
| 3 | 门号 | 1字节 | 目标门 | 1-4 |
| 4 | 门状态 | 1字节 | 控制状态 | 0=强制关门，1=强制开门，2=不强制 |
| 5-8 | 重复门数据 | 4字节 | 多门控制 | 重复3-4字节（4个门） |

##### 响应报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x21 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |

### 2.5 记录管理命令
#### 0x12 读取告警记录
##### 请求报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x12 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |
| 3 | 读取方式 | 1字节 | 读取规则 | 0=起始序号+数量，1=起始序号+结束序号（暂不实现） |
| 4 | 保留 | 1字节 | 填充字段 | 0 |
| 5-8 | 起始序号 | 4字节 | 起始位置 | 记录序号 |
| 9-12 | 结束序号 | 4字节 | 结束位置 | 方式1时有效 |
| 13-16 | 数量 | 4字节 | 读取条数 | 方式0时有效 |

##### 响应报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x12 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |
| 3-7 | 记录数量 | 4字节 | 实际读取数 | 最多10条 |
| 8-11 | 起始序号 | 4字节 | 起始位置 | 实际起始序号 |
| 12-15 | 结束序号 | 4字节 | 结束位置 | 实际结束序号 |
| 16-21 | 告警时间 | 6字节 | 告警发生时间 | 年月日时分秒（BCD格式） |
| 22 | 输入通道号 | 1字节 | 告警通道 | DI/门磁通道号（从1开始） |
| 23 | 告警通道类型 | 1字节 | 通道类型 | 告警类型标识 |
| 24 | 告警类型号 | 1字节 | 类型序号 | 同类型的第N个（从1开始） |
| 25 | 告警状态 | 1字节 | 告警状态 | 0=无告警，1=有告警 |
| 26-50 | 重复记录数据 | 25字节 | 多条记录时重复 | 重复16-25字节 |

#### 0x13 清除告警记录
##### 请求报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x13 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |

##### 响应报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x13 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |

### 2.6 时段管理命令
#### 0x17 设置准进时段表
##### 请求报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x17 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |
| 3 | 表索引 | 1字节 | 时段表编号 | 0-5 |
| 4-171 | 准进时段表 | 168字节 | 时段数据 | 每周7天，每天6个时段，每时段4字节（HHMM起始+HHMM结束） |

##### 响应报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x17 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |

#### 0x18 读取准进时段表
##### 请求报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x18 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |
| 3 | 表索引 | 1字节 | 时段表编号 | 0-5 |

##### 响应报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x18 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |
| 3 | 表索引 | 1字节 | 时段表编号 | 0-5 |
| 4-171 | 准进时段表 | 168字节 | 时段数据 | 同0x17命令的时段格式 |

抱歉！之前的解析没完整覆盖所有命令，是因为文档命令数量较多，之前的输出篇幅受限。现在继续补充剩余命令的请求/响应报文格式解析，确保完整覆盖所有核心功能：

### 2.7 读卡器与门参数命令
#### 0x19 设置读卡器参数
##### 请求报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x19 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |
| 3 | 读卡器数量 | 1字节 | 要设置的读卡器个数 | 无默认，按需填写 |
| 4 | 门号 | 1字节 | 关联门号 | 1-4 |
| 5+ | 重复门号 | N字节 | 多读卡器时重复 | 重复4字节（按读卡器数量） |

##### 响应报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x19 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |

#### 0x1A 读取读卡器参数
##### 请求报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x1A |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |
| 3 | 读卡器数量 | 1字节 | 要读取的读卡器个数 | 无默认，按需填写 |

##### 响应报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x1A |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |
| 3 | 读卡器数量 | 1字节 | 实际读取个数 | 与请求一致 |
| 4 | 门号 | 1字节 | 关联门号 | 1-4 |
| 5+ | 重复门号 | N字节 | 多读卡器时重复 | 重复4字节（按读卡器数量） |

#### 0x1B 设置门参数
##### 请求报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x1B |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |
| 3 | 保留 | 1字节 | 填充字段 | 0 |
| 4 | 门号 | 1字节 | 目标门 | 1-4 |
| 5 | 开门方式 | 1字节 | 开门规则 | 0=保留、1=单卡/指纹/密码、2=多卡、3=多指纹、4=组合方式 |
| 6-16 | 密码 | 11字节 | 门密码 | 带'\0'结尾字符串，不足补0 |
| 17 | 启用首卡开门 | 1字节 | 首卡控制 | 0=禁用、1=启用 |
| 18 | 首卡卡号长度 | 1字节 | 首卡卡号长度 | 按需填写 |
| 19-28 | 首卡卡号 | 10字节 | 首卡卡号 | 不足补0 |
| 29 | 多卡开门数量 | 1字节 | 多卡要求 | 0-5 |
| 30-84 | 多卡卡号信息 | 55字节 | 多卡卡号集合 | 5张卡的长度+卡号 |
| 85 | 多卡超时时间 | 1字节 | 刷卡超时 | 5-30秒 |
| 86 | 多指纹数量 | 1字节 | 多指纹要求 | 0-5 |
| 87-141 | 多指纹信息 | 55字节 | 多指纹集合 | 5个指纹的长度+号码 |
| 142 | 多指纹超时时间 | 1字节 | 指纹超时 | 5-30秒 |
| 143 | 组合开门标志 | 1字节 | 组合规则 | bit0=卡、bit1=密码、bit2=指纹 |
| 144 | 组合超时时间 | 1字节 | 组合操作超时 | 5-30秒 |

##### 响应报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x1B |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |

#### 0x1C 读取门参数
##### 请求报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x1C |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |
| 3 | 保留 | 1字节 | 填充字段 | 0 |
| 4 | 门号 | 1字节 | 目标门 | 1-4 |

##### 响应报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x1C |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |
| 3 | 保留 | 1字节 | 填充字段 | 0 |
| 4 | 门号 | 1字节 | 目标门 | 1-4 |
| 5-144 | 门参数详情 | 140字节 | 与0x1B请求参数一致 | 包含开门方式、密码、首卡信息等完整参数 |

### 2.8 DI告警参数命令
#### 0x1D 设置DI告警参数
##### 请求报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x1D |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |
| 3 | 通道类型 | 1字节 | DI通道类型 | 按需定义（辅助DI/虚拟通道/火警） |
| 4 | 告警极性 | 1字节 | 告警触发电平 | 0=反相（低电平告警）、1=同相（高电平告警） |
| 5-8 | 联动DO号 | 4字节 | 联动输出通道 | DO号1-4，最多4个 |
| 9-12 | 联动锁号 | 4字节 | 联动锁编号 | 锁号1-4，最多4个 |
| 13+ | 重复通道数据 | N字节 | 多通道时重复 | 重复3-12字节（共9次：4路辅助+4路虚拟+1路火警） |

##### 响应报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x1D |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |

#### 0x1E 读取DI告警参数
##### 请求报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x1E |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |

##### 响应报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x1E |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |
| 3-12 | 通道告警参数 | 10字节 | 单通道参数 | 通道类型+告警极性+联动DO+联动锁 |
| 13+ | 重复通道数据 | N字节 | 多通道时重复 | 重复3-12字节（共8次：4路辅助+4路虚拟） |

### 2.9 DO输出参数命令
#### 0x22 设置辅助DO参数
##### 请求报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x22 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |
| 3 | 输出类型 | 1字节 | DO工作模式 | 0=电平型、1=脉冲型 |
| 4 | 输出极性 | 1字节 | 有效电平 | 0=反相（断开有效）、1=同相（闭合有效） |
| 5-8 | 脉冲宽度 | 4字节 | 脉冲时长 | 单位ms，仅脉冲型有效 |
| 9+ | 重复DO参数 | N字节 | 多DO时重复 | 重复3-8字节（共4次，对应4个辅助DO） |

##### 响应报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x22 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |

#### 0x23 读取辅助DO参数
##### 请求报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x23 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |

##### 响应报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x23 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |
| 3-8 | 单DO参数 | 6字节 | 输出类型+极性+脉冲宽度 | 与0x22请求参数一致 |
| 9+ | 重复DO参数 | N字节 | 多DO时重复 | 重复3-8字节（共4次，对应4个辅助DO） |

#### 0x24 设置控锁DO参数
##### 请求报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x24 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |
| 3-8 | 控锁DO参数 | 6字节 | 输出类型+极性+脉冲宽度 | 同辅助DO参数定义 |
| 9+ | 重复控锁参数 | N字节 | 多控锁时重复 | 重复3-8字节（共4次，对应4个控锁DO） |

##### 响应报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x24 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |

#### 0x25 读取控锁DO参数
##### 请求报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x25 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |

##### 响应报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x25 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |
| 3-8 | 单控锁参数 | 6字节 | 输出类型+极性+脉冲宽度 | 与0x24请求参数一致 |
| 9+ | 重复控锁参数 | N字节 | 多控锁时重复 | 重复3-8字节（共4次，对应4个控锁DO） |

### 2.10 门禁核心参数命令
#### 0x26 设置门禁参数
##### 请求报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x26 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |
| 3-6 | 进门开门超时 | 4字节 | 进门开门时限 | 单位秒 |
| 7-10 | 撤防超时 | 4字节 | 撤防有效时限 | 单位秒 |
| 11-13 | 出门开门超时 | 3字节 | 出门开门时限 | 单位秒 |
| 14-17 | 出门关门超时 | 4字节 | 出门关门时限 | 单位秒 |
| 18-21 | 开门超时提示时间 | 4字节 | 超时前提示时限 | 单位秒 |
| 22-25 | 开门超时时间 | 4字节 | 超时告警时限 | 单位秒 |
| 26-29 | 非法开门告警保持时间 | 4字节 | 告警持续时长 | 单位秒 |
| 30-33 | 传感器监视延时 | 4字节 | 传感器响应延时 | 无单位，按需填写 |
| 34+ | 重复门参数 | N字节 | 多门时重复 | 重复3-33字节（共4次，对应4个门） |

##### 响应报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x26 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |

#### 0x27 读取门禁参数
##### 请求报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x27 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |

##### 响应报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x27 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |
| 3-33 | 单门参数 | 31字节 | 与0x26请求参数一致 | 包含超时、告警、传感器等完整参数 |
| 34+ | 重复门参数 | N字节 | 多门时重复 | 重复3-33字节（共4次，对应4个门） |

### 2.11 事件记录命令（续）
#### 0x28 按时间读取事件记录序号
##### 请求报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x28 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |
| 3 | 保留 | 1字节 | 填充字段 | 0 |
| 4-9 | 起始时间 | 6字节 | 查询起始时间 | 年月日时分秒（各1字节，2000起算） |
| 10-15 | 结束时间 | 6字节 | 查询结束时间 | 格式同起始时间 |

##### 响应报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x28 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |
| 3-7 | 记录数量 | 4字节 | 符合条件的记录数 | 无符号整数 |
| 8-11 | 起始序号 | 4字节 | 第一条记录序号 | 无符号整数 |
| 12-15 | 结束序号 | 4字节 | 最后一条记录序号 | 无符号整数 |
| 16-19 | 最大记录数量 | 4字节 | 设备最大存储记录数 | 固定值 |

#### 0x29 读取事件记录统计信息
##### 请求报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x29 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |

##### 响应报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x29 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |
| 3-6 | 记录数量 | 4字节 | 总事件记录数 | 无符号整数 |
| 7-10 | 起始序号 | 4字节 | 第一条记录序号 | 无符号整数 |
| 11-14 | 结束序号 | 4字节 | 最后一条记录序号 | 无符号整数 |
| 15-18 | 最大记录数量 | 4字节 | 设备最大存储记录数 | 固定值 |

#### 0x2A 读取事件记录
##### 请求报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x2A |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |
| 3 | 读取方式 | 1字节 | 读取规则 | 0=起始序号+数量、1=起始序号+结束序号（暂不实现） |
| 4 | 保留 | 1字节 | 填充字段 | 0 |
| 5-8 | 起始序号 | 4字节 | 起始记录序号 | 无符号整数 |
| 9-12 | 结束序号 | 4字节 | 结束记录序号 | 方式1时有效 |
| 13-16 | 读取数量 | 4字节 | 要读取的条数 | 方式0时有效，最多10条 |

##### 响应报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x2A |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |
| 3-7 | 实际读取数量 | 4字节 | 成功读取的记录数 | 最多10条 |
| 8-11 | 起始序号 | 4字节 | 实际起始序号 | 无符号整数 |
| 12-15 | 结束序号 | 4字节 | 实际结束序号 | 无符号整数 |
| 16-21 | 记录时间 | 6字节 | 事件发生时间 | 年月日时分秒（各1字节） |
| 22 | 事件ID | 1字节 | 事件类型标识 | 事件类型ID+开门方式ID（详见文档事件ID表） |
| 23 | 门号 | 1字节 | 事件关联门 | 1-4 |
| 24+ | 开门方式信息 | N字节 | 进门事件专属 | 单卡/指纹/密码等信息（格式见文档） |
| 25+ | 重复记录数据 | N字节 | 多条记录时重复 | 重复16-24字节（按实际读取数量） |

#### 0x2B 清除事件记录
##### 请求报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x2B |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |

##### 响应报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x2B |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |

### 2.12 平台与网络参数命令
#### 0x31 设置平台参数
##### 请求报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x31 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |
| 3-22 | FSUID | 20字节 | FSU唯一标识 | 不足20字节后补0 |
| 23-24 | 本机端口 | 2字节 | 设备本地端口 | 无符号整数 |
| 25-28 | 平台IP地址 | 4字节 | 主站平台IP | 4字节IPV4地址 |
| 29-30 | 平台端口 | 2字节 | 平台监听端口 | 无符号整数 |
| 31-32 | 心跳周期 | 2字节 | 心跳发送间隔 | 单位秒 |
| 33 | 启用心跳 | 1字节 | 心跳开关 | 0=不启用、1=启用 |

##### 响应报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x31 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |

#### 0x32 读取平台参数
##### 请求报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x32 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |

##### 响应报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x32 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |
| 3-33 | 平台参数详情 | 31字节 | 与0x31请求参数一致 | 包含FSUID、IP、端口、心跳等完整参数 |

#### 0x33 设置上行485地址ADR
##### 请求报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x33 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |
| 3 | 485地址 | 1字节 | 设备485地址 | 1-254，默认0 |

##### 响应报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x33 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |

#### 0x34 读取上行485地址ADR
##### 请求报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x34 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |

##### 响应报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x34 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |
| 3 | 485地址 | 1字节 | 当前485地址 | 1-254，默认0 |

### 2.13 告警与防盗参数命令
#### 0x35 读取告警状态
##### 请求报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x35 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |

##### 响应报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x35 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |
| 3 | 告警通道数量 | 1字节 | 有告警的通道数 | 无默认 |
| 4 | 输入通道号 | 1字节 | 告警通道编号 | DI/门磁通道号（1开始） |
| 5 | 告警通道类型 | 1字节 | 告警类型 | 10=盗情、15=红外、18=防盗、90=非法开门等 |
| 6 | 告警类型号 | 1字节 | 同类型序号 | 从1开始 |
| 7 | 告警状态 | 1字节 | 告警当前状态 | 0=无告警、1=有告警 |
| 8+ | 重复告警数据 | N字节 | 多通道时重复 | 重复4-7字节（按告警通道数量） |

#### 0x36 设置告警参数
##### 请求报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x36 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |
| 3-6 | 盗情保持时间 | 4字节 | 盗情告警持续时长 | 单位秒 |

##### 响应报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x36 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |

#### 0x37 读取告警参数
##### 请求报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x37 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |

##### 响应报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x37 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |
| 3-6 | 盗情保持时间 | 4字节 | 当前盗情告警持续时长 | 单位秒 |

#### 0x38 设置防盗参数
##### 请求报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x38 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |
| 3-4 | 有效时间 | 2字节 | 防盗触发有效时间 | 单位ms |
| 5 | 有效次数 | 1字节 | 触发有效次数 | 无默认 |
| 6-7 | 最大间隔 | 2字节 | 两次触发最大间隔 | 单位秒 |
| 8-11 | 保持时间 | 4字节 | 防盗告警持续时长 | 单位秒 |
| 12+ | 重复防盗参数 | N字节 | 多门时重复 | 重复3-11字节（共4次，对应4个门） |

##### 响应报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x38 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |

#### 0x39 读取防盗参数
##### 请求报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x39 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |

##### 响应报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x39 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |
| 3-11 | 单门防盗参数 | 9字节 | 与0x38请求参数一致 | 有效时间+次数+间隔+保持时间 |
| 12+ | 重复防盗参数 | N字节 | 多门时重复 | 重复3-11字节（共4次，对应4个门） |

### 2.14 用户管理扩展命令
#### 0x3A 读取用户数量
##### 请求报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x3A |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |

##### 响应报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x3A |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |
| 3-6 | 用户总数 | 4字节 | 设备内已存储用户数 | 无符号整数 |

#### 0x3B 读取用户
##### 请求报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x3B |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |
| 3 | 读取方式 | 1字节 | 读取规则 | 0=起始序号+数量、1=起始序号+结束序号 |
| 4 | 保留 | 1字节 | 填充字段 | 0 |
| 5-8 | 起始序号 | 4字节 | 起始用户序号 | 无符号整数 |
| 9-12 | 结束序号 | 4字节 | 结束用户序号 | 方式1时有效 |
| 13-16 | 读取数量 | 4字节 | 要读取的用户数 | 方式0时有效 |

##### 响应报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x3B |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |
| 3-6 | 实际读取数量 | 4字节 | 成功读取的用户数 | 无符号整数 |
| 7-10 | 起始序号 | 4字节 | 实际起始序号 | 无符号整数 |
| 11-14 | 结束序号 | 4字节 | 实际结束序号 | 无符号整数 |
| 15-48 | 单用户信息 | 34字节 | 卡类型+卡号+指纹+有效期+授权门等 | 与0x15用户参数一致 |
| 49+ | 重复用户信息 | N字节 | 多用户时重复 | 重复15-48字节（按实际读取数量） |

#### 0x3C 删除所有用户
##### 请求报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x3C |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |

##### 响应报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x3C |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |

### 2.15 登录鉴权命令
#### 0x3D 设置登录鉴权参数
##### 请求报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x3D |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |
| 3-12 | 登录用户名 | 10字节 | 管理员用户名 | 最多10字符，不足补0 |
| 13-32 | 登录密码 | 20字节 | 管理员密码 | 最多20字符，不足补0 |

##### 响应报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x3D |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |

#### 0x3E 读取登录鉴权参数
##### 请求报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x3E |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |

##### 响应报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x3E |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |
| 3-32 | 鉴权参数 | 30字节 | 用户名（10字节）+密码（20字节） | 与0x3D设置参数一致 |

#### 0x3F 登录鉴权
##### 请求报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x3F |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |
| 3-12 | 登录用户名 | 10字节 | 输入的用户名 | 与设置一致 |
| 13-32 | 登录密码 | 20字节 | 输入的密码 | 与设置一致 |

##### 响应报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x3F |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |
| 3 | 鉴权结果 | 1字节 | 鉴权状态 | 0=成功、1=失败 |

### 2.16 状态读取命令
#### 0x40 读取门强制状态
##### 请求报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x40 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |

##### 响应报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x40 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |
| 3 | 门号 | 1字节 | 门编号 | 1-4 |
| 4 | 强制状态 | 1字节 | 门强制状态 | 0=强制关门、1=强制开门、2=不强制 |
| 5+ | 重复门状态 | N字节 | 多门时重复 | 重复3-4字节（共4次，对应4个门） |

#### 0x41 读取DI输入状态
##### 请求报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x41 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |

##### 响应报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x41 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |
| 3 | DI通道号 | 1字节 | 通道编号 | 0=火警、1-4=辅助、5-8=门磁、9-12=出门按钮、13=开箱检测 |
| 4 | 通道状态 | 1字节 | 通道电平 | 0=低电平、1=高电平 |
| 5+ | 重复通道状态 | N字节 | 多通道时重复 | 重复3-4字节（共14次，对应14个通道） |

#### 0x42 读取最新事件记录
##### 请求报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x42 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |

##### 响应报文（INFO字段）
| 字节范围 | 字段 | 长度 | 描述 | 规则 |
|----------|------|------|------|------|
| 0-1 | CMD | 2字节 | 命令号 | 0x42 |
| 2 | SUBCMD | 1字节 | 子命令号 | 0 |
| 3-7 | 记录数量 | 4字节 | 最新事件记录数 | 无符号整数 |
| 8-11 | 起始序号 | 4字节 | 最新记录起始序号 | 无符号整数 |
| 12-15 | 结束序号 | 4字节 | 最新记录结束序号 | 无符号整数 |
| 16-24 | 事件详情 | 9字节 | 记录时间+事件ID+门号+开门方式信息 | 与0x2A事件记录格式一致 |

---

## 三、补充说明（完整）
### 3.1 事件ID核心映射（快速参考）
| 事件ID范围 | 事件类型 | 核心说明 |
|------------|----------|----------|
| 0x01-0x08 | 进门开门 | 单卡/指纹/密码/远程等开门方式 |
| 0x11-0x18 | 进门未开门 | 对应开门方式但未成功开门 |
| 0x21-0x28 | 进门超时提示 | 开门超时前预警 |
| 0x41-0x44 | 出门按钮事件 | 按钮开门/未开门/未关门/超时提示 |
| 0x51-0x55 | 非法卡事件 | 未授权/过期/未授权门/无次数/不在时段 |
| 0x60-0x61 | 设备事件 | 设备重启/恢复默认参数 |
| 0x70 | 操作记录 | 管理员操作日志 |
