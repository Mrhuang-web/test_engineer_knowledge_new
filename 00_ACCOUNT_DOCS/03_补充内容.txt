-------------------------------------------------------------------------------------
有字符需要加白名单																			【不清楚 -- 加的不是gateway吗 -- 未解决  -- 当时路径缺少/符号】
	在config服务里面
	目前是加那个访问地址

进到服务器																				【线上的已经知道了】
	10.223.178.32
	看各个包是否重启
		docker ps |grep 对应容器
	10.223.178.80
	
测点问题																					【已登记】
	新增测点，用电配置关系、无法显示问题
	如果是告警的不会显示
		解决方法
			先在t_cfg_mete里面加上这个测点记录
				中间库中的t_cfg_mete也需要加上对应测点
			然后到nacos看config的服务列表配置在那个服务器【一般只有一个的，有两个先下线一个】
			然后根据那个ip，到虚拟机里面，查看对应config的容器服务，进行重启
			然后到fsu模拟器，重新上报
			上报完成，在t_cfg_metemodel_detail看是否加载进来，进来就可以了
	
测试问题：																				【已登记】
	记得多来回切换测试下
	第一轮测完后，每个地方都点一点
	验证完后，相关的点也再点一点
	注意每次下载这些都不要忘了测
	多切换才知道有没有反应慢之类的问题

---------------------------------------2025_08_18----------------------------------------------

完善b接口文档											【已完成】			
	简化流程
	简单明了点

机柜管理												【已完成】
	文件数据造数

es历史数据造数										【目前不涉及】
	检验单机柜分析
	
上海													【已完成】
	冷通道分析回归
	机柜管理回归
	广东对应环境测试【共用到composite】
	
kafka												【未完成】
	消息队列，消费等情况
	
redis												【未完成】
	检测查看等信息
	
c接口												【接入已完成，但是未完善；接触目前还没操作过】
	接入
	接出



---------------------------------------2025_08_25----------------------------------------------
ai用例生成  —— 完成									【已完成】
表格登记【项目表、个人周报】	—— 完成						【已完成】
冒烟测试、集成测试、主流程区分	—— 完成					【已完成】
需求工单查找--需求	—— 完成								【已完成】




c接口对接												【完成】
	造数据



项目排期登记											【差链接放置】



开发不同模块、的xmind转换、页面自适应和数据展示下滑			【能解析最普通的模板，还需要优化】
	优化有优先级别、类型、使用范围
	readme:说明下操作，每个需求都要对应




电脑升级												【使用公司的，已经是11，文档已填写】


新需求												【已经完成 - 未导入】
	陕西 -- 自定义预警
	
	
机柜断电分析											【已完成】
	案例优先级排名、冒烟和集成重新选择
	
	


---------------------------------------2025_08_26----------------------------------------------
之前说												【完成】
	某个省份B接口和目前上海的B接口是不同的
	那么测试环境中是否B接口也是不同的
	
ai用例												【已完成 -- 登记】
	考核：每个月93条
	
动环平台

数据共享平台											【已完成】
	就是ftp，sftp
	
	
对于文件类的											【已完成】
	下次根据自己对需求的理解
	如果看到有问题，即使提出来，不要仅仅对数据
	

fsu													【已完成】
	对于B接口
		对应环境模拟器要接对应B接口
	
	对于数据库
		对应环境要链接对应环境数据库
	页面创建时
		普通用户看不到站点信息，需要alauda才看得到
			这个还不知道，目测可能是重启config应该就能好
		在设备创建的时候，代理选项不见了【代理选择，导致发起的请求有问题 -- 在对应B接口服务里面，service服务里面看日志】
			还要看表里面，忘记是那个表了
			目前自己排查可能是代理的问题
	问题排查、服务（ip、端口）查看
	文档说明步骤优化
	
	

机柜断电分析											【已完成】
	数据整理，造数据




新需求												【待完成 -- 已经优化脚本-待导入】   提醒开发导入fpa【重点】
	案例生成等
	测试数据准备
	测试方法验证
	
	
	
	
定位：
	
---------------------------------------2025_08_27----------------------------------------------     todo
陕西													【已完成 -- 已接入对应站点】
	创建多类型站点

	
机柜断电分析											【已完成】
	数据整理，造数据
	
服务对应表											【完成】
	


fsu测点												【待整理 -- 这里是上报后出现的问题  -- 重点    --完成】
	多的直接删掉 - 在中间库删除，再次上报
	可以根据设备id结合fsu定位到对应的测点
	
	alert_alerts:记录告警表
	
	


---------------------------------------2025_08_28----------------------------------------------
[很重要  -- 最好整理到业务里面去，这对后续测试很关键]

关于设备id、设备模板、测点、测点模板之间的关系																					【已完成】
	目前是我们创建fsu时是接入的动环设备
		动环设备有对应设备id、其他设备都有对应的设备id、彼此都是不一样的	[F12、并且要点击设备、设备展开的才是真正的设备]
		然后后面引入了其他设备		[机房环境等、这些都有对应的id、并且每个站点下机房下各设备的id都是唯一的]
		
		一般都是通过下面的设备id结合测点id  -- 然后到表里面查看数据
			有对应的业务表 ——  例如本次陕西的告警生成	—— 就是设备id＋测点id
				然后在通过设备id，到测点模板详细里面查看（t_cfg_metemodel_detail）
				
	需要告警出t_cfg_device
		存的是什么设备
	需要知道t_cfg_metemodel
	需要知道t_cfg_metemodel_detail
		存的是什么设备的测点
	需要知道是通过什么来如何，进行数据校验等问题
	
	
	

关系配置里面																												【已完成】
	测点怎么对应
		中间库跟动环库
		动环库需要怎么通过测点去检测
			1、业务表应该都是有对应设备id和测点
			2、还可以通过去哪里做
	测点选择
		电压
		电流
		温度
		这些都有跟设备对应——即设备的电流、设备的电压




C接口接入熟悉



C接口接触熟悉


B接口熟悉																【已完成】
	fsu启动不了(500: Internal Server Error的错误)
		可以看日志
			目前看到日志好像是B接口挂了、发不过去
			刷新后可以了
			好像是fsu中连不上b接口好像，请求超时



一个测点																												【已完成】
	设备id、测点编码、model还是啥来着组合
	senior no	wiki上看 
	好像是signalnumber
	
	
	
测试方法补充
	方法论	
		等价
		边界
		判定表
		因果
		错误推到



cicd部署问题																				【完成】
	重启后pod ip和node好像都会变
	
	
	
	


---------------------------------------2025_08_31----------------------------------------------

案例导入												【已生成】
	1、自定义告警
	2、机柜管理
	3、机柜可视化
	
内蒙古
	1、树结构优化										【已完成】
	
	
陕西自定义告警
	1、缺陷未说明										【已完成 -- 已上线】
	
	
测点与设备之间的关联																							  【已记录、待理清】
	即：t_cfg_metemodel，记录了测点与设备model的关联  -- 【通过设备model可以找到对应设备id等信息 -- 即t_cfg_device表】
	SELECT * FROM t_cfg_device LIMIT 10;
	SELECT * FROM t_cfg_mete LIMIT 10;
	SELECT * FROM t_cfg_metemodel LIMIT 10;
	SELECT * FROM t_cfg_metemodel_detail WHERE mete_code = '088304' LIMIT 10;
	SELECT * FROM t_cfg_device WHERE mete_code = '088304' LIMIT 10;
	
	
wiki																				【已找到、待完善    --集团测试环境-使用cicd服务启动问题排查】
	关于出现500报错后、配置configip端口的问题
	
	
自动化脚本造数																			【完成】
	全量
		insert_esdata_device_metecode()
	单节点
		相关参数：
			precinct_id,mete_code,device_id,imdate,minval,maxval,estime,
			env[这里一定要换成对应环境，不然没有数据]
		insert_esdata_device()
		
		

B接口-fsu页面无数据																	【完成】
	已经在fsu模拟器里看日志、日志显示数据是有显示、且发送过去
	也检查过binter接口服务、看到出现连接失败情况 -- 连接es失败
		目前发现是kafka出问题、挂了，因此需要重启【】
		首先考虑这两个方向
	
	



所有时候都需要考虑到服务是否启动											【已完成】
	都要在nacos里面看一下
	
	
服务启动的日志信息														【已完成】
	服务启动成功、会有相关的es等相关的ip和端口【即其他服务的信息等】
	
es																	【已完成】
	在nacos也有es的相关配置信息
	插入代码也需要结合这个es配置文件
	

本次上海所有涉及的案例													【已完成  -- 机柜管理未上传】
	机柜管理
	冷通道
	机柜断电
	
	
	
---------------------------------------2025_09_03----------------------------------------------
1、fsu-B接口接入、模拟器使用说明编写（小白版）																【完成】				


2、广西全量功能回归（9.10前搞到）																		【已完成】


3、每次需求 -- 文档说明准备 -- 需求涉及点、服务、相关表、准备数据、测试方法、验证方法、服务日志校验等信息				【已完成】


4、插件问题


4、用例要用AI： 拆开转用例AI占比>25%； 归档AI用采纳记录  -所有人


5、广西（最近节点9.15号交付）-过一遍8-10号：测试环境：菜单保持一致-所有菜单包括新增；--佳杰 、光春  				【已完成】



webbas小概率登录缓存问题


每次修改都需要看流水线是否构建好，新开发环境是否成功															【已完成】


环境的部署迁移																							【已完成】


重启服务这些																							【已完成】


v版本 -- 能耗平台
省平台端（所有的省）
	把依赖扫进来
	
	
	
通过这几点确认设备																			【已完成  -- 不理解再问即可】
	signal number、metecode、device_id、meteid


条件查询展示问题																			【完成】
	需要给后端看请求
	目前是因为传参为空：导致数据没出来，查询条件内容没展示


composite理解																			【完成】
	composite：所有对原子服务请求的情况


重启服务对fsu的影响																		【完成】	
	可能会导致kafka，redis这些挂掉了
	
	
开发开发后，插入历史输入没有显示数据															【完成】
	可能是开发的索引判断弄错了（上海这次就是 -- 本来是fsu_日期_省点，开发把省电直接固定住了）



BC接口完整逻辑


启服务的操作，以及没有服务的情况下，怎么去拉镜像启动												【完成】


怎么重启


自动化代码


脚本工具
	
	
mpp


B、C接口
	跑程序的时候
	需要在B接口模拟器服务器里面，给B服务加上白名单【双方都要】 -- 本地不知道
	
	
	
---------------------------------------2025_09_04----------------------------------------------
省级管理员（有勾选的菜单）   														--- 完成（现网登录周健胜的账号即可）
	https://docs.qq.com/sheet/DYVN2Z2JvWm5hWWpC?nlc=1&tab=6nahkx

现网：截图 -- 对比表格	--p1													    --- 完成（即记录升级管理员每个页面每个tab每个按钮）
	记录每个页面的导航内容（细节到tab页，tab页下的按钮等）


现网测试网络：																		--- 完成（代码改进，进队打勾判断、但是白色可能需要校验、红色不理会也行）
	已有未有的对比
	有颜色对比的 -- xlsx文件


接口响应和请求快速提取																--- 完成
	请求：
	响应：
		方式1：
			直接到response的预览（preview）右键复制出来接口 -- 复制object或值   -- 然后保存到文件里面
		方式2：
		方式3：



---------------------------------------2025_09_05----------------------------------------------
广西现网排查																							已完成
	https://docs.qq.com/sheet/DT2Rpb3hRamFZRHhI?scene=95bc47c19ad7a590a835ff285KMqu1&tab=BB08J2

	https://docs.qq.com/sheet/DSWNjb29RZ2dUZWdr?tab=8a0k76	

	https://docs.qq.com/sheet/DVWVLY1FUUnpGSmRs?tab=3ph209


帮学动看B接口
	00001006000000154452  
	250904测试设备 
	20250904102653
	疑惑点
		为什么广东和上海都是同个c服务呢，但是config里面的端口又不一样呢（很奇怪，数据库也有问题）
	目前排查问题
		1、可能页面创建时候--创建设备后，内部错误【自动填写了代理 -- 之前是有代理选择的，现在直接没了，可能参数传递有问题，需要看对应服务】
		2、导致t_cfg_fsu里面每次都会有代理信息【在B接口服务器看到日志，是因为获取了代理，导致invoke失败了】
		服务排查：
			v2-sc-configmanagement【这里有定位到错误】
			v2-sc-composite【这里也有定位到错误】
			v2-sc-log
			
			
C接口梳理


---------------------------------------2025_09_08----------------------------------------------
广西全量功能正式开始																					【完成】
	关注已有现网问题：
		https://docs.qq.com/sheet/DT2Rpb3hRamFZRHhI?tab=BB08J2&nlc=1
		https://docs.qq.com/sheet/DT2ZiQXZHQWN6ZXpF?tab=BB08J2  【看这份】
	
	
	主要看
		1、8月31和9月15的
		2、状态除了待客户，其他都要看
		3、有问题登记研发云
		
		
		
---------------------------------------2025_09_10----------------------------------------------
1、验证查询之类的需要看他的返回情况，其次要看他的传参是否正确，是否缺失参数之类的，导致查询失败的			【完成】
2、查询时，为空也需要验证一下他们的提示情况															【完成】
3、400错误有时候只是小问题，多刷新多充实几下就可以了													【完成】



503或是500的错误，400内部错误，一般都是服务器在部署或是config有问题									【完成】




---------------------------------------2025_09_11----------------------------------------------
nacos和服务问题																				【完成】
	cicd上启的，nacos里面不会显示服务列表好像
	服务器启的nacos就能看到，记得是这样子
	
	又好像是服务器器的不会显示在cicd上
	


同一环境下同节点起两个转发有问题，把cicd部署的下线看看														【完成，待完善】
在10.1.4.193启动了
	binterface-service-server-p1、
	binterface-service-client-p1、
	binterface-service-data-p1、
	ftpproxy-service-p1、
	kafka
	
	
然后模拟器config.py配置																				【完成】
	可以把b接口的ip换成  【cicd对应接口服务的node】
	
	
当时改了最新包
talnet   【直接在cicd的终端就可以】


告警视图																								【完成】
	可以配置告警
	
机房名称需要登记上去【后端】



B接口：需要区分下是那个系统接的fsu																		【已经完成】
	刚刚的问题问的是，广东接入的是哪个
		需要搞清楚：B接口是不是就是都是同一个镜像呢
		即B接口fsu里面的是一致的【但是配置里面需要改下B接口的服务 -- 需要改对应B接口服务   --  上海和广东难道是不一样的吗，那拉的是哪里的】
		
		
		但是好像每个环境都单独部署了一个b接口
		
		

切换前条件，后面的需要清空																		【完成】


B接口整理下（重新梳理）	
	nms好像是有关联的
	
	
业务也都整理下																					todo



全量功能也标注下																				【完成，等带回归的消除即可】


找那些不符合的【广西未什么标准化的】																【完成，已经登记】


python找一下不一样的																			【完成 - 好像是】


告警配置怎么配置																				【完成】






	
有效性稽核																					【完成，待完善】
	好像根据稽核规则配置
		然后对应测点达到阈值之后就会触发告警
			然后就会到信息稽核详情表里面
				至于设备完整性和地市统计不太清楚
				
				
				
隐患配置的																					【完成】
	有对应文件、然后还有py脚本【隐患规则】
	然后ruleid，在隐患配置页面去获取对应的即可
	
	如果时间长需要传两条
		基many给成ture
			然后value有两个，data有两个，对应两条数据  -- value和value1，data和data1
			
			date1是旧的，date是新的，date要大于date1
			
	综资配置
		需要看sql
		
		
		
---------------------------------------2025_09_13----------------------------------------------
新需求
	完成案例编写
	了解综资数据来源
	了解需求
	
	
需要掌握																			【完成】
	运用测试方法与实际工作结合
	不然效率太慢了
	
	
注意造数脚本																		【完成】
	输入大小值要注意，如果大小值反了，会导致执行失败的
	
检验每个查询时																		【完成】
	是否有待参数 -- 即参数是否有，没有要说
	
	
	
---------------------------------------2025_09_14----------------------------------------------	
	
	
资产风险设备，来自综资设备要有，超期服务也要又
	left join
	资源标识：res_code   -- 综资表能找不【要自己造】
	超期服务数据怎么来 --- 从综治来 -- 现有综治表res_code

	161_2028_202801_1757389432
		testRoomdata.py文件
		综治表里的
	
	
综治设备类型					
	在t_cfg_dict
	SELECT * FROM t_cfg_dict WHERE col_name = 'zz_device_type';
	
	
看wiki
	了解综资数据是怎么来的
	
	
目前上海fsu接口																			【完成，400是告警的问题】
	使用普通账号看实时监控，400错误
	但是alauda进去却可以看，可能是权限问题，具体问开发或是看之前的笔记把
	
	
BC接口完整逻辑


xmind转换需要完善多版本


文件对比【即标准字典表的匹配】																					【完成】


广西相关需求涉及的笔记全都优化
	相关功能全都优化
	
	
工具包代码进一步优化
	即工具内的
	
	
整理测试流程
	测试环境测试、现网测试【远程或是现场，现场是开发出差远程配合】，产品验证，客户验证，确认没问题就会关闭
	
	
	
	
	
	
	
---------------------------------------2025_09_15----------------------------------------------	


	
产品交付文档简略版
	https://docs.qq.com/sheet/DU2tRdmdmeXFEUEds?tab=t7bnhf
	
	
	
优化的项目
	注意所有的测试用例均已写
	防止追溯
	
	
前端交互无反应的时候																	【完成】
	试试看直接用接口去测试看
	这样也能区分
	
	
morphy																				【完成 - 替换其他的】
	接口的
	
	

问题补充																				【完成】
	【下载的excel无法打开，需要搞一下验证下】
	131	设备管理-巡检统计
	145	能耗管理-月度统计报表
	179	设备管理-故障统计
	还有一个不通过的
	164	设备管理-隐患统计
	
<<<<<<< HEAD
	
	
集团新案例																									【完成】
	即考虑边界值：临近时间，【再往时间趋近 或是已经超过，告警是否有效】    -- 告警是在什么时候才产生
	等价类：
		综资与动环设备，正常关联，告警统计情况、、
		综资与东环设备，不正常关联，不应该展示，不计算
		
=======
B接口-fsu终端																				【完成】
	多次上报注册没反应
	然后删除了fsu里面的model，重启服务，再重新上报注册
	SELECT * FROM t_cfg_fsu WHERE fsu_origin_code = '847272716181';

	SELECT * FROM t_cfg_nmsdevice WHERE device_id = '00001006000001531549';

	SELECT * FROM t_cfg_device WHERE device_id = '00001006000000154147';
	
	
	
广西错误  ip功能
	1、IP申请入网-被驳回后删除一条入网设备，点击新增按钮无法新增
	2、IP申请入网-查看、编辑页面-工单号显示：123123123
	3、IP入网申请工单，查看详情-入网设备操作列显示删除按钮，此处不应该显示
	4、IP退网，选择退网IP，没有回显站点类型、设备类型、接入动环监控系统
	5、IP退网，弹窗页面筛选不生效-设备类型、站点类型、IP前端没传递参数
	6、IP退网-查看页面显示的页面内容与退网申请内容不一样
	7、IP退网-批复人编辑页面，返回子网掩码、网关（前端未解码）
	8、IP退网-批复人编辑页面，后端接口未‘IP占用情况’ipStaus字段（已改）
	9、查看工单页面-新增返回按钮
	10、申请退网页面-已选IP改为‘IP退网’
	11、建议优化- IP申请列表无法区分工单状态（入网、退网）
	12、列表的tab处统计数量与返回工单数量存在不一致情况（待后端处理）
	13、首页-我的工单，点击对应工单未能跳转到对应IP申请页面（待前端、后端处理）
	14、IP申请-删除操作未增加二次确认对话框




---------------------------------------2025_09_17----------------------------------------------	
设备类型（ups设备等等这些）																				【完成】
	点开设备类型，下面才是对应的设备
	然后点击设备，设备展示的测点就是这台设备的测点
	
	
	
fsu补充																								【完成】
			<TAlarm>
                    <SerialNo>2</SerialNo>							2？
                    <ID>087001</ID>
                    <DeviceID>100100000000087</DeviceID>
                    <NMAlarmID>601-087-1-087001</NMAlarmID>
                    <AlarmTime>2025-09-17 14:12:34</AlarmTime>
                    <AlarmLevel>3</AlarmLevel>
                    <AlarmFlag>BEGIN</AlarmFlag>
                    <AlarmDesc>交流输入中断、缺相告警</AlarmDesc>
                    <EventValue>0.2</EventValue>
                    <SignalNumber>000</SignalNumber>
                    <AlarmRemark></AlarmRemark>
               </TAlarm>


测点																									【完成】
	serial NO 
		根据对应设备id，到t_cfg_device,找到device model
		找到device_model后，就去t_cfg_metemodel_device里面找到对应设备测点
		表里mete_kind，也就是serial_No
		
		
		
fsu																									【完成】
	独立服务器里面启动
		需要吧一个binter镜像拆分成三个子节点
		还需要有一个ftp的镜像
		然后kafka，可以重启，或是连已有的【怎么连？】
		然后ng代理配置
			需要找到ng对应位置，参考已有的b接口的ng配置是怎么样的
			ps -ef|grep nginx
			 
			
rancher容器																							【完成】
	进去后一般就是默认到项目的位置
	需要自己切换到根节点
	
	
部署																									【完成】
	nginx部署教程
	zookeeper和kafka是配套的
	还要配置fsuproxy
	先了解服务与服务之间的关联，在进行搭建
	
	
目前上海和广东的fsu都是用的同一个B接口															【完成，待完善】
	那么也就是上海的也需要用对应的代理？
	广东的8680，性能测试的时候，说是要在8680里面创建，才有数据 -- 需要用gd的数据库
	那为什么还有9080，9081呢
	
	
elastictivate																				【es链接工具】



机楼视图【高温告警触发条件】																		【完成】															
	>50度才是高温，<20度是低温
	然后机房温度分析【可查看对应数值】


注意点：																						【完成】
	1、接口如果有枚举的传参，那么在检测值的时候
		需要看页面的值跟触发值是否一致，如果不一致，那么是不是接口传参有问题
		检查接口的传参是否根据规定的来传递
		如果接口传参不是根据规定的来传递，那么应该就是前端传参问题，导致的数据有问题
		
		那么数据为什么会有问题呢？【待解决】
		



		
		
bug登记																											【完成，已修改状态】
	196
		有效性稽核导出之后，类型有问题
		该事件啥的，导出的是枚举数值，不是文字
		还有就是日，也是显示枚举数值
		告警来源也是不对的

	8
		开关电源模块数量不足的隐患，部分触发值不是具体数值，而是负载总电流异常，这个问题建议针对全部核对一遍，不要只针对发现的那一个问题去处理
		值为负载总电流异常，也能触发？
		
	10
		字段没问题
	11
		【怎么计算呢，服役>150，怎么去造数，对应啥表】
		“服役年限＞150%更新周期”应改为“服役年限≥150%更新周期”，否则会漏掉
		同时注意数值的筛选也要按这个条件来
	19
		1、数据中心只有3个，但是站点类型选择数据中心时关联下拉的选项有4个；
		2、只选择站点类型，不选择站点名称点击查询时没反应，查询不出符合条件的数据
	24
		【数据怎么来？】
		1、PUE无数据
		2、超期服役数量和实际对不上
	25
		数据中心点位不能下钻
	86
		需要新增站点类型查询条件
	93
		【数据咋造？】
		点击第一次导出数据导出过程中按钮可以转圈或者怎么样，再点击时应该提示类似正在导出数据请稍后，而不是直接提示下载失败
	119
		【业务怎么走，数据怎么造？】
		设置为推送工单的规则出了故障后在电子运维系统没查询到对应的工单记录，导出报表对应的记录里面是否推送工单也为否，但是规则里面设置的是推送工单
	136
		【数据咋来的？】
		问题根本没解决，建议把全量数据导出看一遍很多字段都存在空白的情况
	148
		【数据怎么来】
		导出的报表数据和系统不一致，没有默认为两位小数
		系统是第一次采集时间，报表里面则为第一次表底时间，还有第二次
		
		

中屏首页
	需要点 【配置 - 视图】
	
	
fsu																											【完成】
	服务
		ftpservice
		fsumanage
		serve
		client
		data
		nginx
			access
			error
		kafka - zookeeper
		
		
性能的
	需要我来测？？
	
	
	
优先级
	用例，数据来源
	cicd
	
	
fsu性能																										【待完成】
	补充相对于的jmeter命令
	思路
	注意接口不能写错，要写的是B接口，不是fsu模拟器的接口
	日志里面的排查
	jmeter性能报表导出的排查等内容


	普罗米修斯搭建
		搭建在哪里
		怎么搭建

	Prometheus 性能监控平台:9090端口
	Grafana 做可视化：3000端口


	性能指标怎么看
		具体的内容啥的
		有多少中形式

	监控怎么搭建

	日志怎么排查



重新归纳内容
	表字段，与数据的对应
	其次是业务方面的逻辑
	其次是数据方面的校验



补充上海逻辑																							【完成】
	每5分钟取一次，取进24小时内的（因此造数需要造近24小时内的）




gemc是啥																					



fsu创建设备																							【完成】
	好像还需要加上哪个接入服务器
	
	
---------------------------------------2025_09_22----------------------------------------------	
1、上海问题																							【完成】
	机柜断电分析：站点-机楼-多机房问题
		前端：
		后端：
	机柜断电分析：树接口，结构返回有问题
		前端：前端传2，应该返回站点
		后端：后端却返回5，为机房类型
	机柜断电分析：站点-机楼-机房-单机柜列-多机柜问题




2、注意点																									【完成】
	任何需求，或者优化点等等都需要写案例【防止追溯】
	任何需求，涉及到数据的，全都造数验证下【以防无数据的情况】


3、广西现网需求



4、集团超期服役需求																							【待完成】
	案例需要再整合


5、之前所有需求
	案例需要再优化下，确保每个需求都有对应的案例
	把对应的脚本啥的，也优化上去，确保看得到需求怎么测的


6、补充文档【个人周报】
	需要补充任务


7、BC接口
	把待优化的点补全


8、业务和wiki内容加强熟悉
	确保业务内容熟悉


9、自动化和脚本
	分析现有的自动化【拆分，模拟实现】
	现有脚本设计【拆分】
	fsu模拟器
	相关第三方库学习


10、上海语音通报																					【完成】
	9月23测试


11、集团测试
	设备超期服役详情表
		每个一会会提示查询失败？


12、自己理解
	ftp -> es [同步]  --> 这里ftp同步的文件需要在哪里看，还是不用管
	es -> mysql [同步]
		es涉及的索引
		mysql涉及的表
	es的数据会定时同步给mysql 有延期

	确认：
		都在es里面，就是word里面的相关表

	
13、上海																								【完成】
	【创建上千个站点设备机柜列等等】
	还需要做下压力

	新增
		语音
		提示框
		没有刷新【比如现在是15.00，但是没有更新数值】

	造800个机柜或1000个机柜
		每个机柜测点全部配全
		
		目前机房已经可以
			差设备和机柜列和机柜


14、测试总结																											【完成】
	每个接口的参数都需要了解清楚，以及返回参数怎么对应【找开发拿接口】



15、fsu																												【完成】
	1、目前是server对应client -- 看cicd部署即可知道
	2、看日志，查看对应错误是什么，是否没有连接【kafka，一般是10.12.12.186.9092，然后还有redis这些】
	3、看nacos，看clinet等服务是否已经起来了
		需要重新部署对应server
	403是告警的，没有关系
	测点对应的通道号比较多


16、问题记录																											【完成】
	语音播报有问题
	数据没有实时刷新
	语音左下角没有提示
	
	
17、机柜断电分析的																										【待完成】
	创建多个机柜列，机柜
	同个机房下
	不同机房下
	同个楼栋下
	不同楼栋下
	
	业务逻辑整理
	
	1、推送为否还是进行语音播报
	2、切换后语音不播放
	3、断电规则配置
		生效范围：树结构 - 站点，楼栋，机房
		已选取：站点，楼栋，机房
		
	整理数据的关联
		设备，机柜，机柜列，precinct_id，有啥子关联
		
		目前用电关系：通过deviceid+model组成来作为channel
		
		energy_cabinet_attribute_config 机柜断电测点表，还有涉及啥sql
		

18、补充..
	脚本 - 批量插入测点
	
	
	冷通道
	机柜断电分析
		不取es了，取数据库的了
	机房温湿度
	单机柜分析
	机柜管理
	机柜可视化
		这些的业务还需要再理清楚点
		
	es拿数据的话
		那么直接手动插入es？好像不行
		好像是一定要有设备才能插进去
		那么mysql呢，直接插进去？ ，但是设备不存在能取吗？？


---------------------------------------2025_09_25----------------------------------------------	
1、看nacos配置文件中文件路径得ip
	就是看nacos配置文件得文件名，到服务列表里面找对应服务ip就是了


2、知道ip，不知道密码之类的																							【完成】
	可以到rancher里面取查看，对应pod，然后进入终端


3、前端页面点了没反应																			【完成】
	都应该去看下控制台


4、bug																						【完成】
	前端交互都问题，看控制台
	后端交互有问题，看接口
	
5、分页验证时候																				【完成】
	需要校验每个层别的分页，展示，跳转数 -- 有问题就看接口返回
	记住检查时要看接口切记
	除了数据逻辑注意的就是看接口，日志，控制台了


陕西设备生命周期（超期服役）																		【完成】
	之前是从现网到数据到综资（即原始综资）  --> 目前集团是有的了



---------------------------------------2025_09_25----------------------------------------------	
1、每个环境都有对应的es																			【完成  -- 业务优化-项目公共点中】																	
	都可以通过nacos配置里面找：关键字elas
	目前已用的：
		sc项目：
			10.12.12.186:9200
		集团：
			10.1.203.38：9200

	
2、补充集团生命周期																				【完成】
	树结构是动环里面的
	筛选条件也是动环里面的
	右侧数据展示
		更新周期：获取es综资后，对数据的设备类型子类，与数据表-周期关联表进行匹配
		在网时间：然后在网运行时长，就结合综资字段值和当前一天时间计算
		超期服役状态：就是通过在网时间 / mysql对应表映射的周期数据
		告警频次：则是通过动环设备的power_device_id，关联上综资对应power_device_id，来实现关联，然后使用模拟器在动环里面造数即可，然后触发就会去拿告警索引
				 月统计的
		其他内容：
			全是综资的数据，只需要查看对应es里面的数据即可【有对应的表映射】

	筛选条件
		由于综资有些地市或是站点机房的信息是数字，因此又要涉及到数据表的对应



3、浏览器重置缓存																							【完成】
	长按刷新键即可



---------------------------------------2025_09_29----------------------------------------------	
1、设备和设备系统表，是两个表（设备系统里面就有对应设备？）														【待完成  -- 需要后面慢慢摸索】
	t_cfg_devicesys



2、python																								【待完成：即列表作为形参】
	参数定义问题
	列表啥的为什么可以做形参



3、验的时候																								【完成】
	一个点验了，其他的都要点一下
	
	

---------------------------------------2025_10_03----------------------------------------------
1、集团需求																								【完成，待登记】														
	超期服役这块：
		修改地市为区域
	2个tab的筛选条件
		需要加上高压直流电源
		
	


	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	---------------------------------------未完成（重点）----------------------------------------------
	
	
	
	
	
	
	
	
	
	
---------------------------------------2025_10_08----------------------------------------------
ai生成案例复制到csv中出现生僻字																	完成【位于note_用例编写_ai生成中】
	使用Notepad++：
	复制内容到Notepad++
	点击"编码" → "转为UTF-8-BOM"
	保存为 .csv 文件


---------------------------------------2025_10_10----------------------------------------------	完善导图【综资部分】
1、补充说明
	综资数据
	
2、吃透综资对应文件
	特别是模型
	还有就是20241204综资数据对接这两个文档，要理解清楚


3、需求案例导入																					完成【已导入】


4、超期服役详情
	通过动环的去匹配到综资的，然后就自动双向绑定

	先开告警，
	先从超期服役开始
	
	缺少一个综资如果没有站点、就用动环的


---------------------------------------2025_10_13----------------------------------------------	
现网问题：																						完成【登记在对应项目-bug目录中】
	导出失败问题【设备生命周期统计】
	
测试问题：																						完成【登记在对应项目-bug目录中】
	好像缺少局站信息表的
	
mpp 																							完成【登记在技术优化-mpp目录中】
	8亿数据 - 10s内处理完成，逻辑复杂则是3m内，具体就是根据数据库有关 - 目前是mpp数据库
	
	
中间库																							
	为什么不需要导出呢【单表导出 -- 联表查询、多表查询才有用】



---------------------------------------2025_10_15----------------------------------------------
层级关系																							完成【登记在业务逻辑重点中_监控测点项目】
	数据中心
		楼栋（机楼？）
			机房？
	通信枢纽楼站点？   --机楼？
		机房？

	需求用词,对应上表,备注
	站点,Site（1 级）,下拉框第一级，地市级。
	数据中心,Data Center 节点（2 级）,业务菜单里把它当成“站点子类型”来过滤，物理上就是园区里的“机房楼群”。
	通信枢纽楼节点,Telecom Hub Building（2 级）,与“数据中心”并列的另一种“站点子类型”，只能选枢纽楼，不能选数据中心里的机房楼。
	楼栋,Building（2 级）,第三级下拉，把“数据中心”或“通信枢纽楼”下的所有单体楼都列出来。
	机楼,口语 = Building,运维口头说的“机楼”就是一栋楼；需求里混用，看到“机楼”就当“楼栋”。
	机房,Room（3 级）,制冷机房、IDC 机房，配置 CDU 时选到这一层。
	
	补充思维（需要验证）
		数据中心
			楼栋、通信枢纽楼  -- 都属于机楼（然后数据中心还要区分什么楼）
				机房		   -- 含有（很多种类型）
					机柜列
						机柜
						
		跨楼栋
			仅数据中心支持


补充：
	计算部分规整




---------------------------------------2025_10_16----------------------------------------------
补充点																							【完成-对应项目测试用例_数据准备中】
	1、实时监控部分需要结合起来
	2、单机楼（即选择通信机楼时），楼栋-即选择数据中心楼栋后
	3、楼栋下有多个机房，机楼下也有多个机房

	4、分类
		情况1
			全在同个机房下 - 平均一次即可
		情况2
			在不同机房下，平均之后再平均
		情况3
			跨楼栋	
			


补充内容
	集团  																						【差案例规整+核心用例准备-站点和数据已完善】
		1、站点写入
		2、新需求数据准备  -- 对应性能数据脚本
		3、案例重新编写
		
	广西  																						【差案例规整，核心用例和准备】
		1、网络拓扑测试用例准备
		2、数据准备



不同																								【完成-对应项目测试用例_数据准备中】
	不同测点id
		不同测点

		（设备+测点+通道)  -- 先区分
		（设备+测点）+通道

		存在设备名称（可能相同）
			测点
				通道

	通信机楼
	楼栋
		当作站点

	区分平均
		设备A 会不同
			测点相同的
				通道会不同
		如果一个设备 - 里面存在了多个测点（平均）
		如果多个设备且存在多个通道（平均再平均）


	怎么去什么时间，什么范围


---------------------------------------2025_10_17----------------------------------------------


疑问点：																											【完成-对应项目测试用例_数据准备中】
	1、C接口数据准备文件 - m_signal缺失测点，在字典表找，然后alarm_level，signalnumber，thredshold，nmalarmid怎么找
	
	2、不同的通道号 设备 ，多个相同类型设备

		设备+测点+通道)  -- 先区分
		（设备+测点）+ 通道
		
		举例：
			总流量（m³/h）--测点选择，可选数据中心下节点的测点，测点选择范围仅限中央空调末端012325，仅可选择一个测点

		说明：
			不同设备类型，应该不存在同个测点把？ -- 可以通过修改device_model
			正常每个类型对应一个测点模板（要对应）






	2、怎么取，范围，开闭区间
	2、写入中间库之后需要修改机房类型
	2、数据造数：即每个都去校验的话可能很麻烦，想办法造个数据可以验到位的


	中间库：cinterdb_400_jt_gz:38服务里面




---------------------------------------2025_10_17----------------------------------------------
1、上线完验证完																							【完成_在v400文档里面，各省核心的，缺少文档总结】
	需要看每个服务确保都在运行
	需要检测告警相关所有内容，实时数据等【确保无延迟】
	在V版本通用文件中



2、优先级
	液冷案例优化【优先级2】
		差几个方面 -- 一个是生产机房【不同类型创建的情况 -- 见kimi里面】
	
	供电拓扑【优先级2】
		如果没配置不会显示，
		通过precint定位 -- 表会存
			逐级
		准备fsu/ 的ip
	
	广西
		现网问题 - 用户未验证【优先级1】
	
	必验案例【优先级1】
		
	
	数据准备
		需要支持造什么数据，脚本怎么造[差怎么理解写入m_signalh -- 即历史数据 -- 是否需要配置指定测点]   【优先级2】
	
	综资理解【优先级3】


---------------------------------------2025_10_20----------------------------------------------
1、广西现网问题验证																					【完成】
	待客户验证
	已验证的也再验证

2、数据准备
	2.1、站点接入

3、广西网络拓扑

4、关系补充																						【完成_位于液冷项目用例准备_数据准备_补充说明】
	用的lsc400
	设备名有啥要求吗【？】，跟设备类型又有啥联系？
		根据需求中测点所属的设备类型来定义？

	1、m_site -- 数据站点接上去的是楼栋，因此可能要两个（咋接，先建站点？）
	2、机房因此也要多加一份
	3、m_device -- 最左边对应的是模板【同名字属于同个模板】
	4、m_signal -- 信号编码对应 最左列也要跟设备的模板要一致


5、c接口																							【完成_位于液冷项目用例准备_数据准备_补充说明】
	需要更换最新的models400文件
	数据准备需要换文件


6、机楼就是楼栋(动环的称呼，至于综资就不清楚)															【完成_位于液冷项目用例准备_数据准备_补充说明】
	数据中心下需要创建楼栋（就是机房）


7、总结
	升级总结
	广西专项总结


---------------------------------------2025_10_20----------------------------------------------
1、排查																							[完成，位于现网错误_验证点补充]
	根据观察名称，统计关系，再看接口关系排查【例如广西动环月报-】
		读批量维护-设备那里的数据的

	容量管理-变压器
		【其他的好像在资源资产-批量维护】
		设备维护
		产品 -- 过来后，再动环月报中配置的（有的站点有，有的站点没有？）


	看compiste
		本来是energy，但是都走composite

	月度统计表表
		energy_formula_config
		energy_formula_config_copy...
		t_zz_space_resource 


2、现网验证顺序
	三个时间：开始，结束
	1、先验上线功能
	2、验证完后等开发 - 有问题发问题
	3、1h后核心功能
	https://docs.qq.com/doc/DVFRvQWNqWG1PdnJC


3、广西验证问题补充																					[完成，位于现网错误_验证点补充]
	超期服役
		看lifecycle_status
		SELECT * FROM overdue_device_detail LIMIT 10;
		SELECT * FROM t_zz_power_device LIMIT 10;


	设备风险：
		设计的服务？
		目前查询均查不到
		查看是否属于综资设备
		SELECT ts.city_id,ts.county_id,ts.zh_label,ts2.zh_label,tp.* FROM t_zz_power_device tp
			JOIN t_zz_space_resources ts ON tp.related_site = ts.int_id 
			JOIN t_zz_space_resources ts2 ON tp.related_room = ts2.int_id LIMIT 10 ;

	运行分析-字典表维护
		对应哪个服务
	
	综合监控-中屏首页
		pue的数据对应那里的
		对应几楼试图 -- 哪个表？，什么服务

	字典表维护？
		去重返回？

	设备管理-隐患统计
		隐患名称没去重？


	能耗估算
		SELECT tc3.precinct_name,tc2.precinct_name,tc.precinct_name,ea.*  from energy_audit_estimates ea
			join t_cfg_precinct tc on ea.precinct_id = tc.precinct_id
			JOIN t_cfg_precinct tc2 ON tc.up_precinct_id = tc2.precinct_id
			JOIN t_cfg_precinct tc3 ON tc2.up_precinct_id = tc3.precinct_id
			WHERE ea.ups_estimates != 'NULL';
		具体计算

	能耗数据稽核
		根据能耗管理-能耗自查验收（还有那些相关？）
		表是什么，服务是什么
		这是能耗稽核总数据（根据能耗稽核估算，可以看没各子项的数据）
			子项数据怎么来？
			根据配置来？？　－－　用电关系配置？

	能耗稽核报表？
		这个又是什么
		异常站次　－－　来源于能耗数据稽核的统计

		存在站点类型为空：因为ｔ＿ｃｆｇ＿ｐｒｅｃｉｎｔ　中没有对应站点


	报表
		数据稽核
			稽核估算
			
	综合监控-拓扑评估
		结果表字段与综资保持一致（去哪里对比？）
		
	运行分析-有效性稽核
		设备完整性 - 信号要求接入数量  -- 具体根据接入的市哪些测点
			SELECT * FROM t_cfg_device LIMIT 10;
			SELECT * FROM t_cfg_device WHERE device_id = '17446809784244488';
			SELECT * FROM t_cfg_metemodel_detail WHERE model_id = '00001008000002827767'

	综合监控
		基本信息
		站点对应？
			t_zz_power_specialty
			这里存放综资所有的属性 - 站点，机房，省份，等等还有设备

	中屏首页
		超期服役 -- 对应超期服役统计表（数据只取数据中心和通信枢纽楼，且只接收 -- 100%≤服役年限＜150% 和 > 150%的

技巧
	去重等展示，看接口，字段判断怎么去重？，然后表和数据以及服务？

	多点几次，有时候第一次不行，点第二次可能能看（某个功能键导致）
	













---------------------------------------  未完成  ----------------------------------------------





---------------------------------------2025_10_24前必须完成----------------------------------------------
1、集团需求																																		-- 完成
	造数，要提前造数好，准备好冒烟测试，案例需要修复好

2、广西																																			-- 完成
	网络拓扑需要先确认好，准备好冒烟测试，案例需要修复好
	网络拓扑需要先确认好，准备好冒烟测试，案例需要修复好

3、广西																																			-- 完成
	新需求两个，需要确认然后修复下，看是否需要准备案例
	
	

4、综资相关
	resource_code
	1、检查对应设备索引数据，es上数据与原始数据文件上数据是否匹配，每个设备类型对一下（是否入es后字段少了，或者字段内容与映射关系表不对应）
	2、检查那个低代码的对应表数据是否与es上有出入
	3、检查站点-机房-设备关联是否匹配（站点表ini_id,机房res_code,related_site,设备表的related_room）
	4、检查入库对应设备类型字段是否缺少，然后检查第3点操作。


---------------------------------------2025_10_27前必须完成----------------------------------------------
1、网络拓扑核用例																																	-- 完成

2、报表核心用例（补齐案例）																															-- 完成

3、超期服役案例编写																																	-- 完成

4、升级服务
	如果升级了composite、logs，那么树结构，告警哪些一定得验证，看得很细







---------------------------------------2025_10_29前必须完成----------------------------------------------


1、已经问清楚了，现网上一个设备 - 子设备，只会有一个服役年限值																							-- 完成

2、怎么要在composite去curl？，不是对应服务curl吗（因为内容写在composite上的）																			-- 完成

3、容量分析
	高压直流，高压市电
		资源资产（数据维护-系统维护）
	资源资产（数据维护-批量维护） -- 配置备份方式容量等
		1、可以对机房进行系统配置（即系统类进行配置）
		2、可以对机房下设备进行配置
		3、可以对机房下机房空调进行配置


4、字段说明
	precinctkind  -- 记录的是区域/站点/楼栋/机房/设备/设备系统等的区分 



5、未导入案例导入齐全


6、分析自动化框架

7、手动部署
	前端打包后【没有只要到了服务器这一步，即使没有推到远程，也可以手动部署 -- 具体命令就根据下面去找对应sh脚本】
	进jenkins，http://10.1.4.113:8082/view/%E9%83%A8%E7%BD%B2/
	点击部署
	点击对应环境name，进去查看里面用的那个sh脚本




---------------------------------------2025_10_31前必须完成----------------------------------------------

1、https://www.trae.cn/


2、告警配置
	视图配置
	主次告警
	语音配置

3、即后续建立的项目使用ssh都可以直接连接，因为本地已经配置了ssh - 不同机器是如何管理的？忘记了，补充下


4、python
	https://docs.python.org/zh-cn/3/library/typing.html


https://docs.qq.com/doc/DREFGemFYSUZJakdn


---------------------------------------2025_11_02前必须完成---------------------------------------------
新需求
	动环测试的
	
ai用例的
	要直到怎么排查挑选



广西-告警
	1、在系统管理里面配置资源 - 即监听的点
	2、本机构管理，找到对应账号，点击给成员分配数据权限

	3、语音配置
		用于控制播放次数
	4、视图配置
		对告警重新分级别

集团-水资源
	报表数据展示 - > 日和月都有对应的限制表，超过限制就不会显示
	楼栋关系 -> 只跟站点下，有多少相关，不需要是否配置，收buildingid控制

容量评估
	1、系统设置
		资源资产-批量维护
			系统中查询
	2、新增用电评估



权限，每个接口都要做鉴权
	特别是导出，查询这些，与数据有关联的



比较紧急的包
	测完就需要跟开发说，部署上去（已犯）


BC接口
	client是否有接收fsu报文


每个提测都需要测下权限
	（页面层面一定要）
	高权限
	低权限
	（接口看情况）

上海的（省的都是）
	数据权限才是配置哪些可以访问的  --> 这里配置好后，其他地方才可以用

	目前断电分析，缺少垂直越权






---------------------------------------2025_11_05前必须完成---------------------------------------------
1、大量数据查找时（优化索引级别  -- type至少未range以上）
	方式1：需要用between 去分割查看 
	方式2：索引
	其他方式需要补充下


2、动环测试
	资源设备新增 -- 采集器（也就是fsu，需要ip库入网才行 -- 站点需要入网？）  -- 综资里面的？

	桂林平乐县中心机房业务区1三江合国际汇聚

3、能耗
	能耗和
		配置的一样，取得还是用电关系
		按照配置表找（区分AB栋 - A-xxx）




集团的C接口接入没数据
	为啥，找原因


液冷
	可以跨机房
	


	
---------------------------------------2025_11_05前必须完成---------------------------------------------
1、配置好液冷配置
2、集团C接口需要自己接入下先（放置后续需要）     --- 同步不到数据?   --试了好几次（好像是因为名字对不上？ -- 就是中间库和动环 mapping_name的名字对不上）
	记得登记下
3、广西综资需要排查(目前是因为es里面只有广东的)
4、广西动环测试验收的，需要校验下



补充说明
	综资的背景--只开放给卓望内部人员查看（超管权限），因此优先级不高



503问题时
	直接看流水线里面，看是谁更了包
	再到新开发环境里面，看对应包的日志
	


	fact_dwd_signal_value
	  │— 时段 + 码值过滤
	  ▼
	tmp_dws_liquid_cooling_mete_1
	  │— join dim_liquid_cooling_mete_hour（拿到整点）
	  │— row_number 取最近整点
	  ▼
	tmp_dws_liquid_cooling_mete_2
	  │— join dwd_device_detail_v（补维度）
	  │— 过滤 site_type in (1,2) 且未删除
	  ▼
	dws_liquid_cooling_mete_detail_day   （日粒度 + 3 时段 + 最近整点快照）
	


综资遗漏问题
	映射关系中，批次号不同也会导致缺失（或是precinct_id缺失也会）



接口端口修改
	1、需要对准服务
	2、需要替换为对应服务的应用访问路径	


服务问题
	老是调用服务，然后挂掉（在cicd中重新部署，然后吧memory request和memory limit都扩大，即加大内存）
	


插件：
	elasticvue（用于es，可以快捷编辑修改）
	
	

---------------------------------------2025_11_17前必须完成---------------------------------------------
1、综资 - 稽核																													-- 完成
	综资名匹配情况

2、广西 - 动环测试申请																												-- 完成



---------------------------------------2025_11_19前必须完成---------------------------------------------
1、广西 - 动环测试申请																												-- 完成
	造历史数据，验证获取数据

2、上海报告																														-- 完成
	4号楼与九号楼

3、集团综资
	多分
4、接口自动化																														-- 完成
	补充

5、k8s																															-- 完成
	服务重启（rancher中重启）



---------------------------------------2025_11_21前必须完成---------------------------------------------
1、
	遥测 --  fsu
	告警 -- alert  通过遥测触发告警
	创建的fsu
		-在页面的动力设备就可以看到（编辑就可以看到对应的fsu信息）

2、
	测试时：分支确认
		最终 后端- develop
			前端 - dev

3、
	绿智楼宇
	

4、
	案例修改 -- 未完成{完成后导入}
	整理项目
	自动化
	集团综资未排查出来的



5、 上海问题																																		   -- 完成
	1、无线延申
	2、温湿度，数值叠加问题（取值点位）
	3、温湿度，展示没有展示全


6、集团																																				-- 完成	
	机柜管理mpp（mpp相当于fsu -- 落入fact）
		机柜管理
		机柜报表分析
			报表：
				curl "http://10.12.8.147:30917/v1/energy/scheduleCabinetReport?dayDate=2025-11-24&roomId=01-08-08-03-07-02-01"
				curl "http://10.12.8.147:30917/v1/energy/scheduleCabinetColumnReport?dayDate=2025-11-24&roomId=01-08-08-03-07-02-01"

				curl "http://10.12.8.147:30917/v1/energy/scheduleCabinetReport?dayDate=2025-11-24&roomId=01-08-08-01-11-01-01"
				curl "http://10.12.8.147:30917/v1/energy/scheduleCabinetColumnReport?dayDate=2025-11-24&roomId=01-08-08-01-11-01-01"
		机柜视图配置
			排序：
				energy_cabinet_column_view
		机柜可视化
			可视化：
				curl --location 'http://10.12.8.147:30917/v1/cabinet/view/testTask' \ --header 'Head_orgaccount: alauda' \ --header 'Head_username: alauda' \ --header 'Content-Type: application/json' \ --data '{ }'
			测点：
				017302、017301
			机柜能耗（能耗管理-机柜报表分析-机柜报表-机柜总电量（kWh））：
				curl "http://10.12.8.147:30917/v1/energy/scheduleCabinetReport?dayDate=2025-11-24&roomId=01-08-08-03-07-02-01"
			表：
				energy_cabinet_daily_report
			

			计算实时PUE：取用机房能耗用电关系的总个IT的，找到8类设备替换成功对应功率测点系数复用，计算实时PUE（每小时计算一次，取最近2小时的fsu，存储在redis->energy:roomPue01-32-07-01-08-01）
				第二、三位（设备类型编码） 设备类型 信号标准名 信号编码ID 单位
				01 高压配电 总有功功率P 001325 kW
				02 低压交流配电 总有功功率P 002345 kW
				04 低压直流配电 直流功率 004304 kW
				08 UPS设备 输出总有功功率P 008342 kW
				09 UPS配电 输入xx总有功功率P 009331 kW
				88 高压直流电源配电 主路总功率 088306 kW
				92 智能电表 总有功功率 092330 kW
				96 交流母线配电 始端XX总有功功率 096314 kW
				
				curl -X POST "http://10.12.8.147:30917/v1/energy/calRoomPue" -H "Content-Type: application/json" -H "Accept: application/json" -H "head_orgAccount: alauda" -H "head_userName: alauda" -d '{"precinctId":"01-08-08-03-07-02-01","namespace":"alauda"}'
				
				没有查询到，缓存数据会计算
				Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5018b7ec]
				2024-04-15 14:38:48.736 INFO 7 —- [ool-14-thread-5] c.a.g.e.s.s.ComplexEnergyConfigSchedule : 机房01-32-13-10-31-01生成计算公式：总用电- (1212001006000000006587088306_01)+(1212001006000000006584092330_01)+(1212001006000000006563008342_01)+(1212001006000000006567008342_01)，it用电- (1212001006000000006563008342_00.8)+(1212001006000000006567008342_00.8)+(1212001006000000006584092330_0*0.8)
				2024-04-15 14:38:48.743 INFO 7 —- [ool-14-thread-5] c.a.g.e.s.s.ComplexEnergyConfigSchedule : 机房01-32-13-10-31-01计算实时pue成功
				2024-04-15 14:38:51.045 INFO 7 —- [nio-9988-exec-3] c.a.g.e.s.s.ComplexEnergyConfigSchedule : 查询机房01-32-13-10-31-01从redis的缓存值成功


				昨日、上月平均PUE取自能耗机房的总用电量(机房能耗报表)

			机柜负载比等数据
				curl --location 'http://10.12.8.147:30917/v1/cabinet/view/testTask' \ --header 'Head_orgaccount: alauda' \ --header 'Head_username: alauda' \ --header 'Content-Type: application/json' \ --data '{ }'


			pue:
				curl -X POST "http://10.12.8.147:30917/v1/energy/calRoomPue" -H "Content-Type: application/json" -H "Accept: application/json" -H "head_orgAccount: alauda" -H "head_userName: alauda"   -d '{"precinctId":"01-08-08-03-07-02-01","namespace":"alauda"}'








			composite-service、mpp-service、cabinet-service
				（  机柜列和机柜都在路由1和路由2的电能和功率配置测点数据  ）
				（  机房内已接入FSU）





7、云南																																	-- 完成
	ups
		00531006000005759877
		01-32-01-02-01-03，四楼电力室1#艾默生(EMERSON UPS)(NXR)

		SELECT * FROM t_cfg_device WHERE device_name = '四楼电力室1#艾默生(EMERSON UPS)(NXR)';
		SELECT * FROM t_cfg_precinct WHERE precinct_name = 'KJ-DL-ZHT0003_昭阳区全球通大楼四楼动力机房(test)';
		SELECT * FROM t_cfg_precinct WHERE precinct_id = '01-32-01-02-01';
		SELECT * FROM t_cfg_metemodel_detail WHERE model_id = '00001008000000010762';



# 国产数据库
	达梦


---------------------------------------2025_11_28前必须完成---------------------------------------------
1、cicd
	开发环境，流水线需要改成web，server，否则无访问地址	


2、综资补充说明
	造数说明







---------------------------------------2025_12_01前必须完成---------------------------------------------
1、重点（广西 - 市电配置）：																															-- 完成
	目前没有同步过来
2、云南
	ups计算有问题
3、广西																																			-- 完成
	综资 -- 表数据修改
4、绿智楼宇
	用例写
5、网络设备拓扑
	映射关系


6、全量
	比如GEMC_ALL，这种就是全量，里面也是有分支的




7、B接口接入不进（上海需求中，也有记录对应的内容，到时候结合起来）																								--- 完成，查B接口部署的（cicd和服务器模式的）
	不知道怎么回事

	服务写的是server-server（即模拟器里面写的）

	
	fus表中new_version必须为0，否则就需要配置app等相关信息（重点）


	[重点]
	上游：
		fsu注册到binter-server-server
	下游：
		原始 currents --> binter-client --> fsu --> datahandle --binter-clinet -- redis
		现在 currents --> distribute --> binter-client --> fsu --> datahandle --binter-clinet


	fsu注册显示到  service里面的（重点）
		好像接入哪个都无所谓，只要到fsu里面把proxy url的去掉就可以（要先确保redis里面的binterface:fsu_ipinfo -- 对应设备里面的配置正确，不然要删除修改后重新注册）
			清除后，再次请求，redis里面必须是inline为true，才说明fsu是接入成功的，否则就是断开了，可以看fsu表的fsu_state状态（0为关闭，1为开启）
			
			反正连不上就可以根据接入的设备id，到redis里面，把注册的ip先删除了，在重新注册看看就行了


		看fsu表中，对应的fsu_state确保fsu是否断开了

		新版本接入fus中的（new_version）要为0？
		
		包要对应  server什么star？
			client（下发请求和接口fsu响应？？   -- webservice   -- kafka 可以看到）
			server-server
			data
			distribute
			datacollect

		

		clinet(存在null值)
			下发到fsu



			
			
		顺便总结（错误信息）
		
		写入fsu准备数据时，测点写入很慢的，可以看中间库的数据就直到，所有有时候脚本卡住不动，其实是在写测点


		topic : 相当于消息队列，现进先出
		
		
		数据写入，device_id不能重复，注意改了device之后，signal的device也得跟着改

		t_cfg_monitordevice表	(检测接入FSU设备，下面挂在的设备有哪些，有多少个)




	rancher里面，可以直接减掉pod，实例，也就是服务（涉及到kafka的必须在这里停掉）










# 集团导出
	原因：可能导出后，缓存清除不够及时

	下载需要切换dev分支（这个才是该国的） composite和report都要

	处理了大文件导出：涉及 report和composite 
		分支feature-geminglin3；验证范围：报表-统计查询-所有报表
			原始的市devlop分支



缺失(补充协议缺--失)																							-- 【完成 -- 对应项目：平台接入周报-补充协议缺失】
	每种都缺失（名称缺失，啥的每种规则不一样）
	就看3种
	数据都来源于容量

	容量-
		补充协议-缺失
		还有sql


	能耗周报，跟容量-负载率汇总对比
		这里有缺补充协议


	看贵州
		贵阳
			ups 缺失16
				额案

		看文件的待完善数据
			要先看下面3列（刚刚的sql去查）
			先看额定容量（点单元格可以看到）
				然年后进到补充协议，看到

			主要几种
				看站点负载率，对比


		设备子类
			要在指定范围的才算，没在指定范围的就要加一



渗透的提测流程
	1、简单测试垂直越权，导出，上次，下载，手机隐士信息加密等情况（用提测里面的账号）
	2、用文档里面的信息进行填报
		在明细里面最顶加上
			声明：其它接口请结合动环公共接口不做越权在线文档地址：https://docs.qq.com/sheet/DR290YmFCTUVUVEF0?u=85a7a3fb3e904e4a950fa49e66621156&tab=ej4hbt
			还要注意：只复制测试里面的接口内容
			然后复制简略信息
		
		提交时备注： 
			与GXEMS1.0.11.0测试范围一致，请出报告
	3、渗透通过后15天内，要发版，所有测试用例都要补齐

	特别情况：可能存在驳回，需要找开发；如果驳回后开发说修复不了，需要申请








特别注意：
	每次开发提交的分支 -- >  打包后就有一个包，要确定测得包的版本要一致
	gemc（有全量包，全量包就是后缀有all）
	



性能接口测试工具
	Burp Suite（简称BP）
	
	测试时，最好把权限的都做了
	

linux（服务器，进入超管权限）
	超级管理员：  sudo -i
	
	

性能测试注意点：
	一定不能丢包
	
	
B接口性能采集（待补充内容）：
	1、	部署多个fsu（怎么快速复制修改 -- kimi里面有，还没尝试）
	2、	快速匹配请求（还没完成）
	3、	快速发起注册（使用性能测试那个脚本）
	4、	快速注册机房（之前性能）
	5、	快速创建多个fsu（有什么脚本好创建）整理以下





---------------------------------------2025_12_08前必须完成---------------------------------------------






待补充
	集团综资
	上海性能
	项目接口：
		对照
	自动化
		修改
		账号密码等要求
	广西
		接口渗透报告 -- 重新提交
	广西
		bpm
	广西
		xxx


bp插件使用：																								【未登记】
	https://cn-sec.com/archives/3413327.html
	使用方法
		1、内部先开个地权限的
		2、进入auto pro - config - 获取cookies
		3、单独再外面开个浏览器，登录高权限的
		4、高权限进行操作
		5、直接看请求就有三个同时发出了
			原始：高权限
			unauthor-未授权
			最上面：地权限



权限																										【已登记-渗透测试】
	auto表（里面需要加上限制）
	现在是A用户登录有，然后有下载，这样就绑定了（就相当于有权限）  -- auth filter表会有一条记录
		然后用户B也有功能权限，但是没导出，这样，拿着用户A的地址（也就是相当于该cookies）然后去下载是下载不出来的

		SELECT * FROM t_cfg_auth_uri_config;
		SELECT * FROM t_cfg_filter_file_auth;

			现在存在一个问题（一个模板只能绑定一个人，其他人就下载不了了）


sftp服务器操作																							【登记在note-技术-linux，现网升级-广西里面】
	首先需要连接通：
		即sftp服务开通端口给要连接的那个
		使用完整格式
		:"GX_Aigcc@2O@5_7","sftpIp":"10.243.184.151","sftpPort":10022,"s
		
			sftp -oPort=10022 GX_Aigcc@2O@5_7@10.243.184.151
			连接时会提示输入密码：52131sda
		连接成功后，在SFTP提示符sftp>下执行：
			# 假设今天是2023年12月11日，则路径为 /GX/20231210 （timeOffset=-1表示前一天）
				cd /GX/20231210
			# 2. 列出文件（检查文件是否存在）
				ls -lh
			# 3. 查找特定前缀的文件
				ls -lh MeterPowerDaily_GX_*
		
		下载并查看文件内容
			# 方法1：直接下载到本地/GX目录
				sftp> lcd /GX/              # 设置本地目录
				sftp> get MeterPowerDaily_GX_20231210.csv
			# 方法2：下载后查看（退出sftp后）
				exit
				cat /GX/MeterPowerDaily_GX_20231210.csv
			# 方法3：流式查看（不下载）
			sftp> get - | head -n 20    # 查看前20行
		
			# 压缩包情况（不下载）
				# 查看压缩文件内部内容（不落地解压）
				zcat /GX/MeterPowerDaily_GX_20231210.csv.gz | awk -F'|' '{print $1,$2}'  # 按|分隔符查看字段
				# 统计行数（不解压）
				zcat /GX/MeterPowerDaily_GX_20231210.csv.gz | wc -l
				# 查找特定内容
				zcat /GX/MeterPowerDaily_GX_20231210.csv.gz | grep "002330"
			
			# 压缩包（下载）
				# 1. 下载文件（本地目录/GX/）
				sftp> lcd /GX/
				sftp> get MeterPowerDaily_GX_20231210.csv.gz

				# 2. 退出sftp后解包查看
				sftp> exit

				# 3. 解压并查看（多种方式）
				gunzip -c /GX/MeterPowerDaily_GX_20231210.csv.gz | head -n 20  # 解压到屏幕
				# 或
				zcat /GX/MeterPowerDaily_GX_20231210.csv.gz | head -n 20       # 直接查看
				# 或
				gzip -dc /GX/MeterPowerDaily_GX_20231210.csv.gz > /GX/MeterPowerDaily_GX_20231210.csv  # 解压到文件
			# 方式3：
				直接在 SFTP 中下载并查看
				# 在 SFTP 会话里
					sftp> get Building_GX_202511.csv.gz /tmp/
					sftp> exit

					# 然后查看
					zcat /tmp/Building_GX_202511.csv.gz | head
		
		# 3. 检查下载的文件
			head -n 5 /GX/MeterPowerDaily_GX_20231210.csv  # 查看前5行
			wc -l /GX/MeterPowerDaily_GX_20231210.csv      # 统计总行数
			
			
用电的
		分项才是走green energy（集团是，广西不是）
		
		

集团（其他平台也类似）：
	容量这块
		ups、高压直流、市电直供、开关电源系统、发电机系统、未配
			配置-设备系统：下转到站点/楼栋级别进行新增系统（这样-配置-批量维护才会显示系统）
		接着
			在配置-批量维护，对设备进行系统绑定














---------------------------------------2025_12_12前必须完成---------------------------------------------
1、自动化问下怎么搞
2、测试用例需要导入进去（集团拓扑、绿智等）
3、B接口性能测试用例完善，数据准备（多级太fsu），优化下fsu性能
4、新需求怎么搞
5、拓扑、综资这块思虑捋清楚（同时要完善批量的脚本）



补充内容：
	1、容量逻辑完善
	2、验收测试、割接、ip																		(完成)
	3、其他所有项目整理对应逻辑





补充：
	缺失的设备可能是系统外或系统内的（-- 容量负载可以直接跳转）
		ups要对的上（目前有几条是可以看到，先找几条记录）  -- 加起来等于3的就说明不在系统内的（未配置的）
		明细里面，加起来不为3的倍数，就说明已经加入了系统了（存在加入系统的）
			在未配置里面，就是没有绑定系统的，就是没有设备名称的（是正常的）


c接口的、B接口的识别



打包
	目前内蒙的打了，会影响到
	需要重新打下gemc_all包才行
		green包的影响 - develop分支

	广西【重点】：
		现在关系都需要先打gemc - kernel的包
			然后再到gxemc里面打对应的包

		gxems_all包（这个全量包需要打） -- 广西的全量包
			external在116服务上部署





整理：
	什么情况下需要设置为冒烟用例（比如有导出功能，那么冒烟就是导出这个功能必须要能导出文件，数据对不对是另一回事）
	维度思考：
		比如时间空间 - 考虑分，时，天，跨天，跨月，跨年的统计情况



容量																					【完成 - 以及写入到note，但是还需要修改下】
	应该改为计算变压器，而不是变压器绑定的设备全都要算





广西bpm非bpm校验
	主要进入个人后，个人哪里就会返回接口
		bpm/getTodoList?
			isBpm: "0"  -- 不走bpm，走页面
			pageType: "detail"  -- 看走详情还是列表
			procDefKey: "gjrwys"  -- 看走哪个页面
			requestParam  就是参数来着
		目前只有5个页面需要走页面，其余都是bpm的

	还需要询问
		广西最新的bpm时间




广西4a																				【完成--4a项目，后续补充道note中】
	验证需要添加的东西
		externel 打包全过程															
		名：czwtest002
		邮箱：1224744444@2239.com
		电话：15920369296
			该电话
		密码：wcc13PbCIS8@r*6p



集团																					已登记【完成01_项目结构及测试流程【重点】\09_业务逻辑汇总\集团\01综资\汇聚】
	汇聚
		站点和批次号，必须要是es中有数据的才行（即有对应索引的）

	还有问题：
		1、直辖市跳转，没有带site接口
		
	
	
综资	
	动环属性表
		动环监控名称？怎么来的
	id法
		其实就是映射表，直接对应属性表的zh_label
		批次要一直




B接口性能采集（及B接口问题）																							登记了【还需要补充其他逻辑】
	
	B接口问题：
		目前容灾部署没有影响到
			都是在gemc里面部署
				cicd中，如果gemc里面没有，就会先去ssc那些里面重新部署，部署完之后就有了
				目前基础服务都是在cicd上部署

				B，C接口是通过服务器单独部署的
	
	性能采集影响的B接口问题：
		kafka问题
		部署了新的kafka，然后currentmonitor没有重启，指向了旧的kafka导致的
		spider_binterface_getPointDataRequest \ 
		spider_binterface_handlePointDataResponse
	
	fsu与B接口
		1、考虑研究B接口和FSU通信报文怎么看（遇到其他的soap怎么看）
	
	B性能采集
		留一个fsu用于批量
		然后另一个fus未被压测的，看他的反应效果

	设备插入：
		# province_index : 对应省份的缩写 -> 0101 -> 就是101 即广东

	b接口服务和config一定要在同个ip里面
		如果不同，就通不了
		其他的基础服务参考gd-x前面7个，注册到我的命名空间即可

		流水线：
			需要先触发，部署时候才能看到、
			
	kafka切换
		目前已经更换到121：9085（nacos上看）

	kafka消费顺序：
		spider_binterface_getPointDataRequest
		spider_binterface_getPointDataRequest_distribution   
		spider_binterface_handlePointDataResponse  -- 处理响应（回到redis） - 下次下发如果redis有，就直接在redis里面取，没有的话才需要下发
		
	待整改（重点）：
		目前194目前太满了，所以导致请求接不到？？
		还是啥情况？，反正很慢


	注册上报
		是要走B接口的，如果B接口断了那就没反应了（会一直卡着）
	
	docker换包
		



项目接口及打包问题：
	注意：
		走页面spider/webxxx啥的，这些都是属于走的config，config的ng再到对应服务里面
	打包或是部署失败的
		统一在流水线，编辑，服务哪里改成新开发环境
	部署时流水线选择：
		需要先触发，部署时候才能看到




C接口问题																							已登记【业务-c接口，还需要补充其他逻辑】
	集团C接口如果没有数据，
		1、先看下模拟器是否挂了（可以把nohup删除）
		2、看C接口服务是否挂了（kafka或es或redsi挂了，在cicd上）
		3、看config服务是否挂了（看10.1.4.113上的）
	如果缺少设备（直接导入中间库？，怎么导入？、）

	res_code
		里面包含lsc     设备id啥的（中间库里面的）
		c接口模拟器
			这里有记录对应的中间库对应设备id

	已接入站点，补充测点问题
		直接插入中间库测点表
		页面进行稽核即可





综资汇聚和视图说明																					已登记【01_项目结构及测试流程【重点】\09_业务逻辑汇总\集团\01综资\04_综资视图】
	汇聚还是走es
	综资视图 - 则是有定时任务每周入库一次，然后有一个表，现在查综资直接从表里面拿


	从属性表（zh_label） --> 到站点表(int_id)
		属性表只用zh_label  --> 最终决定省份的是站点表了（有问题）
		



jmeter性能																						已登记【note-技术-jmeter里面 - 后续还需要补充】
	过滤jmeter日志接口返回超过xxxs的			
		awk -F',' '$2 > 100000 {print $0}' result.jtl
		
		
		


上海性能采集
	GEMC_ALL --> 需要先确认好再develop分支
	再去打currentmonitor




新需求：
	2.2.1 设备维修管理+2.2.2 设备维修统计
	https://ai.feishu.cn/docx/Wuwpdq1EMorwZZxnFMKcgNPTn6b
	https://v0.app/chat/dcim-plPVOkThgHj?b=v0-preview-b_Njrm9LyUcla&f=1&path=%2F







数据库连接问题：
	-- 查看当前值
	SHOW VARIABLES LIKE 'max_connections';   -- 常见 100/200
	-- 临时提高到 500（重启失效）
	SET GLOBAL max_connections = 1124;




nacos
	建立新命名空间 -- 可以隔离服务
	

广西问题
	涉及到的内容整理下





集团综资->mpp
	table_name
	也是在里面
		数据是分区

	原始数据：
		113 ->
		trun
			89,119 -> 

	（每一个批次都要对）
	数据量对不对
	数据字段对不对
		数据字段（均增加下面两个字段）
			flowtime
			starttime





每次打包之前
	需要检测V版本 -- 确保v版本的分支是后面服务要打的分支
	打完之后，再去打所需服务的分支
	即每次打包前：
		先到gemc_all --> 切换对应分支




服务器、容器说明
	cicd上 - > node id 就是服务器（也就是一台虚拟机）
			   pod id 就是容器（实例）也就是服务器里面挂载的容器 每个容器每次都会变ip
	每次重新打包：
		服务可能会随机到某台服务器上面，然后生成实例（有些时候就是重新打包后，流转到其他服务器里面，因为某些功能限制，只开通某些服务，导致服务最后出问题也有）
		

其他补充内容：
	B接口：
		案例
		部署
		服务配置
		其他？

	内蒙古：
		需求

	集团：
		综资入库mpp
		综资修正es索引结构（供电拓扑花时间改下 -- 同步脚本改下）

	其他？


	gemc：
		发版：其他内容
		目前还有问题（后端包）
		
		
原型图工具：
	https://v0.app/chat/dcim-plPVOkThgHj?b=v0-preview-b_Njrm9LyUcla&f=1&path=%2F


发版补充：																			--整理完成
	gemc可以用，某个关联版本的奇信的报告，其他的看文件整理




想要看系统有那些设备
	页面快速定位：
		批量维护里面
			里面就记录了系统所有的系统、设备等信息
			
			
			
测试：
	广东：门禁
	集团：mpp入库、同步数据
	内蒙古：
	上海：B接口
	
	
ftp服务内访问：	
	涉及ftp：
		10.1.4.113
		/tmp/zzdata 目录下
		vsftpd	wccQKPbCmx8@r*6p
		
		进入方式：
			ftp  ip
				输入密码
				用户名


要看nacos注册进来的ip



4a
	涉及webbas


综资入库mpp
	不同批次入库不会被清空
	不开重复 - 导入会过滤，时间更替






现网测试：
	有配置需要跟开发确认下
	curl是否要触发，跟开发确认下
	包跟开发确认下
	最后确认完，整理发给运维



综资映射匹配
	涉及到综资动环稽核
	
	
gemc的发版																	--整理完成（图片后面更换）
	记得也整理起来
	
	
渗透整理																		--整理完成
	增、全
	
	

集团综资-需求优化
	目前动环综资稽核逻辑：
		楼栋：根据id或名称匹配
		机房：根据id或名称匹配
		设备：根据已匹配站点下的设备power_device_id做匹配
	优化点：
		1、机房存在映射并匹配时，需反推机房对应楼栋/站点也匹配
		2、设备匹配，需反推对应楼栋-机房也匹配
	3、存在设备对应多机房？多楼栋的脏数据
	
	逻辑：
		1、如果我造了机房匹配，但是没有对应楼栋的
		2、如果我造了机房匹配，楼栋匹配，但是不是楼栋类型和核心机楼的
		3、如果我造了设备、但是设备不属于某个匹配的机房的
		
		如果一级一级匹配下去还会有这个问题吗



问题：
	站点匹配?
		名称法直接匹配空间表？  那么动环属性表有啥用？



绿智楼宇
	1、其他楼宇，推送上个月之前的（所以有时候推送没数据，记得看下页面或数据库里面，对应的数据有没有存在上个月的）



补充
	tcp和udp - 力维都是用同一个规则的
	协议解析
		连接中组内地址随意填写 - 对应页面组内地址
		地址则是com口 - 页面需要保持与文档中一致
		
		



广东门禁
	目前需要把E:\SOFTWARE_TEST_ENGINEER\6、练习题\卓望-联合永道\04_项目\055、【广东】——【门禁管理】——【未测】\07_测试总结中的提取整理
	
	协议抓包
		
			tcpdump -i any -n -w <fileName>.pcap "host <ip> and udp"
			例：
			tcpdump -i any -n -w lw.pcap “host 129.240.160.4 and udp”
			抓取大约5min后通过ctrl+c中断抓取，可以直接通过tcpdump -r <fileName>.pcap直接预览抓取的包的概览
			正常情况下sc与智能门锁的通信应当是1个请求对应1个响应，额外有fsu透传的udp心跳包
			需要用wireshark工具解析：len=38的是fsu-udp心跳包而已，其他的都有应答
			
			tcpdump -i any -n -w test.pcap "host 10.12.5.142 and udp"
			tcpdump -i any -n -w test.pcap "host 10.12.5.142 and udp"
	
	模拟器是服务端还是客户端
		什么两条模拟是一样的 58（客户端发给服务的）


	服务器内互相scp（前置端口白名单已经放开）
		scp -B test.pcap sudoroot@10.1.203.120:/home/sudoroot/				wccQKPbCmx8@r*6p
		scp -O test.pcap sudoroot@10.1.203.120:/home/sudoroot/
		需要输入密码
			或scp bangxun_old_2 sudoroot@10.12.5.142:/home/sudoroot/  这个是传文件时反向传的    文件的拷贝
			scp -r bangxun_old_2 sudoroot@10.12.5.142:/home/sudoroot/   源路径就是目录（或软链接指向目录）  目录拷贝

			tar zcf bangxun_old_2.tar.gz bangxun_old_2								压缩后打包
			scp bangxun_old_2.tar.gz sudoroot@10.12.5.142:/home/sudoroot/

		md5sum test.pcap    确保一致

	总结：
		1、怎么看包、抓包、看协议、协议怎么拆分（协议分fsu包和数据包（即设备包））
		2、怎么构建请求
		3、业务流转逻辑、情况（怎么去判断是否存在设备-引发告警等情况）
		力维现在的请求构造逻辑是否存在问题
			即告警触发出现问题

	再门禁概览
		事件操作里面是有请求和响应报文的

	改了游标
		时间才上来的（刷卡时间是在es，索引会不会递增 好像是因为不递增导致上不来）

	使用那台电脑
		停掉iot-center 的java（不要管错）
		然后打开acuc
			然后连接目前设备的fsu  ip和端口，然后进行调试

			shark抓包 -- 进行包装

		目前问题:
			多张卡授权(需要创建这个脚本插入对应卡号脚本)
			多张卡怎么进行授权(快速授权 -- 脚本构建)  --控制哪个参数
			怎么快速撤权

			一个人可以有多个卡(100张) -- 这样就可以100个请求
			多个人,多张卡 -- 同个设备

			多个人(多卡)  -- 多个设备


			撤权
				同时测两个不同站点下设备（根据设备来算独立任务）
				3个卡，3个设备（相当于3个独立任务）
				1个卡，1个设备（就只是1个任务） 
				单个人多卡， 1个设备（相当于1个任务，因此最多成功4个 ，其余重试已经过了，直接失败）

			每次写入不行
				太拉了

		目前acuc的用户相关的用不了
			坏了，需要让厂家修复下

		复验：
			刷卡成功、失败 -- 要取得得到卡号，时间要对应上
			（多卡的问题目前还没在等修复）
			（用户权限问题）
			（操作分析 - 搜索问题 - 未匹配到）
			（撤销用户 - 用户搜索匹配问题、卡号只能精准）
			单卡授权、撤权 - 要能刷门禁
				（批量几个 - 授权、撤权是否可以刷卡，时间是否正确）

		bug
			多选查询失败


		补充：
			指令（高位 和 地位）低位高放？   --> 还是高位低就来着（反正1081，指令就变成8110）
			每台设备就是对应 一个ip和一个端口 （com口无所谓）
			异常场景
				通过端口ip、com不同，还是属于同一台设备的

		com
			65535


		抓包指令：
			cd /home/huangjiajie/
			tcpdump -i any -n -w doorlock_$(date +%Y%m%d_%H%M%S).pcap "host 129.242.162.35 and udp"
			ls -lh doorlock_*.pcap
			mv doorlock_20260120_173647.pcap doorlock_20260120_173647_ES_1000.pcap
			cp /home/huangjiajie/doorlock_20260120_173647_ES_1000.pcap /home/dwguozhen16/
			cd /home/dwguozhen16/
			chown dwguozhen16 doorlock_20260120_173647_ES_1000.pcap
			cd /home/huangjiajie/



			cp /home/huangjiajie/doorlock_20260120_173647_ES_1000.pcap /home/dwguozhen16/
			cp /home/huangjiajie/doorlock_20260120_173647_ES_1000.pcap /home/dwguozhen16/

			chown dwguozhen16 doorlock_20260120_173647_ES_1000.pcap
			chown dwguozhen16 doorlock_20260120_173647_ES_1000.pcap


			doorlock_20260114_165216.pcap   大华sdk
											udp邦讯 以及弄了
			doorlock_20260114_170635.pcap   高兴欣300
			doorlock_20260114_171330.pcap   海能


		https://10.1.6.57:8443/svn/MIGUMS_PROJECT/trunk/spider-doc/public/08_系统测试/05_测试工具/fsu_secure_door



		看到lh --> 要加上little（默认是大）
			2个和4个的又有不一样（至少两个才会做字节序）


		配置注意：
			sys_config:要配置对应的设备类型（设备fsuid）
			解析改device_config
			具体响应改0101
			其余注意事项

		一个厂家协议一个配置
			一个协议下可以配置多个fsuid配置
			如果未找到对应fsuid配置，返回
				default


		服务器启动模拟器
			需要检测sys_config -> 需要改端口，确保每个fsu的端口都不一致，否则会导致启动失败



		规避问题：
			sc-center（需要保证local和remote的kafka要一致，确保一致）   --- 目前是121的kafka  -> 看raw_data哪个topic
			group-id也不能相同（在同个集成里面）
			然后重启即可center


		门禁
			SELECT * FROM access_control_device
			fsu也是要的，但是device_code一样也没关系
			SELECT * FROM t_cfg_device where device_id LIKE "%008000000%";


		关注流程
			entran --> decode --> center --> 模拟器
			模拟器 --> center  --> kafka(raw_data) --> decode --> entran 


为解决问题
	上海导出 - 告警未添加、id字段未删除
	广东门禁
	广西渗透

	多人多卡
	单人多卡
		（多设备）

	测试人员
		一切以门禁概览中操作为主（有多少个就是有多少条记录）

	是不是还要有个前提
		就是已经授权的卡，然后再加进来了才导致？








排查问题
	如果是csv类似这种问题，如果直接用csv转有问题，那么就需要看原始文件，一个一个对（即note++打开一个一个对比）


上海
	pdu
		未绑定配置的不能为0，不能加入配置（）



广东
	现网，汪文风

	地市
		设备类型


		
		SDK-大华  5 个
			筛了3个，1个可连接其余功能均失败，剩余2个均失败

	汕头市
		UDP-邦讯  2个

	深圳市
		UDP-邦讯 1个

		亚奥撤销失败
		还能 - 撤销之后，卡未消失，可以重复撤销，导致失败（后面再撤权都失败）
	

	盈佳
		写response的cid2中





补充
	用户表（bpm和动环）：
		uc_user   --> account
		wb_user

	测试验收报告（目前要先提交后才能下载）

	 select
    id,
    site_name as siteName,
    device_type as deviceType,
    device_name as deviceName,
    mete_name as meteName,
    mete_code as meteCode,
    mete_kind as meteKind,
    unit,
    need_test as needTest,
    judge_type as judgeType,
    limit_value as limitValue,
    monitor_sys_coll_read as monitorSysCollRead,
    actual_scene_read as actualSceneRead,
    test_result as testResult,
    test_result_desc as testResultDesc,
      up_mete_id as upMeteId,
      device_subclass as deviceSubclass,
    remark
    from t_alert_network_accept_data
    where 1=1
      and work_code = 'CS20260115001'
      and device_id = '00771006000003177947'

    配置的内容
    	模板里面，要存在对应的测点，设备类型要对应上


    问题：
    	在上传模板的时候，没有，存在过滤设备没有测点的，就应该不能导入（问题1） -- 是否改下逻辑，不能往下走
    	问题2：在最初选择的设备为空时，后面验收测试资料时，不能保存或暂存

	缺少：要加上超时的，还没测
		然后测试环节验证下，确认环节驳回后，预割接是否还是有两工单
		驳回至验收测试填报,还是有两个工单
    

	wb_user
	wb_department

	缺少：要加上超时的，还没测
		然后测试环节验证下，确认环节驳回后，预割接是否还是有两工单
		驳回至验收测试填报,还是有两个工单
		
		创建用户时 - 用户选择的部门要选最大的，不然就是对应部门下的，否则回导致选择用户时看不到用户

		1、模板导入时 - 设备类型对应测点要对
		2、再申请环节，如果设备没有对应测点，应该不允许加载（未更正）

	
	
	验证下绿智楼宇导入，查看的权限
	渗透的需要过一遍

技巧：
	文件转md5
		然后再未ai







	只能用刷卡后都上来的卡号，具体怎么转的不知道（）
	远程开门也有事件
	同个用户，进行授卡，用户编码识别有问题

	主要验证点
		刷卡，有事件
		能授权测全
		远程能出事件
		主流程：
		其他问题等等



门禁管理:
	半包，粘包
	延迟返回，不定时返回
	事件上报
	模拟器关闭 - 业务服务不断冲击
	非法卡读取（6s即需恢复）
	事件轮询（15s内）
	1000设备 - 部分延迟（压kafka或redis）
	模拟器读取卡号，用户号（判断非法的情况和用户不存在情况）
	事件，游标，游标不记录，事件读取


性能经验：
	看现网有多少数据，对应多少服务器，平均下来就是每台能多少（需要确认现网的）
	还要看数据频率等情况，峰值
	先单个慢慢拉进去
	看拐点

	根据功能，看功能是否频率来，来决定的性能是否满足

	需要判断是否判断是否需要数据库（来优化性能）
		fsu是不用数据库的，都是fsu的

	发包：
		网络吞吐、还是服务处理能力

	高并发：
		包应该很小，不然干不了

	性能：
		测得时候不能动真实数据，数据是多少就要发多少

		性能指标不看爬坡，只看平的那段

		如果普通线程压，那么设置永远，会等比升，然后到平的那段就是了

		因此tamp_up要设置


	用户100w以上
		tps才用6000


	上升的梯度，要为最终水平持续跑的10分之一


	不知道现网峰值，秒峰值
		就看系统的响应时间  -- （注册，上报等 - 请求的平均，如果拿不到最大，最小，中间，就那个请求的时间）
		把性能压到响应时间一致（需要跟等式成立）

		1000tps


	内存溢出
		怎么回事


	阶梯（一般不同）


	jmeter
		tamp_up一般不填，他也是会有流量控制，三次握手，也是会服务响应后才能建立（并非一次性启动）

		持续时间：至少5s中（有些系统内存泄露，内存空间给的大，5分钟给不了）


	性能测试最后，需要建立一个总表


	问题场景需要记录



	无规则的采用文件，有规则的最好用计数器等（内置函数的请假） - 全局计数器（但是不好解析）


	组件
		thread线程号的组件 -- 根据请求来判断 比如100个，那就是00-99
		iter迭代号组件

		可以更好的区分是哪个日志，哪个线程


	还要只要现网搞的什么日志级别

	把数据分析都准备
		比如拉的频率是什么样
		推的频率是什么样的
		（按真实情况来压的）
		比如现在接了4000个，现网5w个
			那我就按5k来压
			如果没这么多，那就等比例缩小
				参数都得压缩下去（怎么搞，要说的出去）


门禁（海康威视）
	成功注册进来就能看到照片
	https://192.168.100.102/doc/index.html#/peopleManage/addEditPeople?employeeNo=alauda&pageNumber=1&viewMode=card&type=edit


	延迟处理开始执行，卡授权失败，taskId：3569
	授权任务id:3567，重试次数1
	卡授权失败，taskId：3577，延迟10秒后处理，当前队列大小
	perateType=门禁卡撤权
	
	海康存在的问题：
		正常卡上的号码，刷卡后又变了进制，最后10进制也可以绑定（很乱）

	
	海康威视（也就是上面那个连接会显示 -- 目前好像没办法直接调）
		人脸识别 --> 新增人脸（不大于200k，center服务）   -- 8809
			center服务：28084端口

			curl --location --request POST 'http://localhost:16666/v1/hc-face-device/add-face' \
			--header 'Content-Type: application/json' \
			--data-raw '{
				"ip": "192.168.100.102",
				"port": 8000,
				"employeeNo": "zengxianji",
				"filePath": ""
			}'
		页面：
			https://192.168.100.102/doc/index.html#/portal/login

			1、力维智能  192.168.100.101
				网关    192.168.100.1
				用户名boluo
				密码Zxm10***


			2、力维人脸门禁
				192.168.100.102
				admin
				密码zxm10***

			3、维谛FSU
				192.168.100.100
				admin
				0202@smsP

				本机
				192.168.100.99
				curl --location --request POST 'http://localhost:16666/v1/hc-face-device/open-door' \<br/>--header 'Content-Type: application/json' \<br/>--data-raw '{<br/>    "ip":"192.168.100.102",<br/>    "port":8000<br/>}'


				curl --location --request POST 'http://localhost:16666/v1/hc-face-device/open-door' \<br/>--header 'Content-Type: application/json' \<br/>--data-raw '{<br/>    "ip":"192.168.100.102",<br/>    "port":8000<br/>}'




广东门禁
	读取事件：
		一般有一次B接口包住全部，然后恢复
		邦讯是一条一条回（每条都包在B接口里面）

		采集时会下发

	读取事件：
		先实现单条
		轮询目前是20~30s


	验证模拟器时。
		需要检测包的指令，配置对不对的上，不能关看页面是否成功，还要看完整的指令

	注意，如果entrance没有接口数据，那么就是decode没有启动，需要看下decode服务（确保全部服务都起着）
		注意：

		回的时候，topic走的是，decodemand
		需要确保topic是有收到的，这样才能确保正常

	回应（json配置）
		回应时间：
			$是使用函数
			# 是判断与请求是否一样的值（需要代码实现）

第三方库安装（python  pip）         --- 失败了
	tar -xzf Flask-2.3.3.tar.gz
	cd Flask-2.3.3
	cd /opt/src
	tar -xf setuptools-68.0.0.tar.gz
	cd setuptools-68.0.0
	python3 setup.py install --prefix=/usr/local



	powershell模式：
		python -m pip download -i https://pypi.tuna.tsinghua.edu.cn/simple --only-binary=:all: Flask==3.1.2
		python -m pip download platform manylinux2014_x86_64 python-version 3.8 implementation cp --only-binary=:all: -i https://pypi.tuna.tsinghua.edu.cn/simple Flask==3.1.2

		批量安装：python3 -m pip install --no-index --find-links=. --force-reinstall --no-deps *.whl




陕西/广东
	目前陕西要起两个center，然后decode起在琰伦本地

	然后接口
		center还是entrance来着（然偶检测入库情况：entrance_face_work_ord，entrance_face_success_device）

	回调 -- 120服务上（不然就是121）：
		/home/sudoroot/jyl/face**.python

	http://{serverRoot}/v1/external/ywgl/addFace

	https://10.206.158.133:8443/mtex/webservice/machine/roomDoor/faceOper

	external还没附上去（然后哪个服务在121）  --> 所有外部接口都是external服务，需要鉴权才能调我们服务（即有鉴权才能进来external）
	center只有一个，因为陕西是没有分流的


	entrance虽然要是外部，但是是不需要鉴权的
	
	
	http补充
		xxx调用我们接口（下发全部设备）  --  > 存入动环表（总数据）
		动环（拆分这些设备 -- 注意进行识别） --> 每条结果进行处理（成功入库，失败回调返回给客户那边）
		entrance_face_work_ord 
		entrance_face_success_device
		
		
	新需求逻辑（什么人脸识别的）
		其实就相当于我模拟外部设备（然后通过调用动环接口，需要鉴权 - 这块还未做）
			把数据给到动环，动环进行处理，再返回
			
			然后鉴权涉及的appkey，再陕西数据库中的t_cfg_appkey表里面，具体是哪个表，关键字查询下
		
		需求中第一个接口可以直接手戳去访问 - apifox（然后是否要写入到模拟器，说是不用）
			说是模拟外部来调用我们接口
		
		然后还有同步数据的
		
		注意：调用一个接口后，动环会收到全部设备的
			然后将全部设备注意进行识别判断，成功会入表，失败会返回回去
		entrance_face_work_ord 
		entrance_face_success_device
		
		涉及到回调？
			回调后返回结果给用户？？

	decode -- > 陕西起了decode



	es1000 - 维迪，需要单独用一个decode-slow服务，才能流转过来


	门禁涉及索引
		entrance_guard_event_his
		entrance_guard_operate_his


	容灾（关联 - 5个服务 - keeplive）
		是容灾，还是双主？
		2center
		1vip
		2模拟器（fsu - 模拟器 - 门禁？）

		tcp

		由center发起到模拟器
			宿主机挂了，就会自己变成主节点（由主节点下发）

		本质不跨池
			fsu现在是两双
				单资源池

				爽资源池（一个完全不动）

			一个池通过keeplive

			现在流程（确保fsu要保证 - 后续以vip发，那就得打 主机和vip都要）
				center
					vip
						fsu模拟器

	时间都要bcd，这都是啥，还有什么其他的属于


云南
	资质管理要有3行数据（即归档） -- 每行对应的资质都有 -- 申请变更 - 就有工单（原有信息都会填充，就不能添加功能，就是在原有的，不能有添加按钮）
		变更会有限制
	资质管理页面
		上面的地市，之影响汇总的
		但是点击汇总的卡片，就会带上地市和类型两个条件

	人员资质申报

		待处理，点击，就是又可以查看又可以编辑（操作就直接为审批  -- 只要不提交就不会影响）
			待处理不要删除
		只有回到发起人（草稿，或第一个人未删除可以测绘，废除工单都可以删除）
			驳回后可以废弃	


	进来默认展示一个，后面要加再点新增
	只能上传一个文件

	资质归档也要加上类型



整理
	整理校验（门禁教程）
		怎么校验 -- 案例
		

	广西优化需求：
		综资表的
		monitor 服务
			curl --location --request GET 'http://localhost:21530/v1/monitorapi/curlApi'
			2你拿着这个去调，回你success就行
			
			
	业务重整
		需要把业务重新捋一遍，文件防止需要改一下，以及是否采用的登记配置便于查找
			同时整理文件目录
		门禁整理
			数据准备
			校验逻辑
			模拟器梳理
			整流程涉及所有知识点整理（kafka，redis，等全部及流转）
			门禁相关文件
				文档（从协议层面、步骤、数据等全部整理下）
		广西	
			新需求
			综资同步
		上海、集团、云南
			业务逻辑整理
			综资 -- 需要再次整理业务逻辑
		
		需求：
			陕西 -- http人脸识别的（业务流程）
			云南 -- 运维管理
			广西 -- 全量渗透需要等结果、（优化需求）
		广东 -- 海康威视（等结果 - 目前现网没设备）





广东门禁整理
	1、entrance下发后无指令返回 -- decode检查是否起来
	2、entrance下发到decode后，没有进到topic，即未流入center（需要排查center kafka的配置）
	3、decode或center消费主名重复了（通消费组内，消费topic不能一致）


	注意：
		decode和center的node配置需要为true（必须同时一致，要么都是true，要么都是false） -- 必须一致都为true
			这样decode 才会去拼接patition和request
			center配置为ture，才回去检测ip，发送到指定端口，如果为false那么指定就会下发到全部center里面，并且center不做处理

		陕西是不需要node为true的
			并且是没有ip的

		其他的补充下wiki文档


广西优化需求：
	http://10.1.203.38:8087/document/index?document_id=2206

	postman request 'http://10.188.99.5:21530/v1/schedule/shareCenterDataSync?dataDate=20250908&fileName=CE_DECIVE_PE_TRANSFORM_20250910.csv&isDelIdxName=true'

	
	
整理校验（门禁教程）
	怎么校验 -- 案例
	

广西优化需求：
	综资表的
	monitor 服务
		curl --location --request GET 'http://localhost:21530/v1/monitorapi/curlApi'
		2你拿着这个去调，回你success就行
		
		
业务重整
	需要把业务重新捋一遍，文件防止需要改一下，以及是否采用的登记配置便于查找
		同时整理文件目录
	门禁整理
		数据准备
		校验逻辑
		模拟器梳理
		整流程涉及所有知识点整理（kafka，redis，等全部及流转）
		门禁相关文件
			文档（从协议层面、步骤、数据等全部整理下）
	广西	
		新需求
		综资同步
	上海、集团、云南
		业务逻辑整理
		综资 -- 需要再次整理业务逻辑
	
	需求：
		陕西 -- http人脸识别的（业务流程）
		云南 -- 运维管理
		广西 -- 全量渗透需要等结果、（优化需求）
		广东 -- 海康威视（等结果 - 目前现网没设备）
		

git补充
	push前（避免文件大，老是失败）
		git config --global http.postBuffer 1048576000
		git config --global lfs.concurrenttransfers 2
		git push origin master
		


广西综资
	external
		csvSplitChar: ^
		ftpIp: 10.1.4.113
		ftpPort: 21
		ftpUser: vsftpd
		ftpPwd: wccQKPbCmx8@r*6p
		ftpBasePath: /tmp/zongzi
		threadNum: 1
		backDataDay: 7
		ftpFileName: 
			RM_SITE_PROPERTY_yyyymmdd.csv,
			RM_ROOM_PROPERTY_yyyymmdd.csv,
			RM_AREA_SITE_yyyymmdd.csv,
			RM_AREA_RESPOINT_yyyymmdd.csv,
			RM_AREA_ROOM_yyyymmdd.csv,
			RM_AREA_RACKPOS_yyyymmdd.csv,
			PHYSICAL_STATION_yyyymmdd.csv
			CE_DEVICE_PE_TRANSFORM_yyyymmdd.csv,
			CE_DECIVE_PE_TRANSFORM_DEVICE_yyyymmdd.csv,
			CE_NET_PE_HIGH_DISTRIBUTION_yyyymmdd.csv,
			CE_DEVICE_PE_HIGH_DISTRIBUTION_yyyymmdd.csv,
			CE_NET_PE_HIGH_POWER_yyyymmdd.csv,
			CE_DEVICE_PE_HIGH_POWER_yyyymmdd.csv,
			CE_DEVICE_PE_HIGH_DC_DISTRIBUTION_yyyymmdd.csv,
			CE_NET_PE_LOW_DISTRIBUTION_yyyymmdd.csv,
			CE_DEVICE_PE_LOW_AC_DISTRIBUTION_yyyymmdd.csv,
			CE_DEVICE_PE_UPS_AC_DISTRIBUTION_yyyymmdd.csv,
			CE_NET_PE_SWITCH_POWER_yyyymmdd.csv,
			CE_DEVICE_PE_POWER_GENERATION_yyyymmdd.csv,
			CE_NET_PE_OPEN_POWER_yyyymmdd.csv,
			CE_DEVICE_PE_SWITCH_POWER_yyyymmdd.csv,
			CE_DEVICE_PE_LOW_DC_DISTRIBUTION_yyyymmdd.csv,
			CE_NET_PE_UPS_yyyymmdd.csv,
			CE_DEVICE_PE_UPS_yyyymmdd.csv,
			CE_DEVICE_PE_BATTERY_LA_yyyymmdd.csv,
			CE_DEVICE_PE_BATTERY_LI_yyyymmdd.csv,
			CE_DEVICE_PE_CACH_yyyymmdd.csv,
			CE_DEVICE_PE_CACH_END_yyyymmdd.csv,
			CE_DEVICE_PE_HIROSS_yyyymmdd.csv,
			CE_DEVICE_PE_NA_yyyymmdd.csv,
			CE_DEVICE_PE_BB_yyyymmdd.csv,
			CE_DEVICE_PE_HES_yyyymmdd.csv,
			CE_DEVICE_PE_WPC_yyyymmdd.csv,
			CE_DEVICE_PE_MONITOR_yyyymmdd.csv,
			CE_DEVICE_PE_ROOM_ENVIRONMENT_yyyymmdd.csv,
			CE_DEVICE_PE_IAC_yyyymmdd.csv,
			CE_DEVICE_PE_SMART_METER_yyyymmdd.csv,
			CE_LINK_PE_IN_yyyymmdd.csv,
			CE_LINK_PE_OUT_yyyymmdd.csv,
			CE_DEVICE_PE_OTHER_yyyymmdd.csv,
			CE_DEVICE_PE_ESS_yyyymmdd.csv,
			CE_NET_PE_CACH_yyyymmdd.csv,
			
		ftpWay: ftp
		deviceTypeId: 101,102,1,2,3,4,5,6,8,14,15,19,76,87,92,103,106,201,202,203,205,206,207,208,209
