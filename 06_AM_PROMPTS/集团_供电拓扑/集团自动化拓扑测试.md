# 集团供电自动化拓扑构建指南

## 一、核心层级理解

### （一）层级划分逻辑

**划分依据**：以变压器和电源（开关电源、HVDC、UPS）为分界节点，按路由关系（电流从上游到下游的流向）自动归类设备所属层级
**核心原则**：纵向分层串联架构，每层功能明确，通过关键转换设备衔接
**层级数量**：5个核心层级（高压配电层→变压器层→低压配电层→电源层→末端配电层）

### （二）分层核心依据

| 分界节点 | 核心作用 | 划分规则 |
|----------|----------|----------|
| 变压器 | 高压与低压的“物理分界” | 变压器本身独立成层；路由关系中，变压器上游（不含变压器）归高压层，下游（不含变压器）归低压层/电源层/末端层 |
| 电源（开关电源、HVDC、UPS） | 低压与末端的“功能分界” | 电源本身独立成层；路由关系中，电源上游（不含电源）归低压层，下游（不含电源）归末端层 |

### （三）5个配电层级详细解析

#### 1. 高压配电层

**电压等级**：10kV及以上
**层级定位**：外部高压电源接入与初步分配
**功能角色**：链路起点，为整个供电系统提供高压输入
**映射生成规则**：路由关系中，所有在“变压器（不含）以上”的设备，自动归类到该层
**典型设备类型**：
- 高压进线柜、高压出线柜、高压母联柜
- 高压计量柜、高压避雷器柜、高压隔离柜
- 高压升高柜、高压压变柜、高压电容补偿柜
- 高压油机配电柜、高压切换柜、高压操作电源

**层级边界**：
- 起点：外部高压电源接入点
- 终点：变压器层

**关键关系**：
- 1台高压进线柜 → 多台高压出线柜
- 1台高压出线柜 → 1台变压器
- 双回路场景：通过高压母联柜连接两组"进线→出线"链路

#### 2. 变压器层

**电压等级**：跨高压和低压
**层级定位**：高压与低压的物理分界节点
**功能角色**：实现高压到低压的电压转换，作为分层分界
**映射生成规则**：所有“变压器”类型设备，单独归类到该层
**典型设备类型**：
- 干式变压器、油浸变压器、非晶合金变压器
- 调压器

**层级边界**：
- 起点：高压配电层
- 终点：低压配电层

**关键关系**：
- 1台高压出线柜 → 1台变压器
- 1台变压器 → 1台低压进线柜

#### 3. 低压配电层

**电压等级**：0.4kV（380V/220V）
**层级定位**：低压电分配与管理
**功能角色**：承接变压器输出的低压电，为电源设备提供上游供电
**映射生成规则**：路由关系中，“变压器（含）以下、电源（不含）以上”的设备，自动归类到该层
**典型设备类型**：
- 低压进线柜、低压出线柜、低压母联柜
- 低压计量柜、低压联络柜、低压ATS/MTS切换柜
- 低压电容补偿柜、低压油机配电柜、应急油机接入箱/柜
- 低压楼层配电柜、空调配电柜、UPS输入柜

**层级边界**：
- 起点：变压器层
- 终点：电源层

**关键关系**：
- 1台变压器 → 1台低压进线柜
- 1台低压进线柜 → 多台低压出线柜
- 1台低压出线柜 → 1路电源供电回路
- 双回路场景：通过低压母联柜连接两组"进线→出线"链路

#### 4. 电源层

**电压等级**：0.4kV及以下
**层级定位**：低压与末端的功能分界，提供稳压、不间断供电
**功能角色**：保障末端设备供电可靠性
**映射生成规则**：所有“开关电源、高压直流（HVDC）、UPS”三类设备，自动归类到该层
**典型设备类型**：
- 开关电源：组合开关电源、壁挂开关电源、一体化电源柜
- HVDC：分立高压直流电源、240V/336V直流配电柜
- UPS：工频UPS、模块化高频UPS、UPS并机柜

**层级边界**：
- 起点：低压配电层
- 终点：末端配电层

**关键关系**：
- 1台低压出线柜 → 1台电源设备
- 1台电源设备 → 多台末端配电设备

#### 5. 末端配电层

**电压等级**：0.4kV及以下（设备端供电）
**层级定位**：最终配电与设备供电接口
**功能角色**：链路终点，直接为末端设备提供电源
**映射生成规则**：路由关系中，所有在“电源（不含）以下”的设备，自动归类到该层
**典型设备类型**：
- 交流列头柜、直流列头柜
- PDU（电源分配单元）
- 末端配电箱、开关电源电池开关柜

**层级边界**：
- 起点：电源层
- 终点：末端用电设备

**关键关系**：
- 1台电源设备 → 1台列头柜
- 1台列头柜 → 多台PDU
- 1台PDU → 多台末端用电设备

### （四）特殊场景层级处理

#### 1. 无高压场景
**适用站点**：小型基站、接入机房等
**层级调整**：省略高压配电层，直接从变压器层或低压配电层开始
**链路路径**：低压进线柜→低压出线柜→电源设备→列头柜→PDU
**层级显示**：系统自动隐藏高压配电层，仅显示其他层级

#### 2. 跨系统供电场景
**适用情况**：大型数据中心、多系统协同场景
**层级处理**：
- 跨低压系统时，仅向上呈现一级
- 保持主链路清晰，避免层级混乱
- 通过related_system字段区分不同电源系统

#### 3. 无关联关系设备
**适用情况**：无明确路由关系的设备
**层级处理**：不纳入5个配电层级，统一归类至"无关联关系设备"页面
**典型设备**：游离的低压柜、未关联分路的传感器等

### （五）配电层级-设备类型对应表

| 配电层级 | 核心映射规则 | 典型设备类型 | 设备所属专业 | 备注 |
|----------|--------------|--------------|--------------|------|
| **高压配电层** | 路由关系中，变压器（不含）以上的高压侧设备 | 高压进线柜、高压出线柜、高压母联柜等 | 供电专业 | 仅含高压侧设备 |
| **变压器层** | 设备类型为“变压器”的所有设备 | 干式变压器、油浸变压器、调压器等 | 供电专业 | 独立分层，作为高压/低压分界 |
| **低压配电层** | 路由关系中，变压器（含）以下、电源（不含）以上的低压侧设备 | 低压进线柜、低压出线柜、空调配电柜等 | 供电专业 | 低压侧核心分配层 |
| **电源层** | 设备类型为“开关电源、HVDC、UPS”的所有设备 | 开关电源、HVDC、UPS等 | 供电专业 | 作为低压/末端分界 |
| **末端配电层** | 路由关系中，电源（不含）以下的末端分配设备 | 列头柜、PDU、末端配电箱等 | 供电专业 | 直接为末端设备供电 |
| **无关联关系设备** | 无明确路由关系的所有设备 | 所有类型设备 | 不限 | 统一归类至指定页面 |

## 二、供电拓扑数据构建方法

### （一）数据构建核心要素

1. **设备数据**：
   - 设备基本信息：设备类型、名称、规格型号
   - 设备标识：设备ID、动环监控设备ID
   - 设备属性：电压等级、功率、回路编号
   - 设备关系：上下游连接关系、所属系统

2. **动环设备数据**：
   - 动环设备类型：传感器、监控模块、监控主机等
   - 动环设备标识：动环监控设备ID、设备型号
   - 采集参数：电流、电压、温度、湿度等
   - 关联关系：与供电设备的对应关系

3. **链路数据**：
   - 链路ID：唯一标识
   - 链路名称：链路用途描述
   - 链路层级：所属层级
   - 链路状态：正常/异常
   - 链路组成：包含的设备列表

4. **关联数据**：
   - 分路顺序号：设备间连接关系
   - related_system：同一电源系统标识
   - 专业关联：跨专业设备关联关系
   - 动环关联：供电设备与动环设备的对应关系

### （二）映射功能完整流程

**前置条件**：平台与资管系统完成对接，资源数据（动环专业内输出分路）同步完成（含设备类型、路由关系、分路顺序号等字段）

**映射逻辑步骤**：
1. **设备类型筛选**：系统读取资源数据中的"设备类型"，先筛选出"变压器""开关电源/HVDC/UPS"，分别直接归类到"变压器层""电源层"
2. **路由关系判断**：根据"路由关系"（上游设备→下游设备的连接关系），判断剩余设备在"变压器"和"电源"的上下游位置：
   - 变压器上游设备→高压配电层
   - 变压器下游、电源上游设备→低压配电层
   - 电源下游设备→末端配电层
3. **层级生成**：生成"配电层级"字段，与设备信息绑定，同步到供电拓扑配置页面
4. **限制与更新**：
   - 映射生成后，不可再通过模板导入修改配电层级
   - 仅可编辑"分路顺序号关联设备"，其他字段（含配电层级）不可修改
   - 单个站点可通过"资源数据更新"按钮，刷新映射结果

### （三）数据构建步骤

#### 1. 基础数据准备

**步骤1：设备清单梳理**
- 收集所有供电相关设备信息
- 按设备类别（高压配电设备、变压器、低压配电设备、电源设备、末端配电设备）分类
- 记录设备的关键属性和标识，包括设备类型、路由关系、分路顺序号

**步骤2：动环设备清单梳理**
- 收集所有需要关联的动环设备信息
- 按设备类型（传感器、监控模块、监控主机）分类
- 记录动环设备的采集参数和通信协议

**步骤3：关联标识分配**
- 为每个设备分配唯一的动环监控设备ID
- 为每个分路分配唯一的分路顺序号
- 为同一电源系统的设备分配相同的related_system值
- 确保动环监控设备ID在资管系统和动环系统中保持一致

#### 2. 5层级链路构建

**构建原则**：按高压配电层→变压器层→低压配电层→电源层→末端配电层顺序，从上到下构建

**高压配电层构建流程**：
1. 确定高压进线柜（链路起点，1台）
2. 根据变压器数量配置高压出线柜（1-N台，与变压器1:1对应）
3. 双回路场景配置高压母联柜（1台）
4. 按"高压进线柜→高压出线柜"顺序连接
5. 双回路场景通过高压母联柜连接两组链路

**变压器层构建流程**：
1. 为每台高压出线柜配置对应变压器（1:1关系）
2. 确保变压器独立成层

**低压配电层构建流程**：
1. 为每台变压器配置对应低压进线柜（1:1关系）
2. 根据电源设备数量配置低压出线柜（1-N台）
3. 双回路场景配置低压母联柜（1台）
4. 按"变压器→低压进线柜→低压出线柜"顺序连接
5. 双回路场景通过低压母联柜连接两组链路

**电源层构建流程**：
1. 根据供电可靠性需求配置电源设备（UPS/开关电源/HVDC，1-N台）
2. 为每台低压出线柜配置对应电源设备（1:1关系）
3. 按"低压出线柜→电源设备"顺序连接

**末端配电层构建流程**：
1. 为每个电源设备关联对应的列头柜（1-N台）
2. 为每个列头柜关联对应的PDU（按机柜分配）
3. 按"电源设备→列头柜→PDU"顺序连接
4. PDU直接连接至末端用电设备

#### 3. 跨专业输出链路构建

**构建原则**：以5层级链路为基础，横向延伸至其他专业

**供电→IT链路构建**：
1. 完成5层级链路构建
2. 为PDU关联对应的IT设备（服务器/网络设备/存储设备）
3. 通过动环监控设备ID建立跨专业关联

**供电→空调链路构建**：
1. 完成5层级链路"高压配电层→低压配电层"构建
2. 为低压出线柜关联空调配电柜
3. 为空调配电柜关联对应的空调设备（精密空调/新风空调）
4. 验证链路满足大功率负载要求

**供电→动环链路构建**：
1. 完成5层级链路"高压配电层→电源层"构建
2. 为关键设备（变压器、UPS、开关电源）关联对应的动环传感器
3. 为动环传感器关联动环监控主机
4. 配置数据采集参数

#### 4. 动环设备关联构建

**构建原则**：基于物理位置和监控需求，建立供电设备与动环设备的对应关系

**构建步骤**：
1. 确定需要关联动环设备的供电设备清单，优先选择核心设备（变压器、电源设备）
2. 根据供电设备类型，选择合适的动环设备类型（如变压器→温度传感器，UPS→监控模块）
3. 基于物理位置和电气连接，确定具体的对应关系
4. 通过动环监控设备ID建立关联关系
5. 配置动环设备的采集参数和通信协议

**关联示例**：
- 高压进线柜 → 高压电流传感器 + 高压电压传感器
- 变压器 → 变压器温度传感器 + 变压器油位传感器
- UPS主机 → UPS监控模块
- 机房区域 → 温湿度传感器 + 烟雾传感器

### （四）数据构建注意事项

1. **设备对应关系准确性**：
   - 高压出线柜与变压器必须1:1对应
   - 变压器与低压进线柜必须1:1对应
   - 低压出线柜与电源设备必须1:1对应
   - 电源设备与列头柜可1:N对应
   - 列头柜与PDU可1:N对应

2. **标识唯一性与一致性**：
   - 分路顺序号必须唯一
   - 动环监控设备ID必须唯一
   - 资管系统与动环系统标识保持一致
   - related_system值正确分配

3. **层级关系清晰性**：
   - 严格按5层级顺序构建，避免跨层级跳接
   - 关键分界设备（变压器、电源）的层级边界明确
   - 跨系统设备通过related_system字段区分
   - 无关联关系设备单独归类

4. **映射规则遵循**：
   - 优先按"设备类型"判定变压器层、电源层
   - 再按"路由关系"判定高压/低压/末端配电层
   - 确保分层准确性

5. **分路关联限制**：
   - 所有层级设备的"分路顺序号"仅可关联对应层级的系统设备
   - 支持按配电层级筛选设备类型

## 三、供电拓扑测试用例

### （一）映射功能测试用例

| 用例ID | 测试场景 | 测试步骤 | 预期结果 | 优先级 |
|--------|----------|----------|----------|--------|
| TC-M-001 | 自动分层映射-完整链路 | 1. 准备完整链路资源数据（含高压、变压器、低压、电源、末端设备）<br>2. 执行资源数据映射<br>3. 验证分层结果 | 1. 设备正确分配到5个层级<br>2. 变压器单独成层<br>3. 电源单独成层 | 高 |
| TC-M-002 | 自动分层映射-无高压场景 | 1. 准备无高压资源数据（含变压器、低压、电源、末端设备）<br>2. 执行资源数据映射<br>3. 验证分层结果 | 1. 高压配电层自动隐藏<br>2. 其他4个层级正确生成<br>3. 设备分配准确 | 高 |
| TC-M-003 | 自动分层映射-设备类型优先级 | 1. 准备包含变压器和电源的资源数据<br>2. 执行资源数据映射<br>3. 验证分层结果 | 1. 变压器优先分配到变压器层<br>2. 电源优先分配到电源层<br>3. 其他设备按路由关系分配 | 高 |
| TC-M-004 | 映射后修改限制 | 1. 执行资源数据映射<br>2. 尝试通过模板导入修改配电层级<br>3. 尝试修改非分路关联字段<br>4. 验证修改结果 | 1. 模板导入被禁用<br>2. 仅分路顺序号关联设备可编辑<br>3. 其他字段不可修改 | 高 |
| TC-M-005 | 资源数据更新刷新 | 1. 执行资源数据映射<br>2. 修改资管系统中某设备的路由关系<br>3. 在供电拓扑配置页面点击"资源数据更新"<br>4. 验证分层结果 | 1. 系统自动刷新映射结果<br>2. 设备层级随路由关系变化自动调整<br>3. 调整结果准确 | 高 |

### （二）层级划分测试用例

| 用例ID | 测试场景 | 测试步骤 | 预期结果 | 优先级 |
|--------|----------|----------|----------|--------|
| TC-L-001 | 高压配电层设备分配 | 1. 准备高压设备资源数据（高压进线柜、高压出线柜）<br>2. 执行资源数据映射<br>3. 验证设备分配结果 | 1. 所有高压设备正确分配到高压配电层<br>2. 无低压设备混入 | 高 |
| TC-L-002 | 变压器层设备分配 | 1. 准备变压器资源数据（干式变压器、油浸变压器）<br>2. 执行资源数据映射<br>3. 验证设备分配结果 | 1. 所有变压器正确分配到变压器层<br>2. 无其他类型设备混入 | 高 |
| TC-L-003 | 低压配电层设备分配 | 1. 准备低压设备资源数据（低压进线柜、低压出线柜、空调配电柜）<br>2. 执行资源数据映射<br>3. 验证设备分配结果 | 1. 所有低压设备正确分配到低压配电层<br>2. 无高压或电源设备混入 | 高 |
| TC-L-004 | 电源层设备分配 | 1. 准备电源设备资源数据（UPS、开关电源、HVDC）<br>2. 执行资源数据映射<br>3. 验证设备分配结果 | 1. 所有电源设备正确分配到电源层<br>2. 无其他类型设备混入 | 高 |
| TC-L-005 | 末端配电层设备分配 | 1. 准备末端设备资源数据（列头柜、PDU、末端配电箱）<br>2. 执行资源数据映射<br>3. 验证设备分配结果 | 1. 所有末端设备正确分配到末端配电层<br>2. 无电源或低压设备混入 | 高 |
| TC-L-006 | 无关联设备处理 | 1. 准备无明确路由关系的设备数据<br>2. 执行资源数据映射<br>3. 验证设备分配结果 | 1. 无关联设备正确归类到"无关联关系设备"页面<br>2. 不纳入5个配电层级 | 中 |

### （三）链路构建测试用例

| 用例ID | 测试场景 | 测试步骤 | 预期结果 | 优先级 |
|--------|----------|----------|----------|--------|
| TC-LK-001 | 完整5层级链路构建 | 1. 配置高压配电层设备（高压进线柜→高压出线柜）<br>2. 配置变压器层设备（变压器）<br>3. 配置低压配电层设备（低压进线柜→低压出线柜）<br>4. 配置电源层设备（UPS）<br>5. 配置末端配电层设备（列头柜→PDU）<br>6. 建立设备间连接关系<br>7. 生成拓扑图 | 1. 拓扑图正确显示5个层级<br>2. 设备连接关系清晰<br>3. 层级间过渡自然 | 高 |
| TC-LK-002 | 双回路高压链路构建 | 1. 配置2组高压进线柜→高压出线柜<br>2. 配置高压母联柜<br>3. 建立双回路连接关系<br>4. 生成拓扑图 | 1. 拓扑图正确显示双回路高压链路<br>2. 高压母联柜连接两组链路<br>3. 设备分配到正确层级 | 高 |
| TC-LK-003 | 双回路低压链路构建 | 1. 配置2组低压进线柜→低压出线柜<br>2. 配置低压母联柜<br>3. 建立双回路连接关系<br>4. 生成拓扑图 | 1. 拓扑图正确显示双回路低压链路<br>2. 低压母联柜连接两组链路<br>3. 设备分配到正确层级 | 高 |
| TC-LK-004 | 多电源链路构建 | 1. 配置1台低压出线柜→3台UPS<br>2. 建立连接关系<br>3. 生成拓扑图 | 1. 拓扑图正确显示1:3的电源链路<br>2. 所有电源设备分配到电源层<br>3. 连接关系清晰 | 高 |
| TC-LK-005 | 跨系统供电链路构建 | 1. 配置2个不同related_system的电源系统<br>2. 建立跨系统连接关系<br>3. 生成拓扑图 | 1. 拓扑图正确显示跨系统链路<br>2. 不同系统设备通过related_system区分<br>3. 仅向上呈现一级 | 中 |
| TC-LK-006 | UPS供电链路构建 | 1. 配置包含UPS的完整链路<br>2. 建立连接关系（低压出线柜→UPS→列头柜）<br>3. 生成拓扑图 | 1. 拓扑图正确显示UPS供电链路<br>2. UPS分配到电源层<br>3. 连接关系清晰 | 高 |

### （四）设备关联测试用例

| 用例ID | 测试场景 | 测试步骤 | 预期结果 | 优先级 |
|--------|----------|----------|----------|--------|
| TC-R-001 | 分路顺序号关联-一对一 | 1. 选择一个设备<br>2. 配置分路顺序号关联单个设备<br>3. 验证关联结果 | 1. 关联成功<br>2. 分路顺序号唯一对应一个设备<br>3. 关联关系显示正确 | 高 |
| TC-R-002 | 分路顺序号关联-一对多 | 1. 选择一个电源设备<br>2. 配置分路顺序号关联多个末端设备<br>3. 验证关联结果 | 1. 关联成功<br>2. 一个分路顺序号可关联多个末端设备<br>3. 关联关系显示正确 | 高 |
| TC-R-003 | 动环监控设备ID关联 | 1. 准备资管系统和动环系统的设备数据，确保动环监控设备ID一致<br>2. 执行资源数据映射<br>3. 验证关联结果 | 1. 供电设备与动环设备成功关联<br>2. 数据同步准确<br>3. 关联关系显示正确 | 高 |
| TC-R-004 | related_system关联 | 1. 配置多个设备为同一related_system值<br>2. 生成拓扑图<br>3. 验证显示结果 | 1. 同一related_system的设备在同一拓扑图中显示<br>2. 不同related_system的设备分图显示<br>3. 系统区分清晰 | 高 |
| TC-R-005 | 跨专业设备关联 | 1. 配置供电设备与IT设备的关联关系<br>2. 生成拓扑图<br>3. 验证关联结果 | 1. 跨专业设备关联成功<br>2. 拓扑图正确显示跨专业链路<br>3. 关联关系清晰 | 中 |

### （五）配置方式测试用例

| 用例ID | 测试场景 | 测试步骤 | 预期结果 | 优先级 |
|--------|----------|----------|----------|--------|
| TC-C-001 | 页面配置-单设备添加 | 1. 进入供电拓扑配置页面<br>2. 选择站点和配电层级<br>3. 手动添加单个设备<br>4. 配置设备信息和关联关系<br>5. 保存配置 | 1. 设备添加成功<br>2. 设备信息正确保存<br>3. 关联关系正确建立 | 高 |
| TC-C-002 | 页面配置-批量操作 | 1. 进入供电拓扑配置页面<br>2. 选择多个设备<br>3. 执行批量删除操作<br>4. 执行批量新增操作<br>5. 验证操作结果 | 1. 批量删除成功，数据正确更新<br>2. 批量新增成功，生成新设备<br>3. 关联关系正确处理 | 高 |
| TC-C-003 | 模板导入-正常导入 | 1. 下载供电拓扑模板<br>2. 按模板格式填写完整测试数据<br>3. 导入模板<br>4. 验证导入结果 | 1. 模板导入成功<br>2. 数据完整导入<br>3. 拓扑生成正确 | 高 |
| TC-C-004 | 模板导入-错误数据导入 | 1. 下载供电拓扑模板<br>2. 填写缺失必填字段的数据<br>3. 填写格式错误的数据<br>4. 导入模板<br>5. 验证导入结果 | 1. 系统提示导入失败<br>2. 明确指出错误原因<br>3. 页面数据未更新 | 中 |
| TC-C-005 | 资源数据映射-全局生效 | 1. 启用资源数据映射功能<br>2. 选择多个站点执行映射<br>3. 验证映射结果<br>4. 尝试模板导入<br>5. 验证导入结果 | 1. 资源数据映射全局生效<br>2. 所有站点成功映射<br>3. 模板导入被禁用 | 高 |

### （六）边界与异常场景测试用例

| 用例ID | 测试场景 | 测试步骤 | 预期结果 | 优先级 |
|--------|----------|----------|----------|--------|
| TC-E-001 | 无资源数据场景 | 1. 选择一个无资源数据的站点<br>2. 执行资源数据映射<br>3. 验证系统表现 | 1. 系统给出明确提示<br>2. 拓扑不生成<br>3. 无错误崩溃 | 中 |
| TC-E-002 | 资源数据不完整场景 | 1. 准备不完整资源数据（缺失部分设备信息）<br>2. 执行资源数据映射<br>3. 验证映射结果 | 1. 系统给出数据不完整提示<br>2. 能生成的部分拓扑正常显示<br>3. 缺失设备不影响其他设备映射 | 中 |
| TC-E-003 | 大量设备性能测试 | 1. 准备包含1000+设备的资源数据<br>2. 执行资源数据映射<br>3. 生成拓扑图<br>4. 执行拓扑操作（放大、缩小、下钻）<br>5. 验证系统表现 | 1. 映射生成时间在可接受范围内<br>2. 拓扑图加载流畅<br>3. 操作无卡顿<br>4. 设备显示完整 | 低 |
| TC-E-004 | 循环路由关系处理 | 1. 准备包含循环路由关系的资源数据（A→B→C→A）<br>2. 执行资源数据映射<br>3. 验证系统处理结果 | 1. 系统检测到循环路由<br>2. 给出明确提示<br>3. 不生成错误拓扑 | 中 |
| TC-E-005 | 设备类型未识别处理 | 1. 准备包含未识别设备类型的资源数据<br>2. 执行资源数据映射<br>3. 验证系统处理结果 | 1. 系统给出设备类型未识别提示<br>2. 未识别设备归类到无关联关系设备<br>3. 不影响其他设备映射 | 中 |

### （七）动环设备关联测试用例

| 用例ID | 测试场景 | 测试步骤 | 预期结果 | 优先级 |
|--------|----------|----------|----------|--------|
| TC-D-001 | 高压设备与动环传感器关联 | 1. 选择一个高压进线柜<br>2. 关联高压电流传感器和电压传感器<br>3. 验证关联结果 | 1. 关联成功<br>2. 动环数据正确显示<br>3. 关联关系清晰 | 高 |
| TC-D-002 | 变压器与动环传感器关联 | 1. 选择一个变压器<br>2. 关联温度传感器和油位传感器<br>3. 验证关联结果 | 1. 关联成功<br>2. 动环数据正确显示<br>3. 关联关系清晰 | 高 |
| TC-D-003 | UPS与动环监控模块关联 | 1. 选择一个UPS主机<br>2. 关联UPS监控模块<br>3. 验证关联结果 | 1. 关联成功<br>2. UPS运行数据正确显示<br>3. 告警功能正常 | 高 |
| TC-D-004 | 环境传感器关联 | 1. 选择一个机房区域<br>2. 关联温湿度传感器和烟雾传感器<br>3. 验证关联结果 | 1. 关联成功<br>2. 环境数据正确显示<br>3. 告警功能正常 | 中 |
| TC-D-005 | 动环数据同步测试 | 1. 修改动环系统中的传感器数据<br>2. 等待数据同步<br>3. 验证供电拓扑中的数据显示 | 1. 数据同步准确<br>2. 显示实时<br>3. 无延迟 | 高 |

## 四、测试执行建议

### （一）测试环境准备

1. **系统环境**：确保资管系统与测试平台已对接，数据同步正常
2. **测试数据**：
   - 完整链路数据（覆盖5个层级）
   - 边界场景数据（无高压、无电源、多电源等）
   - 异常场景数据（错误数据、不完整数据、循环路由等）
3. **测试工具**：
   - 拓扑可视化验证工具
   - 数据一致性验证工具
   - 性能测试工具（针对大量设备场景）

### （二）测试执行顺序

1. 先执行映射功能测试（TC-M-001至TC-M-005）
2. 再执行层级划分测试（TC-L-001至TC-L-006）
3. 然后执行链路构建测试（TC-LK-001至TC-LK-006）
4. 接着执行设备关联测试（TC-R-001至TC-R-005）
5. 执行配置方式测试（TC-C-001至TC-C-005）
6. 执行边界与异常场景测试（TC-E-001至TC-E-005）
7. 最后执行动环设备关联测试（TC-D-001至TC-D-005）

### （三）测试验证重点

1. **层级划分准确性**：设备是否分配到正确的层级
2. **链路构建完整性**：设备连接关系是否完整、清晰
3. **映射功能可靠性**：映射结果是否准确，限制是否生效
4. **设备关联正确性**：分路关联、动环关联是否准确
5. **系统稳定性**：异常场景下系统是否稳定，错误提示是否明确
6. **性能表现**：大量设备场景下系统是否流畅

## 五、总结

供电自动化拓扑的核心是基于变压器和电源的5层级划分，通过映射功能自动生成配电层级，无需手动填写。测试重点包括映射功能、层级划分、链路构建、设备关联和异常场景处理。

本测试指南提供了全面的测试用例，覆盖了映射功能、层级划分、链路构建、设备关联、配置方式、边界与异常场景、动环设备关联等7个方面，共28个测试用例，确保供电自动化拓扑系统的功能完整性、数据准确性和系统稳定性。

通过本指南的测试执行，可以有效验证供电自动化拓扑系统的各项功能，确保系统能够准确、稳定地生成和管理供电拓扑，为站点运维人员提供可靠的供电拓扑可视化管理工具。