\# 配电智能辅助监控系统 - 门禁监控统一通讯协议 **版本**：V1.0   **修订日期**：2021-08-17   **修改人**：杨德昌   ## 修改记录 | 日期 | 版本 | 修改记录 | 修改人 | |------|------|----------|--------| | 20210817 | V1.0 | 初稿 | 杨德昌 | ## 目录 1. [总体说明](#一总体说明) 2. [基本报文格式定义](#二基本报文格式定义) 3. [数据流格式定义](#三数据流格式定义) ## 一、总体说明 为统一电力配电辅助监控中智能门禁的建设，实现异厂家门禁设备标准化接入和统一管理，特拟制本协议。本文档规定了监控平台主站系统（SC）和站端FSU之间的传输接口要求，规范智能门禁设备的监控数据交互通信，实现“统一门禁接入、统一门禁权限管理、统一门禁告警管理、集中门禁事件查询”的管理目标。 ### 系统组网架构 - 门禁模块属于智能设备，监控数据由站端FSU监控主机通过串口/USB/网口等方式接入 - 监控平台主站系统（SC）与FSU通过IP网络建立通信 - 支持多厂家设备（A/B/C厂家）的视频模块、动环模块、门禁模块统一接入 - 通信协议：SC与FSU之间采用UDP方式通信 - 接入要求：每个门禁模块映射独立IP+端口，SC通过FSU的IP和映射端口访问门禁模块 ### 协议范围 本协议分为“基本报文格式定义”和“数据流格式定义”两大部分，适用于SC解析监控场景。 ## 二、基本报文格式定义 ### 1. 基本报文数据 #### 命令号 0x0001   #### 命令描述 用于传输数据包，支持上行（FSU→SC）和下行（SC→FSU）两个方向 #### 下行方向（SC→FSU）报文格式 | 地址 | 协议字段 | 字段长度 | 字段描述 | 默认值 | |------|----------|----------|----------|--------| | 0 | P_header | 1 byte | 协议包开始标识 | 0xFF | | 1-20 | P_dest_addr | 20 bytes | 目标设备地址 | FSU的ID | | 21-28 | P_src_addr | 8 byte | 源设备地址 | SC的地址（00） | | 29 | P_subDevType | 1 byte | 子设备类型：<br>1-串口设备<br>2-USB设备<br>3-IP网络设备（一体化设备也为3） | 1 | | 30 | P_subDev_addr | 1 byte | 子设备地址号 | 00 | | 31-32 | P_pLen | 2 byte | 协议族数据包长度 | 5+N | | 33 | RtnFlag | 1 byte | 设置/应答类型 | 0xee | | 34-35 | CommType | 2 bytes | 命令编号 | 0x0001 | | 36-37 | 数据流长度 | 2 byte | 数据长度 | - | | 38-(38+N-1) | 数据流 | N byte | 具体内容见第三章 | - | | 38+N | P_verify | 1 byte | 校验字段（异或校验，不含包头包尾） | - | | 39+N | P_tailer | 1 byte | 协议包结束标识 | 0xFE | #### 上行方向（FSU→SC）报文格式 | 地址 | 协议字段 | 字段长度 | 字段描述 | 默认值 | |------|----------|----------|----------|--------| | 0 | P_header | 1 byte | 协议包开始标识 | 0xFF | | 1-8 | P_dest_addr | 8 bytes | 目标设备地址 | SC的地址（0x00） | | 9-28 | P_src_addr | 20 byte | 源设备地址 | FSU的ID | | 29 | P_subDevType | 1 byte | 子设备类型（同下行定义） | 1 | | 30 | P_subDev_addr | 1 byte | 子设备地址号 | 00 | | 31-32 | P_pLen | 2 byte | 协议族数据包长度 | 5+N | | 33 | RtnFlag | 1 byte | 设置/应答类型 | 0x00 | | 34-35 | CommType | 2 bytes | 命令编号 | 0x0001 | | 36-37 | 数据流长度 | 2 byte | 数据长度 | - | | 38-(38+N-1) | 数据流 | N byte | 具体内容见第三章 | - | | 38+N | P_verify | 1 byte | 校验字段（异或校验，不含包头包尾） | - | | 39+N | P_tailer | 1 byte | 协议包结束标识 | 0xFE | ### 2. FSU通道心跳 #### 命令号 0x0002   #### 命令描述 FSU每隔120秒向SC发送心跳包，SC若360秒未收到则判定通道中断 #### 报文格式（FSU→SC） | 地址 | 协议字段 | 字段长度 | 字段描述 | 默认值 | |------|----------|----------|----------|--------| | 0 | P_header | 1 byte | 协议包开始标识 | 0xFF | | 1-8 | P_addr | 8 bytes | 目标设备地址 | SC的地址（0x00） | | 9-28 | P_src_addr | 20 bytes | 源设备地址 | FSU的ID | | 29 | P_subDevType | 1 byte | 子设备类型（同基本报文定义） | 1 | | 30 | P_subDev_addr | 1 byte | 子设备地址号 | 00 | | 31-32 | P_pLen | 2 byte | 协议族数据包长度 | 3 | | 33 | RtnFlag | 1 byte | - | 0xED | | 34-35 | CommandType | 2 byte | 命令号 | 0x0002 | | 36 | P_verify | 1 byte | 校验字段（异或校验，不含包头包尾） | - | | 37 | P_tailer | 1 byte | 协议包结束标识 | 0xFE | ### 3. 转义字段说明 协议包头（0xFF）、包尾（0xFE）之间的数据若出现以下字符需转义： - 0xFF → 0xFD 0x00 - 0xFE → 0xFD 0x01 - 0xFD → 0xFD 0x02 **注**：上下行数据均需转义，传输内容为转义后的数据 ### 4. 字节序说明 通信过程中所有数据统一使用**大端模式**（高位在前、低位在后） ## 三、数据流格式定义 ### 1. 基本规范 #### 1.1 数据格式 | 序号 | 字段 | 字节数 | 符号 | 描述 | |------|------|--------|------|------| | 1 | 起始符 | 1 | SOI | 0x7E（START OF INFORMATION） | | 2 | 版本 | 1 | VER | 0x22（表示2.2版本） | | 3 | 组内地址 | 1 | ADR | 设备ID（1-254，默认0） | | 4 | 类码与组地址 | 1 | CID1 | D7-D4：设备分类码（环境控制类=8）<br>D3-D0：分组号（0-15）<br>门禁设备固定为0x81 | | 5 | 类别/应答 | 1 | CID2/RTN | 下发命令时为CID2（命令分类码）<br>应答时为RTN（处理结果） | | 6 | 参数长度校验 | 2 | L.TH | 携带参数的长度标识 | | 7 | 参数 | N字节 | INFO | 下发时为COMINFO（命令参数）<br>应答时为DATAINFO（返回数据） | | 8 | 帧校验 | 2 | CHK-SUM | 校验和（VER至INFO最后字节） | | 9 | 结束符 | 1 | EOI | 0x0D（END OF INFORMATION） | #### 关键字段说明 - **VER**：协议版本号，设备不支持时返回"RTN=01H VER不符" - **CID1**：门禁设备固定为0x81（分类码8+分组码1） - **CID2**：新门禁设备固定为0x01 - **CHK-SUM**：两字节，高位在前，从VER到INFO最后字节累加计算 #### 1.2 数据传输与超时错 - **通信模式**：主从方式（SU为上位机，门禁设备为下位机） - **传输规则**：  - SOI、EOI按单字节直接发送  - 其他字段按HEX高4位、低4位拆分为ASCII码发送 - **超时时间**：500毫秒（SU下发命令后500ms未收到响应则通信失败） - **命令类型**：  1. 设置门禁设备参数命令  2. 读取门禁设备信息命令 #### 1.3 设备应答（RTN值定义） | RTN值（HEX） | 表示意义 | 备注 | |--------------|----------|------| | 00H | 正常 | - | | 01H | VER错 | 版本不支持 | | 02H | CHKSUM错 | 校验和错误 | | 03H | LCHKSUM错 | 长度校验错误 | | 04H | CID2无效 | 命令分类码非法 | | 05H | 命令格式错 | 数据包格式错误 | | 06H | 无效数据 | 参数非法 | | 80H | 不支持的命令号 | - | | 81H | CID1无效 | 设备分类码非法 | | EFH | 其他错误 | 用户自定义 | #### 1.4 COMINFO、DATAINFO格式 | 字段 | 描述 | |------|------| | CMD | 命令号（2字节） | | SUBCMD | 子命令号（1字节） | | DATAF | 参数若干字节 | ### 2. 命令说明 #### 0x01 设置日期时间 | 方向 | 字段 | 长度（Byte） | 描述 | 备注 | |------|------|--------------|------|------| | 下发（COMINFO） | CMD | 2 | 0x01 | - | | | SUBCMD | 1 | 0 | - | | | 日期时间 | 6 | 年月日时分秒（各1字节） | 年份从2000起算 | | 响应（DATAINFO） | CMD | 2 | 0x01 | - | | | SUBCMD | 1 | 0 | - | #### 0x02 读取日期时间 | 方向 | 字段 | 长度（Byte） | 描述 | 备注 | |------|------|--------------|------|------| | 下发（COMINFO） | CMD | 2 | 0x02 | - | | | SUBCMD | 1 | 0 | - | | 响应（DATAINFO） | CMD | 2 | 0x02 | - | | | SUBCMD | 1 | 0 | - | | | 日期时间 | 6 | 年月日时分秒（各1字节） | 年份从2000起算 | #### 0x03 读取软件版本号 | 方向 | 字段 | 长度（Byte） | 描述 | 备注 | |------|------|--------------|------|------| | 下发（COMINFO） | CMD | 2 | 0x03 | - | | | SUBCMD | 1 | 0 | - | | 响应（DATAINFO） | CMD | 2 | 0x03 | - | | | SUBCMD | 1 | 0 | - | | | 软件版本号 | 16 | 字符串，不足补0 | 例：1.00 | #### 0x04 重启设备 | 方向 | 字段 | 长度（Byte） | 描述 | 备注 | |------|------|--------------|------|------| | 下发（COMINFO） | CMD | 2 | 0x04 | - | | | SUBCMD | 1 | 0 | - | | 响应（DATAINFO） | CMD | 2 | 0x04 | - | | | SUBCMD | 1 | 0 | - | #### 0x05 设置调试开关 | 方向 | 字段 | 长度（Byte） | 描述 | 备注 | |------|------|--------------|------|------| | 下发（COMINFO） | CMD | 2 | 0x05 | - | | | SUBCMD | 1 | 0 | - | | | 总打印开关 | 1 | 0-关闭，1-打开，0xFF-不改变 | - | | | 生产测试开关 | 1 | 0-关闭，1-打开，0xFF-不改变 | - | | | 栈打印开关 | 1 | 0-关闭，1-打开，0xFF-不改变 | - | | | 堆打印开关 | 1 | 0-关闭，1-打开，0xFF-不改变 | - | | | AT打印开关 | 1 | 0-关闭，1-打开，0xFF-不改变 | - | | 响应（DATAINFO） | CMD | 2 | 0x05 | - | | | SUBCMD | 1 | 0 | - | #### 0x07 固件升级 | 方向 | 字段 | 长度（Byte） | 描述 | 备注 | |------|------|--------------|------|------| | 下发（COMINFO） | CMD | 2 | 0x07 | - | | | SUBCMD | 1 | 0 | - | | | 升级包总数 | 2 | - | - | | | 每个分包大小 | 2 | 不足补0 | - | | | 当前升级包序号 | 2 | 从1开始 | - | | | 是否重启设备 | 1 | 0-不重启，1-重启（最后一包） | - | | | 升级包数据 | N | - | - | | 响应（DATAINFO） | CMD | 2 | 0x07 | - | | | SUBCMD | 1 | 0 | - | | | 当前收到的升级包序号 | 2 | - | - | | | 期望下一升级包序号 | 2 | - | - | #### 0x08 设置本机有线网络参数 | 方向 | 字段 | 长度（Byte） | 描述 | 备注 | |------|------|--------------|------|------| | 下发（COMINFO） | CMD | 2 | 0x08 | - | | | SUBCMD | 1 | 0 | - | | | 模式 | 1 | 0-正常模式，1-测试模式 | - | | | IP地址 | 4 | - | - | | | 子网掩码 | 4 | - | - | | | 网关 | 4 | - | - | | 响应（DATAINFO） | CMD | 2 | 0x08 | - | | | SUBCMD | 1 | 0 | - | #### 0x09 读取本机有线网络参数 | 方向 | 字段 | 长度（Byte） | 描述 | 备注 | |------|------|--------------|------|------| | 下发（COMINFO） | CMD | 2 | 0x09 | - | | | SUBCMD | 1 | 0 | - | | | 模式 | 1 | 0-正常模式，1-测试模式 | - | | 响应（DATAINFO） | CMD | 2 | 0x09 | - | | | SUBCMD | 1 | 0 | - | | | 模式 | 1 | 0-正常模式，1-测试模式 | - | | | IP地址 | 4 | - | - | | | 子网掩码 | 4 | - | - | | | 网关 | 4 | - | - | #### 0x0A 设置以太网MAC地址 | 方向 | 字段 | 长度（Byte） | 描述 | 备注 | |------|------|--------------|------|------| | 下发（COMINFO） | CMD | 2 | 0x0A | - | | | SUBCMD | 1 | 0 | - | | | MAC地址 | 6 | - | - | | 响应（DATAINFO） | CMD | 2 | 0x0A | - | | | SUBCMD | 1 | 0 | - | #### 0x0B 读取以太网MAC地址 | 方向 | 字段 | 长度（Byte） | 描述 | 备注 | |------|------|--------------|------|------| | 下发（COMINFO） | CMD | 2 | 0x0B | - | | | SUBCMD | 1 | 0 | - | | 响应（DATAINFO） | CMD | 2 | 0x0B | - | | | SUBCMD | 1 | 0 | - | | | MAC地址 | 6 | - | - | #### 0x0C 设置DO输出 | 方向 | 字段 | 长度（Byte） | 描述 | 备注 | |------|------|--------------|------|------| | 下发（COMINFO） | CMD | 2 | 0x0C | - | | | SUBCMD | 1 | 0 | - | | | 同时设置的DO数 | 1 | - | - | | | DO号 | 1 | - | 可重复 | | | 输出状态 | 1 | 0-打开，1-闭合 | 可重复 | | | 预留 | 2 | - | 可重复 | | 响应（DATAINFO） | CMD | 2 | 0x0C | - | | | SUBCMD | 1 | 0 | - | #### 0x0D 读取DO输出 | 方向 | 字段 | 长度（Byte） | 描述 | 备注 | |------|------|--------------|------|------| | 下发（COMINFO） | CMD | 2 | 0x0D | - | | | SUBCMD | 1 | 0 | - | | | 同时读取的DO数 | 1 | - | - | | 响应（DATAINFO） | CMD | 2 | 0x0D | - | | | SUBCMD | 1 | 0 | - | | | 同时读取的DO数 | 1 | - | - | | | DO号 | 1 | - | 可重复 | | | 输出状态 | 1 | 0-打开，1-闭合 | 可重复 | | | 预留 | 2 | - | 可重复 | #### 0x0E 设置串口参数 | 方向 | 字段 | 长度（Byte） | 描述 | 备注 | |------|------|--------------|------|------| | 下发（COMINFO） | CMD | 2 | 0x0E | - | | | SUBCMD | 1 | 0 | - | | | 串口号 | 1 | - | - | | | 波特率 | 4 | - | - | | | 数据位数 | 1 | - | - | | | 停止位数 | 1 | 10-1位，15-1.5位，20-2位 | - | | | 奇偶校验位 | 1 | 0-无校验，1-奇校验，2-偶校验 | - | | 响应（DATAINFO） | CMD | 2 | 0x0E | - | | | SUBCMD | 1 | 0 | - | #### 0x0F 读取串口参数 | 方向 | 字段 | 长度（Byte） | 描述 | 备注 | |------|------|--------------|------|------| | 下发（COMINFO） | CMD | 2 | 0x0F | - | | | SUBCMD | 1 | 0 | - | | | 串口号 | 1 | - | - | | 响应（DATAINFO） | CMD | 2 | 0x0F | - | | | SUBCMD | 1 | 0 | - | | | 串口号 | 1 | - | - | | | 波特率 | 4 | - | - | | | 数据位数 | 1 | - | - | | | 停止位数 | 1 | 10-1位，15-1.5位，20-2位 | - | | | 奇偶校验位 | 1 | 0-无校验，1-奇校验，2-偶校验 | - | #### 0x10 按时间读取告警记录序号 | 方向 | 字段 | 长度（Byte） | 描述 | 备注 | |------|------|--------------|------|------| | 下发（COMINFO） | CMD | 2 | 0x10 | - | | | SUBCMD | 1 | 0 | - | | | 保留 | 1 | - | - | | | 起始时间 | 6 | 年月日时分秒（各1字节） | 年份从2000起算 | | | 结束时间 | 6 | 年月日时分秒（各1字节） | 年份从2000起算 | | 响应（DATAINFO） | CMD | 2 | 0x10 | - | | | SUBCMD | 1 | 0 | - | | | 数量 | 4 | - | - | | | 起始序号 | 4 | - | - | | | 结束序号 | 4 | - | - | | | 最大记录数量 | 4 | - | - | #### 0x11 读取告警记录统计信息 | 方向 | 字段 | 长度（Byte） | 描述 | 备注 | |------|------|--------------|------|------| | 下发（COMINFO） | CMD | 2 | 0x11 | - | | | SUBCMD | 1 | 0 | - | | 响应（DATAINFO） | CMD | 2 | 0x11 | - | | | SUBCMD | 1 | 0 | - | | | 数量 | 4 | - | - | | | 起始序号 | 4 | - | - | | | 结束序号 | 4 | - | - | | | 最大记录数量 | 4 | - | - | #### 0x12 读取告警记录 | 方向 | 字段 | 长度（Byte） | 描述 | 备注 | |------|------|--------------|------|------| | 下发（COMINFO） | CMD | 2 | 0x12 | - | | | SUBCMD | 1 | 0 | - | | | 方式 | 1 | 0-起始序号+数量，1-起始序号+结束序号（暂不实现） | - | | | 保留 | 1 | - | - | | | 起始序号 | 4 | - | - | | | 结束序号 | 4 | 方式1时有效 | - | | | 数量 | 4 | 方式0时有效 | - | | 响应（DATAINFO） | CMD | 2 | 0x12 | - | | | SUBCMD | 1 | 0 | - | | | 记录数量 | 4 | - | - | | | 起始序号 | 4 | - | - | | | 结束序号 | 4 | - | - | | | 告警时间 | 6 | 年月日时分秒（各1字节） | 年份从2000起算，可重复 | | | 输入通道号 | 1 | DI/门磁通道号（1开始） | 可重复 | | | 告警通道类型 | 1 | - | 可重复 | | | 告警类型号 | 1 | 同类型序号（1开始） | 可重复 | | | 告警状态 | 1 | 0-无告警，1-有告警 | 可重复 | **注**：一次最多读取10条记录 #### 0x13 清除告警记录 | 方向 | 字段 | 长度（Byte） | 描述 | 备注 | |------|------|--------------|------|------| | 下发（COMINFO） | CMD | 2 | 0x13 | - | | | SUBCMD | 1 | 0 | - | | 响应（DATAINFO） | CMD | 2 | 0x13 | - | | | SUBCMD | 1 | 0 | - | #### 0x14 恢复出厂设置 | 方向 | 字段 | 长度（Byte） | 描述 | 备注 | |------|------|--------------|------|------| | 下发（COMINFO） | CMD | 2 | 0x14 | - | | | SUBCMD | 1 | 0 | - | | | 魔数 | 1 | 固定为123 | - | | | 等级 | 1 | 位0-固定参数，位1-其他参数，位2-其他数据 | - | | | 是否重启设备 | 1 | 0-不重启，1-重启 | - | | 响应（DATAINFO） | CMD | 2 | 0x14 | - | | | SUBCMD | 1 | 0 | - | #### 0x15 增加/修改用户 | 方向 | 字段 | 长度（Byte） | 描述 | 备注 | |------|------|--------------|------|------| | 下发（COMINFO） | CMD | 2 | 0x15 | - | | | SUBCMD | 1 | 0 | - | | | 用户数量 | 1 | 1-10 | - | | | 卡类型和长度 | 1 | bit[7:4]-卡类型，bit[3:0]-卡号长度 | 卡类型：0-普通卡，5-巡更卡，6-胁迫卡 | | | 卡号 | 10 | 不足补0 | 可重复 | | | 指纹类型和长度 | 1 | bit[7:4]-类型，bit[3:0]-长度 | 无指纹填0，可重复 | | | 指纹号 | 10 | 不足补0 | 可重复 | | | 有效期开始 | 2 | 年（bit15-9），月（bit8-5），日（bit4-0） | 年份从2000起算，可重复 | | | 有效期结束 | 2 | 年（bit15-9），月（bit8-5），日（bit4-0） | 年份从2000起算，可重复 | | | 使用次数 | 2 | 1-1000，0xFFFF-无限次 | 可重复 | | | 授权的门（掩码） | 1 | 每位对应1个门（bit0-门1，bit1-门2...） | 可重复 | | | 用户权限和准进时段表索引 | 1 | bit[7:4]-权限，bit[3:0]-索引 | 可重复 | | | 保留 | 1 | 填充0 | 可重复 | | 响应（DATAINFO） | CMD | 2 | 0x15 | - | | | SUBCMD | 1 | 0 | - | | | 用户数量 | 1 | 实际增加/修改数量 | - | #### 0x16 删除用户 | 方向 | 字段 | 长度（Byte） | 描述 | 备注 | |------|------|--------------|------|------| | 下发（COMINFO） | CMD | 2 | 0x16 | - | | | SUBCMD | 1 | 0 | - | | | 用户数量 | 1 | 1-10 | - | | | 卡类型和长度 | 1 | bit[7:4]-卡类型，bit[3:0]-卡号长度 | 无卡号填0，可重复 | | | 卡号 | 10 | 不足补0 | 可重复 | | | 指纹类型和长度 | 1 | bit[7:4]-类型，bit[3:0]-长度 | 无指纹填0，可重复 | | | 指纹号 | 10 | 不足补0 | 可重复 | | | 保留 | 1 | 填充0 | 可重复 | | 响应（DATAINFO） | CMD | 2 | 0x16 | - | | | SUBCMD | 1 | 0 | - | | | 用户数量 | 1 | 实际删除数量 | - | #### 0x17 设置准进时段表 | 方向 | 字段 | 长度（Byte） | 描述 | 备注 | |------|------|--------------|------|------| | 下发（COMINFO） | CMD | 2 | 0x17 | - | | | SUBCMD | 1 | 0 | - | | | 表索引 | 1 | 0-5 | - | | | 准进时段表 | 168 | 按星期设置时段 | - | | 响应（DATAINFO） | CMD | 2 | 0x17 | - | | | SUBCMD | 1 | 0 | - | #### 0x18 读取准进时段表 | 方向 | 字段 | 长度（Byte） | 描述 | 备注 | |------|------|--------------|------|------| | 下发（COMINFO） | CMD | 2 | 0x18 | - | | | SUBCMD | 1 | 0 | - | | | 表索引 | 1 | 0-5 | - | | 响应（DATAINFO） | CMD | 2 | 0x18 | - | | | SUBCMD | 1 | 0 | - | | | 表索引 | 1 | 0-5 | - | | | 准进时段表 | 168 | 按星期设置时段 | - | #### 0x19 设置读卡器参数 | 方向 | 字段 | 长度（Byte） | 描述 | 备注 | |------|------|--------------|------|------| | 下发（COMINFO） | CMD | 2 | 0x19 | - | | | SUBCMD | 1 | 0 | - | | | 读卡器数量 | 1 | - | - | | | 门号 | 1 | 1-4 | 可重复 | | 响应（DATAINFO） | CMD | 2 | 0x19 | - | | | SUBCMD | 1 | 0 | - | #### 0x1A 读取读卡器参数 | 方向 | 字段 | 长度（Byte） | 描述 | 备注 | |------|------|--------------|------|------| | 下发（COMINFO） | CMD | 2 | 0x1A | - | | | SUBCMD | 1 | 0 | - | | | 读卡器数量 | 1 | - | - | | 响应（DATAINFO） | CMD | 2 | 0x1A | - | | | SUBCMD | 1 | 0 | - | | | 读卡器数量 | 1 | - | - | | | 门号 | 1 | 1-4 | 可重复 | #### 0x1B 设置门参数 | 方向 | 字段 | 长度（Byte） | 描述 | 备注 | |------|------|--------------|------|------| | 下发（COMINFO） | CMD | 2 | 0x1B | - | | | SUBCMD | 1 | 0 | - | | | 保留 | 1 | 0 | - | | | 门号 | 1 | 1-4 | 可重复 | | | 开门方式 | 1 | 0-保留，1-单卡/指纹/密码，2-多卡，3-多指纹，4-组合 | 可重复 | | | 密码 | 11 | 带'\0'结尾字符串，不足补0 | 可重复 | | | 启用首卡开门 | 1 | 0-禁用，1-启用 | 可重复 | | | 首卡卡号长度 | 1 | - | 可重复 | | | 首卡卡号 | 10 | 不足补0 | 可重复 | | | 多卡开门卡数量 | 1 | 0-5 | 可重复 | | | 多卡开门卡号长度和卡号 | 55 | 5张卡信息 | 可重复 | | | 多卡开门刷卡超时时间 | 1 | 5-30秒 | 可重复 | | | 多指纹开门指纹数量 | 1 | 0-5 | 可重复 | | | 多指纹开门指纹号长度和指纹号 | 55 | 5个指纹信息 | 可重复 | | | 多指纹开门刷指纹超时时间 | 1 | 5-30秒 | 可重复 | | | 组合开门标志 | 1 | bit0-卡，bit1-密码，bit2-指纹 | 可重复 | | | 组合开门超时时间 | 1 | 5-30秒 | 可重复 | | 响应（DATAINFO） | CMD | 2 | 0x1B | - | | | SUBCMD | 1 | 0 | - | #### 0x1C 读取门参数 | 方向 | 字段 | 长度（Byte） | 描述 | 备注 | |------|------|--------------|------|------| | 下发（COMINFO） | CMD | 2 | 0x1C | - | | | SUBCMD | 1 | 0 | - | | | 保留 | 1 | 0 | - | | | 门号 | 1 | 1-4 | - | | 响应（DATAINFO） | CMD | 2 | 0x1C | - | | | SUBCMD | 1 | 0 | - | | | 保留 | 1 | 0 | - | | | 门号 | 1 | 1-4 | - | | | 开门方式 | 1 | 同设置命令 | - | | | 密码 | 11 | 带'\0'结尾字符串，不足补0 | - | | | 启用首卡开门 | 1 | 0-禁用，1-启用 | - | | | 首卡卡号长度 | 1 | - | - | | | 首卡卡号 | 10 | 不足补0 | - | | | 多卡开门卡数量 | 1 | 0-5 | - | | | 多卡开门卡号长度和卡号 | 55 | 5张卡信息 | - | | | 多卡开门刷卡超时时间 | 1 | 5-30秒 | - | | | 多指纹开门指纹数量 | 1 | 0-5 | - | | | 多指纹开门指纹号长度和指纹号 | 55 | 5个指纹信息 | - | | | 多指纹开门刷指纹超时时间 | 1 | 5-30秒 | - | | | 组合开门标志 | 1 | bit0-卡，bit1-密码，bit2-指纹 | - | | | 组合开门超时时间 | 1 | 5-30秒 | - | #### 0x1D 设置DI告警参数 | 方向 | 字段 | 长度（Byte） | 描述 | 备注 | |------|------|--------------|------|------| | 下发（COMINFO） | CMD | 2 | 0x1D | - | | | SUBCMD | 1 | 0 | - | | | 通道类型 | 1 | - | 可重复 | | | 告警极性 | 1 | 0-反相（低电平告警），1-同相（高电平告警） | 可重复 | | | 联动DO号 | 4 | 1-4，最多联动4个 | 可重复 | | | 联动锁号 | 4 | 1-4，最多联动4个 | 可重复 | | 响应（DATAINFO） | CMD | 2 | 0x1D | - | | | SUBCMD | 1 | 0 | - | **注**：支持4路辅助DI输入、4路虚拟通道、1路火警，共9次重复 #### 0x1E 读取DI告警参数 | 方向 | 字段 | 长度（Byte） | 描述 | 备注 | |------|------|--------------|------|------| | 下发（COMINFO） | CMD | 2 | 0x1E | - | | | SUBCMD | 1 | 0 | - | | 响应（DATAINFO） | CMD | 2 | 0x1E | - | | | SUBCMD | 1 | 0 | - | | | 通道类型 | 1 | - | 可重复 | | | 告警极性 | 1 | 0-反相，1-同相 | 可重复 | | | 联动DO号 | 4 | 1-4 | 可重复 | | | 联动锁号 | 4 | 1-4 | 可重复 | **注**：支持4路辅助DI输入、4路虚拟通道，共8次重复 #### 0x20 远程开门 | 方向 | 字段 | 长度（Byte） | 描述 | 备注 | |------|------|--------------|------|------| | 下发（COMINFO） | CMD | 2 | 0x20 | - | | | SUBCMD | 1 | 0 | - | | | 门（掩码） | 1 | 每位对应1个门（bit0-门1，bit1-门2...） | - | | 响应（DATAINFO） | CMD | 2 | 0x01 | - | | | SUBCMD | 1 | 0 | - | #### 0x21 强制开关门 | 方向 | 字段 | 长度（Byte） | 描述 | 备注 | |------|------|--------------|------|------| | 下发（COMINFO） | CMD | 2 | 0x21 | - | | | SUBCMD | 1 | 0 | - | | | 门号 | 1 | 1-4 | 可重复 | | | 门状态 | 1 | 0-强制关门，1-强制开门，2-不强制输出 | 可重复 | | 响应（DATAINFO） | CMD | 2 | 0x01 | - | | | SUBCMD | 1 | 0 | - | #### 0x22 设置辅助DO参数 | 方向 | 字段 | 长度（Byte） | 描述 | 备注 | |------|------|--------------|------|------| | 下发（COMINFO） | CMD | 2 | 0x22 | - | | | SUBCMD | 1 | 0 | - | | | 输出类型 | 1 | 0-电平型，1-脉冲型 | 可重复 | | | 输出极性 | 1 | 0-反相（断开有效），1-同相（闭合有效） | 可重复 | | | 脉冲宽度 | 4 | 单位：ms | 可重复 | | 响应（DATAINFO） | CMD | 2 | 0x01 | - | | | SUBCMD | 1 | 0 | - | **注**：4个辅助DO，重复4次 #### 0x23 读取辅助DO参数 | 方向 | 字段 | 长度（Byte） | 描述 | 备注 | |------|------|--------------|------|------| | 下发（COMINFO） | CMD | 2 | 0x23 | - | | | SUBCMD | 1 | 0 | - | | 响应（DATAINFO） | CMD | 2 | 0x23 | - | | | SUBCMD | 1 | 0 | - | | | 输出类型 | 1 | 0-电平型，1-脉冲型 | 可重复 | | | 输出极性 | 1 | 0-反相，1-同相 | 可重复 | | | 脉冲宽度 | 4 | 单位：ms | 可重复 | **注**：4个辅助DO，重复4次 #### 0x24 设置控锁DO参数 | 方向 | 字段 | 长度（Byte） | 描述 | 备注 | |------|------|--------------|------|------| | 下发（COMINFO） | CMD | 2 | 0x24 | - | | | SUBCMD | 1 | 0 | - | | | 输出类型 | 1 | 0-电平型，1-脉冲型 | 可重复 | | | 输出极性 | 1 | 0-反相（断开有效），1-同相（闭合有效） | 可重复 | | | 脉冲宽度 | 4 | 单位：ms | 可重复 | | 响应（DATAINFO） | CMD | 2 | 0x01 | - | | | SUBCMD | 1 | 0 | - | **注**：4个控锁DO，重复4次 #### 0x25 读取控锁DO参数 | 方向 | 字段 | 长度（Byte） | 描述 | 备注 | |------|------|--------------|------|------| | 下发（COMINFO） | CMD | 2 | 0x25 | - | | | SUBCMD | 1 | 0 | - | | 响应（DATAINFO） | CMD | 2 | 0x25 | - | | | SUBCMD | 1 | 0 | - | | | 输出类型 | 1 | 0-电平型，1-脉冲型 | 可重复 | | | 输出极性 | 1 | 0-反相，1-同相 | 可重复 | | | 脉冲宽度 | 4 | 单位：ms | 可重复 | **注**：4个控锁DO，重复4次 #### 0x26 设置门禁参数 | 方向 | 字段 | 长度（Byte） | 描述 | 备注 | |------|------|--------------|------|------| | 下发（COMINFO） | CMD | 2 | 0x26 | - | | | SUBCMD | 1 | 0 | - | | | 进门开门超时 | 4 | 单位：秒 | 可重复 | | | 撤防超时 | 4 | 单位：秒 | 可重复 | | | 出门开门超时 | 4 | 单位：秒 | 可重复 | | | 出门关门超时 | 4 | 单位：秒 | 可重复 | | | 开门超时提示时间 | 4 | 单位：秒 | 可重复 | | | 开门超时时间 | 4 | 单位：秒 | 可重复 | | | 非法开门告警保持时间 | 4 | 单位：秒 | 可重复 | | | 传感器监视延时 | 4 | - | 可重复 | | 响应（DATAINFO） | CMD | 2 | 0x01 | - | | | SUBCMD | 1 | 0 | - | **注**：4个门，重复4次 #### 0x27 读取门禁参数 | 方向 | 字段 | 长度（Byte） | 描述 | 备注 | |------|------|--------------|------|------| | 下发（COMINFO） | CMD | 2 | 0x27 | - | | | SUBCMD | 1 | 0 | - | | 响应（DATAINFO） | CMD | 2 | 0x27 | - | | | SUBCMD | 1 | 0 | - | | | 进门开门超时 | 4 | 单位：秒 | 可重复 | | | 撤防超时 | 4 | 单位：秒 | 可重复 | | | 出门开门超时 | 4 | 单位：秒 | 可重复 | | | 出门关门超时 | 4 | 单位：秒 | 可重复 | | | 开门超时提示时间 | 4 | 单位：秒 | 可重复 | | | 开门超时时间 | 4 | 单位：秒 | 可重复 | | | 非法开门告警保持时间 | 4 | 单位：秒 | 可重复 | | | 传感器监视延时 | 4 | - | 可重复 | **注**：4个门，重复4次 #### 0x28 按时间读取事件记录序号 | 方向 | 字段 | 长度（Byte） | 描述 | 备注 | |------|------|--------------|------|------| | 下发（COMINFO） | CMD | 2 | 0x28 | - | | | SUBCMD | 1 | 0 | - | | | 保留 | 1 | - | - | | | 起始时间 | 6 | 年月日时分秒（各1字节） | 年份从2000起算 | | | 结束时间 | 6 | 年月日时分秒（各1字节） | 年份从2000起算 | | 响应（DATAINFO） | CMD | 2 | 0x28 | - | | | SUBCMD | 1 | 0 | - | | | 数量 | 4 | - | - | | | 起始序号 | 4 | - | - | | | 结束序号 | 4 | - | - | | | 最大记录数量 | 4 | - | - | #### 0x29 读取事件记录统计信息 | 方向 | 字段 | 长度（Byte） | 描述 | 备注 | |------|------|--------------|------|------| | 下发（COMINFO） | CMD | 2 | 0x29 | - | | | SUBCMD | 1 | 0 | - | | 响应（DATAINFO） | CMD | 2 | 0x29 | - | | | SUBCMD | 1 | 0 | - | | | 数量 | 4 | - | - | | | 起始序号 | 4 | - | - | | | 结束序号 | 4 | - | - | | | 最大记录数量 | 4 | - | - | #### 0x2A 读取事件记录 | 方向 | 字段 | 长度（Byte） | 描述 | 备注 | |------|------|--------------|------|------| | 下发（COMINFO） | CMD | 2 | 0x2A | - | | | SUBCMD | 1 | 0 | - | | | 方式 | 1 | 0-起始序号+数量，1-起始序号+结束序号（暂不实现） | - | | | 保留 | 1 | - | - | | | 起始序号 | 4 | - | - | | | 结束序号 | 4 | 方式1时有效 | - | | | 数量 | 4 | 方式0时有效 | - | | 响应（DATAINFO） | CMD | 2 | 0x2A | - | | | SUBCMD | 1 | 0 | - | | | 记录数量 | 4 | - | - | | | 起始序号 | 4 | - | - | | | 结束序号 | 4 | - | - | | | 记录时间 | 6 | 年月日时分秒（各1字节） | 年份从2000起算，可重复 | | | 事件ID | 1 | 事件类型ID+开门方式ID | 可重复 | | | 门号 | 1 | 1-4 | 可重复 | | | 开门方式记录信息 | - | 详见下表 | 只有进门事件有该字段，可重复 | **注**：一次最多读取10条记录 ##### 事件ID定义 | 事件类型 | 事件ID范围 | 事件类型ID | 开门方式ID | 说明 | |----------|------------|------------|------------|------| | 进门开门 | 0x01-0x08 | 0x00 | 0x01-0x08 | 0x01-单卡，0x02-单指纹，0x03-单密码，0x04-远程，0x05-二维码，0x06-多卡，0x07-多指纹，0x08-组合 | | 进门未开门 | 0x11-0x18 | 0x10 | 0x01-0x08 | 同开门方式ID定义 | | 进门开门超时提示 | 0x21-0x28 | 0x20 | 0x01-0x08 | 同开门方式ID定义 | | 出门按钮事件 | 0x41-0x44 | 0x01-0x04 | 0x40 | 0x01-开门，0x02-未开门，0x03-未关门，0x04-开门超时提示 | | 非法卡事件 | 0x51-0x55 | 0x01-0x05 | 0x50 | 0x01-未授权卡，0x02-过期卡，0x03-未授权该门，0x04-无次数卡，0x05-不在准进时段 | | 设备重启 | 0x60 | - | - | 设备重启 | | 恢复默认参数 | 0x61 | - | - | 恢复出厂设置 | | 操作记录 | 0x70 | - | - | 系统操作记录 | ##### 开门方式记录信息 | 开门方式 | 字段 | 长度（Byte） | 描述 | |----------|------|--------------|------| | 单卡 | 卡类型和长度 | 1 | bit[7:4]-类型，bit[3:0]-卡号长度 | | | 卡号 | 10 | 不足补0 | | 单指纹 | 指纹类型和长度 | 1 | bit[7:4]-类型，bit[3:0]-指纹长度 | | | 指纹号码 | 10 | 不足补0 | | 单密码 | 密码 | 11 | - | | 远程 | 源IP地址 | 4 | - | | 二维码 | - | - | 无相关字段 | | 多卡 | - | - | 无相关字段 | | 多指纹 | - | - | 无相关字段 | | 组合方式 | 组合标志 | 1 | bit0-卡，bit1-密码，bit2-指纹 | #### 0x2B 清除事件记录 | 方向 | 字段 | 长度（Byte） | 描述 | 备注 | |------|------|--------------|------|------| | 下发（COMINFO） | CMD | 2 | 0x2B | - | | | SUBCMD | 1 | 0 | - | | 响应（DATAINFO） | CMD | 2 | 0x2B | - | | | SUBCMD | 1 | 0 | - | #### 0x31 设置平台参数 | 方向 | 字段 | 长度（Byte） | 描述 | 备注 | |------|------|--------------|------|------| | 下发（COMINFO） | CMD | 2 | 0x31 | - | | | SUBCMD | 1 | 0 | - | | | FSUID | 20 | 不足补0 | - | | | 本机端口 | 2 | - | - | | | 平台IP地址 | 4 | - | - | | | 平台端口 | 2 | - | - | | | 心跳周期 | 2 | 单位：秒 | - | | | 启用心跳 | 1 | 0-不启用，1-启用 | - | | 响应（DATAINFO） | CMD | 2 | 0x31 | - | | | SUBCMD | 1 | 0 | - | #### 0x32 读取平台参数 | 方向 | 字段 | 长度（Byte） | 描述 | 备注 | |------|------|--------------|------|------| | 下发（COMINFO） | CMD | 2 | 0x32 | - | | | SUBCMD | 1 | 0 | - | | 响应（DATAINFO） | CMD | 2 | 0x32 | - | | | SUBCMD | 1 | 0 | - | | | FSUID | 20 | 不足补0 | - | | | 本机端口 | 2 | - | - | | | 平台IP地址 | 4 | - | - | | | 平台端口 | 2 | - | - | | | 心跳周期 | 2 | 单位：秒 | - | | | 启用心跳 | 1 | 0-不启用，1-启用 | - | #### 0x33 设置上行485地址ADR | 方向 | 字段 | 长度（Byte） | 描述 | 备注 | |------|------|--------------|------|------| | 下发（COMINFO） | CMD | 2 | 0x33 | - | | | SUBCMD | 1 | 0 | - | | | 地址 | 1 | 1-254，默认0 | - | | 响应（DATAINFO） | CMD | 2 | 0x33 | - | | | SUBCMD | 1 | 0 | - | #### 0x34 读取上行485地址ADR | 方向 | 字段 | 长度（Byte） | 描述 | 备注 | |------|------|--------------|------|------| | 下发（COMINFO） | CMD | 2 | 0x34 | - | | | SUBCMD | 1 | 0 | - | | 响应（DATAINFO） | CMD | 2 | 0x34 | - | | | SUBCMD | 1 | 0 | - | | | 地址 | 1 | 1-254，默认0 | - | #### 0x35 读取告警状态 | 方向 | 字段 | 长度（Byte） | 描述 | 备注 | |------|------|--------------|------|------| | 下发（COMINFO） | CMD | 2 | 0x35 | - | | | SUBCMD | 1 | 0 | - | | 响应（DATAINFO） | CMD | 2 | 0x35 | - | | | SUBCMD | 1 | 0 | - | | | 数量 | 1 | - | - | | | 输入通道号 | 1 | DI/门磁通道号（1开始） | 可重复 | | | 告警通道类型 | 1 | 0-无，10-盗情，15-红外，18-防盗，90-非法开门，91-火灾，92-门禁箱开门，93-开门超时提示，94-开门超时，95-胁迫告警 | 可重复 | | | 告警类型号 | 1 | 同类型序号（1开始） | 可重复 | | | 告警状态 | 1 | 0-无告警，1-有告警 | 可重复 | #### 0x36 设置告警参数 | 方向 | 字段 | 长度（Byte） | 描述 | 备注 | |------|------|--------------|------|------| | 下发（COMINFO） | CMD | 2 | 0x36 | - | | | SUBCMD | 1 | 0 | - | | | 盗情保持时间 | 4 | - | - | | 响应（DATAINFO） | CMD | 2 | 0x36 | - | | | SUBCMD | 1 | 0 | - | #### 0x37 读取告警参数 | 方向 | 字段 | 长度（Byte） | 描述 | 备注 | |------|------|--------------|------|------| | 下发（COMINFO） | CMD | 2 | 0x37 | - | | | SUBCMD | 1 | 0 | - | | 响应（DATAINFO） | CMD | 2 | 0x37 | - | | | SUBCMD | 1 | 0 | - | | | 盗情保持时间 | 4 | - | - | #### 0x38 设置防盗参数 | 方向 | 字段 | 长度（Byte） | 描述 | 备注 | |------|------|--------------|------|------| | 下发（COMINFO） | CMD | 2 | 0x38 | - | | | SUBCMD | 1 | 0 | - | | | 有效时间 | 2 | 单位：ms | 可重复 | | | 有效次数 | 1 | - | 可重复 | | | 每2次之间的最大间隔 | 2 | 单位：秒 | 可重复 | | | 保持时间 | 4 | 单位：秒 | 可重复 | | 响应（DATAINFO） | CMD | 2 | 0x38 | - | | | SUBCMD | 1 | 0 | - | **注**：重复4次 #### 0x39 读取防盗参数 | 方向 | 字段 | 长度（Byte） | 描述 | 备注 | |------|------|--------------|------|------| | 下发（COMINFO） | CMD | 2 | 0x39 | - | | | SUBCMD | 1 | 0 | - | | 响应（DATAINFO） | CMD | 2 | 0x39 | - | | | SUBCMD | 1 | 0 | - | | | 有效时间 | 2 | 单位：ms | 可重复 | | | 有效次数 | 1 | - | 可重复 | | | 每2次之间的最大间隔 | 2 | 单位：秒 | 可重复 | | | 保持时间 | 4 | 单位：秒 | 可重复 | **注**：重复4次 #### 0x3A 读取用户数量 | 方向 | 字段 | 长度（Byte） | 描述 | 备注 | |------|------|--------------|------|------| | 下发（COMINFO） | CMD | 2 | 0x3A | - | | | SUBCMD | 1 | 0 | - | | 响应（DATAINFO） | CMD | 2 | 0x3A | - | | | SUBCMD | 1 | 0 | - | | | 用户数量 | 4 | - | - | #### 0x3B 读取用户 | 方向 | 字段 | 长度（Byte） | 描述 | 备注 | |------|------|--------------|------|------| | 下发（COMINFO） | CMD | 2 | 0x3B | - | | | SUBCMD | 1 | 0 | - | | | 方式 | 1 | 0-起始序号+数量，1-起始序号+结束序号 | - | | | 保留 | 1 | - | - | | | 起始序号 | 4 | - | - | | | 结束序号 | 4 | 方式1时有效 | - | | | 数量 | 4 | 方式0时有效 | - | | 响应（DATAINFO） | CMD | 2 | 0x3B | - | | | SUBCMD | 1 | 0 | - | | | 数量 | 4 | - | - | | | 起始序号 | 4 | - | - | | | 结束序号 | 4 | - | - | | | 卡类型和长度 | 1 | bit[7:4]-卡类型，bit[3:0]-卡号长度 | 可重复 | | | 卡号 | 10 | 不足补0 | 可重复 | | | 指纹类型和长度 | 1 | bit[7:4]-类型，bit[3:0]-长度 | 可重复 | | | 指纹号 | 10 | 不足补0 | 可重复 | | | 有效期开始 | 2 | 年（bit15-9），月（bit8-5），日（bit4-0） | 可重复 | | | 有效期结束 | 2 | 年（bit15-9），月（bit8-5），日（bit4-0） | 可重复 | | | 使用次数 | 2 | 1-1000，0xFFFF-无限次 | 可重复 | | | 授权的门（掩码） | 1 | 每位对应1个门 | 可重复 | | | 用户权限和准进时段表索引 | 1 | bit[7:4]-权限，bit[3:0]-索引 | 可重复 | | | 校验 | 1 | - | 可重复 | | | 保留 | 1 | 填充0 | 可重复 | #### 0x3C 删除所有用户 | 方向 | 字段 | 长度（Byte） | 描述 | 备注 | |------|------|--------------|------|------| | 下发（COMINFO） | CMD | 2 | 0x3C | - | | | SUBCMD | 1 | 0 | - | | 响应（DATAINFO） | CMD | 2 | 0x3C | - | | | SUBCMD | 1 | 0 | - | #### 0x3D 设置登录鉴权参数 | 方向 | 字段 | 长度（Byte） | 描述 | 备注 | |------|------|--------------|------|------| | 下发（COMINFO） | CMD | 2 | 0x3D | - | | | SUBCMD | 1 | 0 | - | | | 登录用户名 | 10 | 最多10字符，不足补0 | - | | | 登录密码 | 20 | 最多20字符，不足补0 | - | | 响应（DATAINFO） | CMD | 2 | 0x3D | - | | | SUBCMD | 1 | 0 | - | #### 0x3E 读取登录鉴权参数 | 方向 | 字段 | 长度（Byte） | 描述 | 备注 | |------|------|--------------|------|------| | 下发（COMINFO） | CMD | 2 | 0x3E | - | | | SUBCMD | 1 | 0 | - | | 响应（DATAINFO） | CMD | 2 | 0x3E | - | | | SUBCMD | 1 | 0 | - | | | 登录用户名 | 10 | 最多10字符，不足补0 | - | | | 登录密码 | 20 | 最多20字符，不足补0 | - | #### 0x3F 登录鉴权 | 方向 | 字段 | 长度（Byte） | 描述 | 备注 | |------|------|--------------|------|------| | 下发（COMINFO） | CMD | 2 | 0x3F | - | | | SUBCMD | 1 | 0 | - | | | 登录用户名 | 10 | 最多10字符，不足补0 | - | | | 登录密码 | 20 | 最多20字符，不足补0 | - | | 响应（DATAINFO） | CMD | 2 | 0x3F | - | | | SUBCMD | 1 | 0 | - | | | 鉴权结果 | 1 | 0-成功，1-失败 | - | #### 0x40 读取门强制状态 | 方向 | 字段 | 长度（Byte） | 描述 | 备注 | |------|------|--------------|------|------| | 下发（COMINFO） | CMD | 2 | 0x40 | - | | | SUBCMD | 1 | 0 | - | | 响应（DATAINFO） | CMD | 2 | 0x01 | - | | | SUBCMD | 1 | 0 | - | | | 门号 | 1 | 1-4 | 可重复 | | | 门状态 | 1 | 0-强制关门，1-强制开门，2-不强制输出 | 可重复 | #### 0x41 读取DI输入状态 | 方向 | 字段 | 长度（Byte） | 描述 | 备注 | |------|------|--------------|------|------| | 下发（COMINFO） | CMD | 2 | 0x41 | - | | | SUBCMD | 1 | 0 | - | | 响应（DATAINFO） | CMD | 2 | 0x01 | - | | | SUBCMD | 1 | 0 | - | | | DI通道 | 1 | 0-13（0-火警，1-辅助1，5-门磁1...13-开箱检测） | 可重复 | | | 通道状态 | 1 | 0-低电平，1-高电平 | 可重复 | **注**：重复14次（对应14个DI通道） #### 0x42 读取最新事件记录 | 方向 | 字段 | 长度（Byte） | 描述 | 备注 | |------|------|--------------|------|------| | 下发（COMINFO） | CMD | 2 | 0x42 | - | | | SUBCMD | 1 | 0 | - | | 响应（DATAINFO） | CMD | 2 | 0x42 | - | | | SUBCMD | 1 | 0 | - | | | 记录数量 | 4 | - | - | | | 起始序号 | 4 | - | - | | | 结束序号 | 4 | - | - | | | 记录时间 | 6 | 年月日时分秒（各1字节） | 年份从2000起算，可重复 | | | 事件ID | 1 | 事件类型ID+开门方式ID | 可重复 | | | 门号 | 1 | 1-4 | 可重复 | | | 开门方式记录信息 | - | 同0x2A命令定义 | 可重复 |