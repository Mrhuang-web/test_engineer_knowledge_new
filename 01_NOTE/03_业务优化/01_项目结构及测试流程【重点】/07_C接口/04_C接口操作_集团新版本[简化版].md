```
前提说明：
	所有的环境的C接口部署，均可以调用【流水线 - gemc:kern - GEMC_cinterface-service 】 下的最新镜像
	测试环境下，C接口服务仅是充当【C接口模拟器（sc） - C接口 - sc动环  的一个数据流转的载体】
	
	C接口服务和C接口模拟器以及中间库  -- 这些均可以在任意服务器上部署【只要有内存即可，哪怕都在同个服务器上都行】
		最终实现对接【这一块还需要理清楚】  -- 好像是根据C服务在启动是读取对应的环境配置【nacos下的配置文件】从而实现识别对应环境
```



# 步骤1 C模拟器部署

```
模拟器已部署：http://10.1.203.38:8187/
```

# 步骤2 数据准备到中间库

```
写入中间库：10.1.203.38:3306/cinterdb_400_jt_gz

C模拟器项目中的lsc400_data.xlsx文件
	m_site  sheet页
		siteID：站点id			 意命名,不能与中间库中的m_site中重复
		siteName：站点名	    站点映射配置的时候填写
		sitetype:站点类型
	m_room
		roomid：机房id				任意命名，每个机房对应一个room_id
		siteid：站点id
		roomtype：机房类型
		roomname：机房名字

	且m_site与m_room里面的areaid要一致


执行C400基础数据准备.py
	需要先配置config.py的中间库信息【目前中间库是用的10.1.203.38】
	root:G$SGp!8L3O@10.1.203.38:3306/cinterdb_400_jt_gz



注意点：
	可以一次性创建多个site【m_site】，如果在创建的时候出现错误，那么需要先到中间库把对应的siteid删除
	一个站点可以创建多个机房【m_room】
```



# 步骤3【省略】配置表数据插入

| 数据库属性  | 解释                                                         |
| ----------- | ------------------------------------------------------------ |
| lsc_id      | C接口标识【需要与目前动环库里t_cfg_cserverinfo的lsc前两位不一致、后续nacos配置列表中c接口配置的lsc就取这个】 |
| dbsvrip     | 中间库ip                                                     |
| dbsvrport   | 中间库端口号，通常为3306                                     |
| dbname      | 中间库库名                                                   |
| dblogname   | 中间库用户名                                                 |
| dblogpwd    | 中间库密码                                                   |
| csvrip      | TCP服务端ip                                                  |
| csvrport    | TCP服务端端口号                                              |
| clogusrname | TCP服务端用户名                                              |
| clogusrname | TCP服务端密码                                                |

```
说明：
	这里主要是对动环库中t_cfg_cserverinfo表的C模拟器和数据库的配置


在对应环境的动环库插入
	以上海为例
		那就是在10.1.203.120数据库的sc-spider数据库里面的t_cfg_cserverinfo表
			参数讲解
				lsc_id：用于后续写在nacos中对应的lsc_id[前两位不能与该数据库下，t_cfg_cserverinfo表下的前两位相同 -- 重点]
				lsc_name：任意命名
			
				dbsvrip：就是10.1.203.120的中间库【目前用的现有的cinterdb_gd】
				dbsvrport:3306【基本都是这个】
				dbname：cinterdb_gd【可以自己重新生成，这个无所谓】
				dblogname：root【默认都是这个】
				dblogpwd：数据库密码【可以在nacos里面找到对应环境数据库密码】
				
				csvrip：C模拟器所部署的服务器【目前上海的c模拟器部署在10.1.203.38上】
				csvrport：C模拟器的config中的socket端口【这里的端口对应配置文件中的端口，这里配啥，到时候yml文件就需要改为什么才能对应，目前8272】
				clogusrname：hyzomc【好像都是这个】
				clogusrname：hyzomc@2023【好像都是这个】
				
		
前人提供
INSERT INTO t_cfg_cserverinfo
(lsc_id, lsc_name, csvrip, csvrport, clogusrname, clogusrpwd, dbtype, dbsvrip, dbsvrport, dbname, dblogname, dblogpwd, access_device_id, protocol_id)
VALUES(571, '云南-接入', '10.173.101.36', 31020, 'hyzomc', 'hyzomc@2023 ', 6, '10.173.101.36', 3306, 'cmbas', 'yncm', 'cmbas@2023', '1', 400);


上海为例
INSERT INTO t_cfg_cserverinfo
(lsc_id, lsc_name, csvrip, csvrport, clogusrname, clogusrpwd, dbtype, dbsvrip, dbsvrport, dbname, dblogname, dblogpwd, access_device_id, protocol_id)
VALUES(431, '上海-接入', '10.1.203.38', 8272, 'hyzomc', 'hyzomc@2023 ', 6, '10.1.203.120', 3306, 'root', 'cinterdb_gd', 'xxx', '1', 400);


陕西为例  
INSERT INTO t_cfg_cserverinfo
(lsc_id, lsc_name, csvrip, csvrport, clogusrname, clogusrpwd, dbtype, dbsvrip, dbsvrport, dbname, dblogname, dblogpwd, access_device_id, protocol_id)
VALUES(543, '广西测试环境接入_hjj', '10.1.203.38', 5234, 'hyzomc', 'hyzomc@2023 ', 6, '10.1.203.38', 3306, 'root', 'cinterdb_400', '数据库密码', '1', 400);


如果使用的是未加密的密码，这里需要多一步加密
	调用configmanagement模块进行加密：
		就是到对应环境的configmanagement服务里面执行【可以在nacos里面找】
		还要注意：
			如果对应的config里面执行不了
			直接在cicd进到对应config里面，把应用访问路径的IP和port替换到下面【每次重启都会变更】
		lscid则为上述创建时创建的lscid
    
    curl --location 'http://localhost:13563/v1/cserverinfo/encryptedInfoByLscId?lscId=571'		-- 上海
	curl --location 'http://10.1.6.32:32344/v1/cserverinfo/encryptedInfoByLscId?lscId=543'      -- 广西
	
	
	
	
---------------------------------------------------
【重点】

直接采用543的即可，无需再次
```

# 步骤4【省略】配置yml文件

```
说明：
	这里主要是对nacos中的C接口配置yml的配置
	【可以直接新增一个yml，这里的yml作用就是用于C接口启动时读取】


以上海为例
	在nacos配置列表里面，找到对应省份，data id输入cinter
	找到：ms-cinterface-service-gd-new.yml 
		需要配置的参数
			server
				port								为C服务所在服务器，启动时的端口[配置时需要先到服务器看端口是否用过] - 即服务列表中的port就是配置列表yml中的port
													目前上海这个起在10.1.203.121上面，需要在上面确保端口没有占用
			app
				client[接入时配置]
					id								为t_cfg_cserverinfo的lsc_id
					province_name					为区分接入的省份[广东-卓望 即用于后续写入t_cfg_site_mapping表的provice_name]
					dbInitlscId						为t_cfg_cserverinfo的lsc_id
					lscIdConfig						为t_cfg_cserverinfo的lsc_id
					autoCreateIndexProvinceId		为接入省份的ID[目前是接入广东的 -- 因此是01-01]
				server[接出时配置]
					clientId
			kafka.topic.cinterface_getPointDataRequest		Kafka实时数据topic修改【最后的两个数字修改为lsc_id的前两位数字】
			kafka.topic.cinterface_updDeviceModel			Kafka实时数据topic修改【最后的两个数字修改为lsc_id的前两位数字】




以广西为例
	在nacos配置列表里面，找到对应省份【即命名空间、即环境 -- gxems-dev】，data 输入框 id输入cinter
	找到：ms-cinterface-service-gx-in4 【复制里面的内容】
	
	创建配置：
		命名：ms-cinterface-service-gx-in4-new.yml
		先把ms-cinterface-service-gx-in4的内容复制进来
		再进行配置修改：
			server
				port								为C服务所在服务器，启动时的端口[配置时需要先到服务器看端口是否用过] 
													- 即服务列表中的port就是配置列表yml中的port
													目前上海这个起在10.1.203.121上面，需要在上面确保端口没有占用
			app
				client[接入时配置]
					id								为t_cfg_cserverinfo的lsc_id
					province_name					为区分接入的省份[广东-卓望 即用于后续写入t_cfg_site_mapping表的provice_name]
					dbInitlscId						为t_cfg_cserverinfo的lsc_id
					lscIdConfig						为t_cfg_cserverinfo的lsc_id
					autoCreateIndexProvinceId		为接入省份的ID[目前是接入广东的 -- 因此是01-01]
				server[接出时配置]
					client
						Id							为上面t_cfg_cserverinfo里面的lsc id
			kafka.topic.cinterface_getPointDataRequest		Kafka实时数据topic修改【最后的两个数字修改为lsc_id的前两位数字】
			kafka.topic.cinterface_updDeviceModel			Kafka实时数据topic修改【最后的两个数字修改为lsc_id的前两位数字】
			kafka.topic.cinterface_collectPointDataRequest  Kafka实时数据topic修改【最后的两个数字修改为lsc_id的前两位数字】

```

# 步骤5【省略】C接口部署与启动

```
贴别注意：
	1、ENV_TYPE要换成nacos对应环境的命名空间
	2、ENV_APP_NAME要换成nacos对应环境的服务配置的相关c接口yml
	3、然后如果没有启动成功，还需要手动docker start 容器id进行启动
	4、所有在cicd上流水线里面对应服务里，复制的镜像端口都是有问题的，需要改成8080
	
问题：
	1、看c接口启动服务日志里面，是否没有链接上redis和kafka
		可以在对应nacos里面看redis和kafka的服务配置，里面有对应的ip地址
		需要到对应服务里面，给c接口服务器，开通白名单即可
	2、出现get无法请求到config的
		因为config是cicd部署、但是c接口是服务器部署，因此会导致接不上【并且由于cicd部署不了c接口、c接口包有问题】
		因此必须把config也部署到服务器上，即可解决这个问题
			即到cicd上的流水线，找到对应环境，对应config，点击构建详情、复制镜像出来
			到有内存的服务器进行部署即可
		
	


docker run 
	--name cinterface-service-yunnan 
	--net host  
	--env spring.cloud.inetutils.preferred-networks=192.168.0.55 
	--log-driver=json-file 
	--log-opt max-size=30m 
	--log-opt max-file=3 
	--env ENV_NACOS=10.1.5.109:8848 
	--env ENV_TYPE=yunnan 
	--env ENV_APP_NAME=cinterface-service-yunnan 
	--env ENV_NACOS_PASSWORD=r2G%zwoCj#Oz 
	-v /tmp/logs/rbac:/opt/data/logs/ 
	-d 
	10.1.6.34:8080/spider/yunnan/cinterface-service:spider1.0.0.0_kernelYunNan_SYT_149
	
	
重要参数解析
	--env ENV_NACOS=10.1.5.109:8848 														这里为nacos的ip和端口
	--env ENV_TYPE=sc-dev 																	这里为nacos的命名空间即环境
	--env ENV_APP_NAME=cinterface-service-yunnan											这里为nacos的配置列表中对应环境C接口的配置
	--env ENV_NACOS_PASSWORD=r2G%zwoCj#Oz 													这里为nacos的登录密码
	-v /tmp/logs/rbac:/opt/data/logs/ 														卷挂载（日志持久化）
	-d																						后台运行
	10.1.6.34:8080/spider/yunnan/cinterface-service:spider1.0.0.0_kernelYunNan_SYT_149		这里是C接口的镜像，在cicd流水线中找
																							这里是接入哪个省份就需要拉哪个省份的
	
	注意ENV_APP_NAME对应关系
		ENV_APP_NAME=cinterface-service-yunnan对应的是ms-cinterface-service-yunnan.yml
		
	

实例【cicd - 流水线 - gemc:kern - GEMC_cinterface-service - 注意拿最新的镜像】：
	注意：每次拿的时候，里面的端口是错误的，18080，需要改成
docker run 
	--name cinterface-service-sx-new-hjj-new
	--net host 
	--log-driver=json-file 
	--log-opt max-size=30m 
	--log-opt max-file=3 
	--env ENV_APP_NAME=cinterface-service-gx-in4-new 
	--env ENV_NACOS=10.1.203.120:8848 
	--env ENV_TYPE=gxems-dev 
	--env ENV_NACOS_PASSWORD='D&V2HR43TutFjf%aKqk'  
	-v /tmp/logs/configmanagement:/opt/data/logs/ 
	-d 10.1.6.34:8080/cicd-public-49/cinterface-service:1.0.3.2_22_20250807030001
	
	



C接口打包命令
	
docker run --name cinterface-service-sx-new-hjj-new --net host --log-driver=json-file --log-opt max-size=30m --log-opt max-file=3 --env ENV_APP_NAME=cinterface-service-gx-in4-new --env ENV_NACOS=10.1.203.120:8848 --env ENV_TYPE=gxems-dev --env ENV_NACOS_PASSWORD='D&V2HR43TutFjf%aKqk'  -v /tmp/logs/configmanagement:/opt/data/logs/ -d 10.1.6.34:8080/cicd-public-49/cinterface-service:1.0.3.2_29_20250904125540




configmanagement打包命令

docker run --name GXEMS-configmanagement --net host --log-driver=json-file --log-opt max-size=30m --log-opt max-file=3 --env ENV_APP_NAME=configManagement --env ENV_NACOS=10.1.203.120:8848 --env ENV_TYPE=gxems-dev --env ENV_NACOS_PASSWORD='D&V2HR43TutFjf%aKqk'  -v /tmp/logs/configmanagement:/opt/data/logs/ -d 10.1.6.34:8080/cicd-public-23/configmanagement-service:1.0.1.0_108_20250903023930


```

# 步骤6【省略】定时任务启动

```
这里主要在C接口服务器里面执行，执行了定时任务后续才会有实时数据写入和告警
重点注意：每次重启了C接口服务，都需要执行一次定时任务


以为例【接入广东lsc】
	目前C接口所属服务器【10.1.203.121里面】，需要到该服务器下执行
	然后端口是nacos配置文件中，该C接口配置文件定义的port
		curl --location  'http://10.1.203.121:8272/v1/cinterface/startSyncTimer'
		curl --location  'http://10.12.12.186:5234/v1/cinterface/startSyncTimer'
```

# 步骤7  站点映射配置

| 数据库属性     | 解释                                           |
| -------------- | ---------------------------------------------- |
| provice_name   | 省份，对应配置文件app.client.province_name     |
| city_name      | 市                                             |
| area_name      | 区                                             |
| site_type      | 接口类型 1:网络云2:核心机楼                    |
| interface_type | 接口类型 1:C接口；2:资管                       |
| lsc_id         | 站点Id                                         |
| lsc_name       | 一级SC站点名                                   |
| mapping_name   | 映射外部系统站点名，对应中间库m_site的siteName |
| mark           | 备注                                           |

```
前提：
	先在动环里面建立新的站点【该站点用于接入 - 只需要创建到站点级别即可】

说明：
	【对应环境的动环数据库 - 10.12.12.186】
	这里主要是对动环库中t_cfg_site_mapping表的站点 与 模拟器上的站点做映射
注意点：
	站点类型要一致【site_type】
	容易粗心：lsc_name和mapping_name不要写错了




以上海【接入广东】为例
	provice_name			为步骤4、C接口启动读取的yml配置里的province_name【用于区分是哪个省份接入的】		
	city_name				为步骤4、C接口启动读取的yml配置里的province_name【下的城市】     	--这个的作用
	area_name				为步骤4、C接口启动读取的yml配置里的province_name【下城市的区域】      --这个的作用
	lsc_id					为上海动环系统创建的省份下的城市的区下的站点  的 precinct_id
	lsc_name				为上海动环系统创建的省份下的城市的区下的站点  的 站点名
	mapping_name			为中间库m_site中的站点名【与步骤2中写入的m_site的siteName】
	
	city_name				最好跟页面创建的一致市一致【虽然影响不大】
	area_name		 		最好跟页面创建的一致区一致【虽然影响不大】
	






INSERT INTO t_cfg_site_mapping
(province_name, city_name, area_name, site_type, interface_type, lsc_id, lsc_name, mapping_name, mark)
VALUES('广东', '广州市', '白云区', 2, NULL, '01-01-17-02-29', '广州白云区矮岭西街一巷16号', '广州白云区矮岭西街一巷16号', NULL);


id，前两位不能一样（）

```

# 步骤8 站点同步【也叫稽核同步】

```
集团直接页面刷新即可


这里主要是实现把中间库站点和机房、设备、测点等配置，同步到动环过去


以上海为例
	首先是在空间里，创建了新的市、市下又创建了新的区、市里面创建了新站点【站点下做任何操作、通过同步来实现】
	方法1【按站点稽核同步 -- 目前用的这个】：
		注意点：
			ip是C接口所在服务器【目前是10.1.203.121】
			port是C接口配置yml中的port【目前是8272】
			siteId：站点id【对应页面创建的站点id  -- 目前是上海市下的测试站点】
		接口位置：
			/v1/cinterface/compareAndSyncBySite（get请求）   -- 出现这个问题就是config有问题，需要自己启一个
			根据某个站点进行稽核同步基本配置数据
		参数详情
			operateUser：操作者（任意）
			siteId：站点id（对应页面创建的站点id）
			justCompare：是否只进行比较，true，只进行比较；false 比较并进行同步配置数据【即把站点下所有信息同步过去】
		例子
			curl --location 'http://10.12.12.184:8180/v1/cinterface/compareAndSyncBySite?operateUser=chw-0919&siteId=01-24-09-02-66-15&justCompare=false'
			
			
			
			
			
			
			[广西]
			curl --location 'http://10.12.12.186:5234/v1/cinterface/compareAndSyncBySite?operateUser=chw-0919&siteId=01-07-21-01-01-05&justCompare=false'
			
			curl --location 'http://10.12.12.186:5234/v1/cinterface/compareAndSyncBySite?operateUser=chw-0919&siteId=01-07-21-01-01-04&justCompare=false'
			
			curl --location 'http://10.12.12.186:5234/v1/cinterface/compareAndSyncBySite?operateUser=chw-0919&siteId=01-07-21-01-01-03&justCompare=false'
			
			curl --location 'http://10.12.12.186:5234/v1/cinterface/compareAndSyncBySite?operateUser=chw-0919&siteId=01-07-21-01-01-02&justCompare=false'
			
			curl --location 'http://10.12.12.186:5234/v1/cinterface/compareAndSyncBySite?operateUser=chw-0919&siteId=01-07-21-01-01-01&justCompare=false'
		
			curl --location 'http://10.12.12.186:5234/v1/cinterface/compareAndSyncBySite?operateUser=chw-0919&siteId=01-07-21-01-01-05&justCompare=true'
        
        
      		简化版：10.12.12.186:5234    ------GXEMS_configManagement-service
        	curl --location 'http://10.12.12.186:5234/v1/cinterface/compareAndSyncBySite?operateUser=chw-0919&siteId=01-07-22-01-01&justCompare=false'

			curl --location 'http://10.12.12.186:5234/v1/cinterface/compareAndSyncBySite?operateUser=chw-0919&siteId=01-07-22-01-02&justCompare=false'
			
			curl --location 'http://10.12.12.186:5234/v1/cinterface/compareAndSyncBySite?operateUser=chw-0919&siteId=01-07-22-01-03&justCompare=false'
			
			curl --location 'http://10.12.12.186:5234/v1/cinterface/compareAndSyncBySite?operateUser=chw-0919&siteId=01-07-22-01-04&justCompare=false'
			
			curl --location 'http://10.12.12.186:5234/v1/cinterface/compareAndSyncBySite?operateUser=chw-0919&siteId=01-07-22-01-05&justCompare=false'
		

        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
	方法2【手工稽核同步】：
		注意点：
			ip是C接口所在服务器【目前是10.1.203.121】
			port是C接口配置yml中的port【目前是8272】
			siteId：站点id【对应页面创建的站点id  -- 目前是上海市下的测试站点】
		接口位置
			/v1/cinterface/syncBycommand（post请求）
			稽核全部站点同步基本配置数据。
		参数详情
            precinctId：省份id,例如陕西为01-24；
            optPerson：操作者；
            siteId：可以为空，保存到日志表，没意义。
		例子
			http://10.12.12.184:8180/v1/cinterface/syncBycommand
			{ "precinctId": "01-24", "optPerson": "chw", "siteId": "" }
```

# 步骤9 验证

```
到模拟器进行上报配送

根据“综合监控-监控视图”，搜索站点，检验对应站点的设备测点数据是否同步上来
```

# 步骤10 告警数据同步

```
步骤1：
	C接口读取中间库D_ACTIVEALARM表的活动告警数据进行解析
		作为生产者向kafka上报告警数据（topic:spider_binterface_alarm）
		alert模块作为消费者从kafka拉取最新告警进行消费保存到活动告警表alert_alerts
		消警后进入alert_alerts_his
	
	
步骤2：
	（1）需要先同步基本配置表，D_ACTIVEALARM配置的测点需已存在
	（2）需要配合configmanagement模块和alert模块进行调用
	（3）测点需已标准化才能上传到kafka,由alert模块进行消费


步骤3：
	执行频率：
		通过配置文件app.client.alarmSyncCron进行修改定时任务的执行频率  【即步骤4中C接口服务启动时读取的yml配置文件】
	通过步骤六的定时任务
		ip为C接口服务器的ip，端口为C接口启动时读取的nacos里对应的C接口服务配置yml
		curl --location  'http://10.1.203.121:8272/v1/cinterface/startSyncTimer'
		
步骤4：
	验证：
		查看“告警管理-视图-活动告警”，检查告警数据是否同步上来
```

# 步骤11 历史数据同步

```
步骤1：
	C接口从D_SIGNALH表读取数据，同步到ES历史数据，解析并保存到elasticsearch的索引里（索引名：fsu_yyyyMMdd_省份ID）
	
	
步骤2：
	（1）需要先同步基本配置表，D_SIGNALH配置的测点需已存在；
	（2）需要配合configmanagement模块进行调用
	
步骤3：
	（1）执行频率：通过配置文件app.client.signalSyncCron进行修改定时任务的执行频率		 【即步骤4中C接口服务启动时读取的yml配置文件】
	（2）通过步骤六的定时任务
		ip为C接口服务器的ip，端口为C接口启动时读取的nacos里对应的C接口服务配置yml
		curl --location  'http://10.1.203.121:8272/v1/cinterface/startSyncTimer'
		
步骤4：
	验证
		根据“报表管理-报表-性能数据报表-遥测量历史数据报表”，搜索对应站点和时间，检查对应的历史数据是否同步上来
```

# 步骤12 实时数据验证

```
步骤1：
	根据步骤6的curl开启tcp客户端，连接t_cfg_cserverinfo表的tcp服务端
		curl --location  'http://10.1.203.121:8272/v1/cinterface/startSyncTimer'
			即C接口作为客户端、C接口模拟器作为服务端【C接口模拟器提供数据上来  -- 通过一个端口来监听】
步骤2：
	查看监控视图，等待10s后，看是否能采集到“当前值”和“采集时间”
	获取数据时间每10s会刷新一次，如果超过10s则代表实时数据获取存在问题
	如果采集时间距离当前时间很久，则代表为es的历史数据
```









# 常见问题

```
操作注意项
	01、配置C接口配置yml中的端口、需要先到C接口服务器中确保端口没有被使用【lsof -i:端口】
	02、启动模拟器前，config配置里面的socket_port设置为C接口启动时的端口
	03、启动模拟器前，config配置里面的http_port为C接口模拟器的端口、需要确保C接口模拟器所属服务器下没有使用到该端口【lsof -i:端口】
	04、启动模拟器之后，需要查看对应模拟器日志【检查是否启动成功  -- 页面是否能正常访问】
	05、启动模拟器之后、需要在C接口模拟器所属服务器下，白名单里面添加新的端口【即要访问该连接的主机，授权该端口】
	06、启动模拟器之后、需要在C接口模拟器所属服务器下，白名单里面添加新的端口【即要访问该连接的主机，授权该端口】
	07、启动模拟器之后、需要在C接口模拟器所属服务器下，给C接口服务器添加白名单【端口为scoket_port,C接口能与服务器通信，即连接tcp服务端】
	08、C接口服务启动后、需要查看对应容器的日志【检查是否启动成功  -- docker logs --tail 400 -f 容器id】
	09、每次修改动环库中的t_cfg_cserverinfo，需要重新启动C接口服务【如果不重启则不生效  -- docker restart 容器id】
	11、每次修改动对应环境c接口配置的port或其他参数，需要重新启动C接口服务【如果不重启则不生效  -- docker restart 容器id】
	10、每次重新启动C接口服务，都需要重新执行定时任务
	

端口与ip配置准确性
	1、C接口中的config.py 的 socket_port【C接口服务器的】,http_port
	2、配置表中的csvrip，csvrport	  【C接口模拟器的ip、C接口服务器的port】
	3、nacos中的port				【C接口服务器的】
	4、定时任务和站点同步的ip和port   【C接口服务器的】
	


C接口服务日志-站点重复
	1、是t_cfg_site_mapping中mapping_name重复了，删除就可以


C接口服务日志-报文开头不正常
	1、是ip和应用不对应


C接口服务日志-channel通道null
	1、ip不对应
	2、没有启用定时任务


C模拟器启动后日志-already报错
	1、可能端口重复使用问题


```

# 特殊问题

**问题1**

```
问题说明：
	启动C服务，日志显示【新增数据失败、http://configmanagement-server/v1/cserverinfo/lscid】
	【目前config启在10.1.4.113上面】
排查问题：
	因为C接口连接不到config
	分析：
		因为一个在cicd上，一个在服务器上，可能连不到

解决方案：
	要么就全部cicd上，要么就全在服务器上
	重新部署到服务器上，然后下线已有的成功解决【那nacos服务列表里面，对应环境下的config下线】
```

![35a21a26803599a0e06b76204a9d5b95_108004](C:/Users/huangjiajie/Documents/yidongbangong/15018385819/temp/2025-09/35a21a26803599a0e06b76204a9d5b95_108004.png)

![d86345a23a65f0375c44d2082fe16ac4_226927](C:/Users/huangjiajie/Documents/yidongbangong/15018385819/temp/2025-09/d86345a23a65f0375c44d2082fe16ac4_226927.png)

**问题2**

```
问题分析：
	C模拟器告警发起没反应、且C接口服务器里面显示请求不到configmanagement服务

解决方法【好像不行】：
	在config服务里面  给C模拟器所在服务器ip 加上 config服务的端口的ip，这样模拟器就能发起post了
	而不会超时
```

![image-20250911004937665](03_C接口操作_广西新版本[简化版].assets/image-20250911004937665.png)



