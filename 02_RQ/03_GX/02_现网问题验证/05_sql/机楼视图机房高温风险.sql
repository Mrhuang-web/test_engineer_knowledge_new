涉及服务：
	knowledge-service
	
涉及脚本：
	https://gitsz1.aspirecn.com/spider/gemc/-/blob/develop/gemc/bin/dbscript/GEMC1.0.7.0/ddl/温度分析报表优化_ddl_20250916.sql
	
			CREATE TABLE `t_temperature_mete_detail_month` (
		  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '主键',
		  `statistics_time` varchar(7) NOT NULL COMMENT '统计月份',
		  `room_id` varchar(64) NOT NULL COMMENT '机房id',
		  `room_name` varchar(64) DEFAULT NULL COMMENT '机房名称',
		  `room_type` tinyint(4) DEFAULT NULL COMMENT '机房类型',
		  `air_type` tinyint(4) DEFAULT NULL COMMENT '制冷方式',
		  `site_id` varchar(64) DEFAULT NULL COMMENT '站点id',
		  `site_name` varchar(64) DEFAULT NULL COMMENT '站点名称',
		  `site_type` tinyint(4) DEFAULT NULL COMMENT '站点类型',
		  `climate_type` tinyint(4) DEFAULT NULL COMMENT '气候类型',
		  `building_id` varchar(64) DEFAULT NULL COMMENT '楼栋id',
		  `building_name` varchar(64) DEFAULT NULL COMMENT '楼栋名称',
		  `device_id` varchar(64) DEFAULT NULL COMMENT '设备id',
		  `device_name` varchar(64) DEFAULT NULL COMMENT '设备名称',
		  `device_type` varchar(64) DEFAULT NULL COMMENT '设备类型',
		  `mete_code` varchar(64) DEFAULT NULL COMMENT '测点code',
		  `mete_name` varchar(64) DEFAULT NULL COMMENT '测点名称',
		  `channel_id` varchar(64) DEFAULT NULL COMMENT '通道号',
		  `remark_mete_type` tinyint(4) DEFAULT NULL COMMENT '备注测点类型',
		  `total_count` int(11) DEFAULT NULL COMMENT '温度数据总量',
		  `general_count` int(11) DEFAULT NULL COMMENT '正常考核温度数据总量',
		  `exception_count` int(11) DEFAULT NULL COMMENT '异常温度数据总量',
		  `low_count` int(11) DEFAULT NULL COMMENT '低温温度数据总量',
		  `normal_count` int(11) DEFAULT NULL COMMENT '正常温度数据总量',
		  `high_count` int(11) DEFAULT NULL COMMENT '高温温度数据总量',
		  `create_time` varchar(20) DEFAULT NULL COMMENT '采集时间',
		  PRIMARY KEY (`id`, `statistics_time`),
		  KEY `idx_statistics_time` (`statistics_time`),
		  KEY `idx_room_id` (`room_id`)
		) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='温度测点历史数据月表'
		PARTITION BY RANGE  COLUMNS(statistics_time)
		(
		 PARTITION p202312 VALUES LESS THAN ('2024-01') ENGINE = InnoDB,
		 PARTITION p202401 VALUES LESS THAN ('2024-02') ENGINE = InnoDB,
		 PARTITION p202402 VALUES LESS THAN ('2024-03') ENGINE = InnoDB,
		 PARTITION p202403 VALUES LESS THAN ('2024-04') ENGINE = InnoDB,
		 PARTITION p202404 VALUES LESS THAN ('2024-05') ENGINE = InnoDB,
		 PARTITION p202405 VALUES LESS THAN ('2024-06') ENGINE = InnoDB,
		 PARTITION p202406 VALUES LESS THAN ('2024-07') ENGINE = InnoDB,
		 PARTITION p202407 VALUES LESS THAN ('2024-08') ENGINE = InnoDB,
		 PARTITION p202408 VALUES LESS THAN ('2024-09') ENGINE = InnoDB,
		 PARTITION p202409 VALUES LESS THAN ('2024-10') ENGINE = InnoDB,
		 PARTITION p202410 VALUES LESS THAN ('2024-11') ENGINE = InnoDB,
		 PARTITION p202411 VALUES LESS THAN ('2024-12') ENGINE = InnoDB,
		 PARTITION p202412 VALUES LESS THAN ('2025-01') ENGINE = InnoDB,
		 PARTITION p202501 VALUES LESS THAN ('2025-02') ENGINE = InnoDB,
		 PARTITION p202502 VALUES LESS THAN ('2025-03') ENGINE = InnoDB,
		 PARTITION p202503 VALUES LESS THAN ('2025-04') ENGINE = InnoDB,
		 PARTITION p202504 VALUES LESS THAN ('2025-05') ENGINE = InnoDB,
		 PARTITION p202505 VALUES LESS THAN ('2025-06') ENGINE = InnoDB,
		 PARTITION p202506 VALUES LESS THAN ('2025-07') ENGINE = InnoDB,
		 PARTITION p202507 VALUES LESS THAN ('2025-08') ENGINE = InnoDB,
		 PARTITION p202508 VALUES LESS THAN ('2025-09') ENGINE = InnoDB,
		 PARTITION p202509 VALUES LESS THAN ('2025-10') ENGINE = InnoDB,
		 PARTITION p202510 VALUES LESS THAN ('2025-11') ENGINE = InnoDB,
		 PARTITION p202511 VALUES LESS THAN ('2025-12') ENGINE = InnoDB,
		 PARTITION p202512 VALUES LESS THAN ('2026-01') ENGINE = InnoDB,
		 PARTITION p202601 VALUES LESS THAN ('2026-02') ENGINE = InnoDB,
		 PARTITION p202602 VALUES LESS THAN ('2026-03') ENGINE = InnoDB,
		 PARTITION p202603 VALUES LESS THAN ('2026-04') ENGINE = InnoDB,
		 PARTITION p202604 VALUES LESS THAN ('2026-05') ENGINE = InnoDB,
		 PARTITION p202605 VALUES LESS THAN ('2026-06') ENGINE = InnoDB,
		 PARTITION p202606 VALUES LESS THAN ('2026-07') ENGINE = InnoDB,
		 PARTITION p202607 VALUES LESS THAN ('2026-08') ENGINE = InnoDB,
		 PARTITION p202608 VALUES LESS THAN ('2026-09') ENGINE = InnoDB,
		 PARTITION p202609 VALUES LESS THAN ('2026-10') ENGINE = InnoDB,
		 PARTITION p202610 VALUES LESS THAN ('2026-11') ENGINE = InnoDB,
		 PARTITION p202611 VALUES LESS THAN ('2026-12') ENGINE = InnoDB,
		 PARTITION p202612 VALUES LESS THAN ('2027-01') ENGINE = InnoDB,
		 PARTITION p202701 VALUES LESS THAN ('2027-02') ENGINE = InnoDB,
		 PARTITION p202702 VALUES LESS THAN ('2027-03') ENGINE = InnoDB,
		 PARTITION p202703 VALUES LESS THAN ('2027-04') ENGINE = InnoDB,
		 PARTITION p202704 VALUES LESS THAN ('2027-05') ENGINE = InnoDB,
		 PARTITION p202705 VALUES LESS THAN ('2027-06') ENGINE = InnoDB,
		 PARTITION p202706 VALUES LESS THAN ('2027-07') ENGINE = InnoDB,
		 PARTITION p202707 VALUES LESS THAN ('2027-08') ENGINE = InnoDB,
		 PARTITION p202708 VALUES LESS THAN ('2027-09') ENGINE = InnoDB,
		 PARTITION p202709 VALUES LESS THAN ('2027-10') ENGINE = InnoDB,
		 PARTITION p202710 VALUES LESS THAN ('2027-11') ENGINE = InnoDB,
		 PARTITION p202711 VALUES LESS THAN ('2027-12') ENGINE = InnoDB,
		 PARTITION p202712 VALUES LESS THAN ('2028-01') ENGINE = InnoDB,
		 PARTITION p202801 VALUES LESS THAN ('2028-02') ENGINE = InnoDB,
		 PARTITION p202802 VALUES LESS THAN ('2028-03') ENGINE = InnoDB,
		 PARTITION p202803 VALUES LESS THAN ('2028-04') ENGINE = InnoDB,
		 PARTITION p202804 VALUES LESS THAN ('2028-05') ENGINE = InnoDB,
		 PARTITION p202805 VALUES LESS THAN ('2028-06') ENGINE = InnoDB,
		 PARTITION p202806 VALUES LESS THAN ('2028-07') ENGINE = InnoDB,
		 PARTITION p202807 VALUES LESS THAN ('2028-08') ENGINE = InnoDB,
		 PARTITION p202808 VALUES LESS THAN ('2028-09') ENGINE = InnoDB,
		 PARTITION p202809 VALUES LESS THAN ('2028-10') ENGINE = InnoDB,
		 PARTITION p202810 VALUES LESS THAN ('2028-11') ENGINE = InnoDB,
		 PARTITION p202811 VALUES LESS THAN ('2028-12') ENGINE = InnoDB,
		 PARTITION p202812 VALUES LESS THAN ('2029-01') ENGINE = InnoDB);

		CREATE TABLE `t_temperature_mete_detail_week` (
		  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '主键',
		  `statistics_time` varchar(10) NOT NULL COMMENT '统计周',
		  `room_id` varchar(64) NOT NULL COMMENT '机房id',
		  `room_name` varchar(64) DEFAULT NULL COMMENT '机房名称',
		  `room_type` tinyint(4) DEFAULT NULL COMMENT '机房类型',
		  `air_type` tinyint(4) DEFAULT NULL COMMENT '制冷方式',
		  `site_id` varchar(64) DEFAULT NULL COMMENT '站点id',
		  `site_name` varchar(64) DEFAULT NULL COMMENT '站点名称',
		  `site_type` tinyint(4) DEFAULT NULL COMMENT '站点类型',
		  `climate_type` tinyint(4) DEFAULT NULL COMMENT '气候类型',
		  `building_id` varchar(64) DEFAULT NULL COMMENT '楼栋id',
		  `building_name` varchar(64) DEFAULT NULL COMMENT '楼栋名称',
		  `device_id` varchar(64) DEFAULT NULL COMMENT '设备id',
		  `device_name` varchar(64) DEFAULT NULL COMMENT '设备名称',
		  `device_type` varchar(64) DEFAULT NULL COMMENT '设备类型',
		  `mete_code` varchar(64) DEFAULT NULL COMMENT '测点code',
		  `mete_name` varchar(64) DEFAULT NULL COMMENT '测点名称',
		  `channel_id` varchar(64) DEFAULT NULL COMMENT '通道号',
		  `remark_mete_type` tinyint(4) DEFAULT NULL COMMENT '备注测点类型',
		  `total_count` int(11) DEFAULT NULL COMMENT '温度数据总量',
		  `general_count` int(11) DEFAULT NULL COMMENT '正常考核温度数据总量',
		  `exception_count` int(11) DEFAULT NULL COMMENT '异常温度数据总量',
		  `low_count` int(11) DEFAULT NULL COMMENT '低温温度数据总量',
		  `normal_count` int(11) DEFAULT NULL COMMENT '正常温度数据总量',
		  `high_count` int(11) DEFAULT NULL COMMENT '高温温度数据总量',
		  `create_time` varchar(20) DEFAULT NULL COMMENT '采集时间',
		  PRIMARY KEY (`id`, `statistics_time`),
		  KEY `idx_statistics_time` (`statistics_time`),
		  KEY `idx_room_id` (`room_id`)
		) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='温度测点历史数据周表'
		PARTITION BY RANGE  COLUMNS(statistics_time)
		(
		 PARTITION p202312 VALUES LESS THAN ('2024-01-01') ENGINE = InnoDB,
		 PARTITION p202401 VALUES LESS THAN ('2024-02-01') ENGINE = InnoDB,
		 PARTITION p202402 VALUES LESS THAN ('2024-03-01') ENGINE = InnoDB,
		 PARTITION p202403 VALUES LESS THAN ('2024-04-01') ENGINE = InnoDB,
		 PARTITION p202404 VALUES LESS THAN ('2024-05-01') ENGINE = InnoDB,
		 PARTITION p202405 VALUES LESS THAN ('2024-06-01') ENGINE = InnoDB,
		 PARTITION p202406 VALUES LESS THAN ('2024-07-01') ENGINE = InnoDB,
		 PARTITION p202407 VALUES LESS THAN ('2024-08-01') ENGINE = InnoDB,
		 PARTITION p202408 VALUES LESS THAN ('2024-09-01') ENGINE = InnoDB,
		 PARTITION p202409 VALUES LESS THAN ('2024-10-01') ENGINE = InnoDB,
		 PARTITION p202410 VALUES LESS THAN ('2024-11-01') ENGINE = InnoDB,
		 PARTITION p202411 VALUES LESS THAN ('2024-12-01') ENGINE = InnoDB,
		 PARTITION p202412 VALUES LESS THAN ('2025-01-01') ENGINE = InnoDB,

		 PARTITION p202501 VALUES LESS THAN ('2025-02-01') ENGINE = InnoDB,
		 PARTITION p202502 VALUES LESS THAN ('2025-03-01') ENGINE = InnoDB,
		 PARTITION p202503 VALUES LESS THAN ('2025-04-01') ENGINE = InnoDB,
		 PARTITION p202504 VALUES LESS THAN ('2025-05-01') ENGINE = InnoDB,
		 PARTITION p202505 VALUES LESS THAN ('2025-06-01') ENGINE = InnoDB,
		 PARTITION p202506 VALUES LESS THAN ('2025-07-01') ENGINE = InnoDB,
		 PARTITION p202507 VALUES LESS THAN ('2025-08-01') ENGINE = InnoDB,
		 PARTITION p202508 VALUES LESS THAN ('2025-09-01') ENGINE = InnoDB,
		 PARTITION p202509 VALUES LESS THAN ('2025-10-01') ENGINE = InnoDB,
		 PARTITION p202510 VALUES LESS THAN ('2025-11-01') ENGINE = InnoDB,
		 PARTITION p202511 VALUES LESS THAN ('2025-12-01') ENGINE = InnoDB,
		 PARTITION p202512 VALUES LESS THAN ('2026-01-01') ENGINE = InnoDB,

		 PARTITION p202601 VALUES LESS THAN ('2026-02-01') ENGINE = InnoDB,
		 PARTITION p202602 VALUES LESS THAN ('2026-03-01') ENGINE = InnoDB,
		 PARTITION p202603 VALUES LESS THAN ('2026-04-01') ENGINE = InnoDB,
		 PARTITION p202604 VALUES LESS THAN ('2026-05-01') ENGINE = InnoDB,
		 PARTITION p202605 VALUES LESS THAN ('2026-06-01') ENGINE = InnoDB,
		 PARTITION p202606 VALUES LESS THAN ('2026-07-01') ENGINE = InnoDB,
		 PARTITION p202607 VALUES LESS THAN ('2026-08-01') ENGINE = InnoDB,
		 PARTITION p202608 VALUES LESS THAN ('2026-09-01') ENGINE = InnoDB,
		 PARTITION p202609 VALUES LESS THAN ('2026-10-01') ENGINE = InnoDB,
		 PARTITION p202610 VALUES LESS THAN ('2026-11-01') ENGINE = InnoDB,
		 PARTITION p202611 VALUES LESS THAN ('2026-12-01') ENGINE = InnoDB,
		 PARTITION p202612 VALUES LESS THAN ('2027-01-01') ENGINE = InnoDB,

		 PARTITION p202701 VALUES LESS THAN ('2027-02-01') ENGINE = InnoDB,
		 PARTITION p202702 VALUES LESS THAN ('2027-03-01') ENGINE = InnoDB,
		 PARTITION p202703 VALUES LESS THAN ('2027-04-01') ENGINE = InnoDB,
		 PARTITION p202704 VALUES LESS THAN ('2027-05-01') ENGINE = InnoDB,
		 PARTITION p202705 VALUES LESS THAN ('2027-06-01') ENGINE = InnoDB,
		 PARTITION p202706 VALUES LESS THAN ('2027-07-01') ENGINE = InnoDB,
		 PARTITION p202707 VALUES LESS THAN ('2027-08-01') ENGINE = InnoDB,
		 PARTITION p202708 VALUES LESS THAN ('2027-09-01') ENGINE = InnoDB,
		 PARTITION p202709 VALUES LESS THAN ('2027-10-01') ENGINE = InnoDB,
		 PARTITION p202710 VALUES LESS THAN ('2027-11-01') ENGINE = InnoDB,
		 PARTITION p202711 VALUES LESS THAN ('2027-12-01') ENGINE = InnoDB,
		 PARTITION p202712 VALUES LESS THAN ('2028-01-01') ENGINE = InnoDB,

		 PARTITION p202801 VALUES LESS THAN ('2028-02-01') ENGINE = InnoDB,
		 PARTITION p202802 VALUES LESS THAN ('2028-03-01') ENGINE = InnoDB,
		 PARTITION p202803 VALUES LESS THAN ('2028-04-01') ENGINE = InnoDB,
		 PARTITION p202804 VALUES LESS THAN ('2028-05-01') ENGINE = InnoDB,
		 PARTITION p202805 VALUES LESS THAN ('2028-06-01') ENGINE = InnoDB,
		 PARTITION p202806 VALUES LESS THAN ('2028-07-01') ENGINE = InnoDB,
		 PARTITION p202807 VALUES LESS THAN ('2028-08-01') ENGINE = InnoDB,
		 PARTITION p202808 VALUES LESS THAN ('2028-09-01') ENGINE = InnoDB,
		 PARTITION p202809 VALUES LESS THAN ('2028-10-01') ENGINE = InnoDB,
		 PARTITION p202810 VALUES LESS THAN ('2028-11-01') ENGINE = InnoDB,
		 PARTITION p202811 VALUES LESS THAN ('2028-12-01') ENGINE = InnoDB,
		 PARTITION p202812 VALUES LESS THAN ('2029-01-01') ENGINE = InnoDB);



注意：
	需要写入历史数据 -- 对应温度测点

	执行下面curl出发温度分析定时任务 precicntId 区域id  startDay 开始日期 endDay 结束日期 type 周报类型 1：月 2：周
	curl -X GET "http://localhost:6161/v1/temperature/roomTemperatureReportTask?precinctId=01-07-05-02-41&startDay=2025-08-01&endDay=2025-08-31&type=1" -H "accept: application/json"



	curl -X GET "http://localhost:6161/v1/temperature/roomTemperatureReportTask?precinctId=01-07-05-02-41&startDay=2025-08-01&endDay=2025-08-31&type=1" -H "accept: application/json"



	案例：
		station_name：01-07-05-02-41-02
		device id：00161006000000024874
		mete_code：017301
		mete_name：温度XX

		curl -X GET "http://localhost:6161/v1/temperature/roomTemperatureReportTask?precinctId=01-07-05-02-41&startDay=2025-09-08&endDay=2025-09-14&type=2" -H "accept: application/json"








		curl -X GET "http://localhost:6161/v1/temperature/roomTemperatureReportTask?precinctId=01-07-05-02-41&startDay=2025-08-01&endDay=2025-08-31&type=1" -H "accept: application/json"
		curl -X GET "http://10.12.5.120:32164/v1/temperature/roomTemperatureReportTask?precinctId=01-07-05-02-41&startDay=2025-09-01&endDay=2025-09-16&type=2" -H "accept: application/json"





select * from temperature_root_monthly where report_type = 3 and t1>=30 and t1 <50 and air_type_id!=4 and statistics_time = '2025-08-01';



