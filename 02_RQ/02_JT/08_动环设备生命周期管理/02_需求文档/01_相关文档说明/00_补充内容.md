```
好像是
	B接口的
	
但如果是集团
	应该就是C接口接入的？



t_sync_field_config
t_zz_field_mapping

t_zz_space_resources
t_zz_power_specialty
t_zz_power_device
t_zz_power_specialty
t_zz_switch_power
t_device_link
t_zz_smart_meter
t_cfg_devicesys_detail
t_cfg_devicesys
t_zz_power_device_sys
capacity_electric_estimate
capacity_electric_budget_device
```

```
综资表
    表zz_admin_area 综资初始化区域表
    初始化生成，用来把综资数据city_id、county_id关联动环区域，实现区域筛选和权限控制

    表t_zz_space_resources 空间资源表，站点和机房都在这个表下
    space_type：101为站点 102为机房
    city_id、county_id，与其他数据保持一致的填入规则，或参考zz_admin_area填入
    int_id 资源标识，唯一
    zh_label 资源名称，唯一

    表t_zz_power_specialty 动环专业表，这张表目前存放的是站点动环属性、机房动环属性、设备
    站点动环里有power_site_level（站点类别），gx_power_site_level（站点级别）
    通过zh_label，与空间资源表关联

    表t_zz_power_device 设备表，
    res_code 资源标识 唯一
    zh_label 资源名称，唯一
    device_id 如果在同步的时候关联上动环设备了，会有deviceId
    device_type_id 与动环device_type一致
    device_type 设备类型中文描述
    related_site 关联空间资源表站点类型space_type = 101的int_id
    related_room 关联空间资源表站点类型space_type = 102的int_id
    lifecycle_status 生命周期状态
    
    
    
综资数据检查-各种设备表
    select * from zz_data_sync_info WHERE batch_num LIKE “20241113%” —->索引 ;
    综资设备表检查：
    原始表（csv）_related_room》表zz_data_sync_info找tables_name值是ods_zz_room batch_num—》ES-机房索引i-nt_id=related_room—》找到对应机房名称

    20250915 10月底前要上线一些综资数据相关的功能
    综合站点详情-若站点汇聚，入网时间和供电方式从C接口中间库稽核， 1各站点对应多个中间库-任意取一个
    目前已经实现的综资数据涉及到的菜单-
    综资-报表-原始数据
    视图-综资-视图
    分析-统计查询-
    
    
```

```
研发提测内容如下：
提测功能名称：1、风险等级功能同步综资设备类型数据

涉及模块：external
测试分支：develop分支

sql脚本：
https://gitsz1.aspirecn.com/spider/kernelGuangXi/-/blob/develop/spider-guangxi/bin/dbscript/1.0.1.0/ddl/综资数据同步_ddl_20240712.sql

https://gitsz1.aspirecn.com/spider/kernelGuangXi/-/tree/develop/spider-guangxi/bin/dbscript/1.0.1.0/dml/综资数据同步_dml_20240712.sql

nacos配置
无

备注：已发布到测试环境
测试接口:
curl —location —request GET ‘http://10.9.128.71:21530/v1/schedule/shareCenterEsDataSync?dataDate=20240704&deviceId=&deviceId=0,101,102,1,2,4,5,6,7,8,9,11,12,13,14,15,16,17,18,68,77,78,87,88,92,93‘ \
—header ‘Cookie: JSESSIONID=20A13EC6E91206FC4ABF81170B32A2C3’

测试记录如下：
1、风险等级功能同步综资设备类型数据（其实就是因为目前测试和现网站点机房设备的不一致，现在搞个每日定时去同步更新站点机房设备相关信息）

2、每日会定时从ES上读取数据再写入到数据库相关表。同步时全量删除相关表数据，然后再同步（可能会出现机房变少，说明这个机房没有了）广西es是186的

-- 1、t_sync_field_config
--表中`es_index_name`数据来源es索引名称，会同步最近一天es数据，这里可以根据索引名到es上检查查一下
--表中`device_type_id`设备类型ID，101标识站点、102标识机房、其它设备类型ID
SELECT count(1) FROM t_sync_field_config;
-- 2、t_zz_power_specialty
SELECT count(1) FROM t_zz_power_specialty;
SELECT * FROM t_zz_power_specialty WHERE device_id is not NULL;
SELECT * FROM t_zz_power_specialty_20240709 WHERE device_id is not NULL;
-- 3、t_zz_space_resources
SELECT count(1) FROM t_zz_space_resources;
SELECT * FROM t_zz_space_resources ORDER BY data_time desc;
3、t_zz_power_specialty表的device_id的取值，站点名称+设备名称完全匹配到，取动环的设备ID
```

```
综合监控-站点信息同步综资数据
	
	
	1.5GEMC-YH-01-005监控视图站点基本信息同步综资SVN：
https://10.1.6.57:8443/svn/MIGUMS_PROJECT/trunk/spider-guangxi-docs/1.0.0.0/02-%E4%BA%A7%E5%93%81%E9%9C%80%E6%B1%82/%E3%80%90%E9%9C%80%E6%B1%82%E4%BC%98%E5%8C%96%E3%80%91%E7%9C%81%E5%B9%B3%E5%8F%B0%E5%8A%A8%E7%8E%AF%E5%8A%9F%E8%83%BD%E5%BE%85%E4%BC%98%E5%8C%96%E9%A1%B9%E9%9C%80%E6%B1%82%E8%AF%B4%E6%98%8E20250901.docx

1、综资数据，执行testRoomData.py，写入站点机房设备到综资表内。查询下面语句查找对应站点信息是否写入
2、 动环同步综资站点信息

SELECT * FROM t_scheduled_task WHERE task_id = 22;
3、检查综合监控-站点信息是否同步回显综资相关站点属性数据

        SELECT
        a.res_code,
        a.zh_label,
        a.power_site_level,
        b.asset_company,
        b.total_mains_number,
        b.mains_voltage_level,
        b.mains_capacity,
        b.mains_nature,
        b.mains_backup_method,
        b.power_is_substations,
        b.mains_configuration_level,
        b.design_pue
        FROM t_zz_power_specialty a
        left join t_zz_site_property b on a.res_code = b.res_code
        WHERE a.device_type_id = 0;
```

```
提测内容
广东sc/-综资接入 (变更点文件->es中)

1.文件 -> es
curl —location —request GET ‘http://localhost:13554/v1/schedule/shareCenterDataSync?dataDate=20250717&isDelIdxName=true&fileName=VE_PET_POWERSITE_14_yyyymmdd.CSV,VE_PET_POWERROOM_17_yyyymmdd.CSV,VE_PET_CHANGER_10_yyyymmdd.CSV,VE_PET_CONVERTER_7_yyyymmdd.CSV,VE_PET_HIGHVOLTSYSTEM_7_yyyymmdd.CSV,VE_PET_HIGHVOLD_9_yyyymmdd.CSV,VE_PET_HIGHVOLTDCSYSTEM_9_yyyymmdd.CSV,VE_PET_HIGHVOLTDCPOWER_12_yyyymmdd.CSV,VE_PET_HIGHVOLTDC_11_yyyymmdd.CSV,VE_PET_LOWVOLTSYSTEM_8_yyyymmdd.CSV,VE_PET_LOWVOLTAC_11_yyyymmdd.CSV,VE_PET_GENERATORCOMSYSTEM_7_yyyymmdd.CSV,VE_PET_GENERATORCOM_12_yyyymmdd.CSV,VE_PET_SWITCHINGPOWERSYSTEM_9_yyyymmdd.CSV,VE_PET_SWITCHINGPOWER_13_yyyymmdd.CSV,VE_PET_LOWVOLTDC_10_yyyymmdd.CSV,VE_PET_UPSSYSTEM_9_yyyymmdd.CSV,VE_PET_UPS_13_yyyymmdd.CSV,VE_PET_BATTERYDEVICE_13_yyyymmdd.CSV,VE_PET_AIRCONDITION_13_yyyymmdd.CSV,VE_PET_ENERGYSAVINGDEVICE_6_yyyymmdd.CSV,VE_PET_MONITORINGDEVICE_13_yyyymmdd.CSV,VE_PET_AMMETER_9_yyyymmdd.CSV,VE_PET_POWERLINEIN_7_yyyymmdd.CSV,VE_PET_POWERLINEOUT_7_yyyymmdd.CSV‘ \
—header ‘User-Agent: Apifox/1.0.0 (https://apifox.com)’

2.es -> mysql
curl —location —request GET ‘http://localhost:13554/v1/schedule/shareCenterEsDataSync?dataDate=20250717&deviceId=0,101,102,1,2,3,4,5,6,7,8,9,11,12,13,14,15,16,17,18,68,77,78,87,88,92,93,201,202,203‘

涉及服务
external

涉及脚本
https://10.1.6.57:8443/svn/MIGUMS_PROJECT/trunk/spider-gemc-doc/知识库/00-能耗平台标准产品部署/后台服务部署/综资数据接入/接入中-开发侧

涉及配置

是否启用非标准文件处理
enableNotStandardFile: true

标准对应的非标文件
notstandardfileconfig:
map:
【源系统使用的字段名：目标系统使用的字段名】
RM_AREA_SITE: VE_PET_POWERSITE_14
RM_AREA_ROOM: VE_PET_POWERROOM_17
RM_SITE_PROPERTY: VE_PET_POWERSITE_14
RM_ROOM_PROPERTY: VE_PET_POWERROOM_17
CE_DEVICE_PE_TRANSFORM: VE_PET_CHANGER_10
CE_DECIVE_PE_TRANSFORM_DEVICE: VE_PET_CONVERTER_7
CE_NET_PE_HIGH_DISTRIBUTION: VE_PET_HIGHVOLTSYSTEM_7
CE_DEVICE_PE_HIGH_DISTRIBUTION: VE_PET_HIGHVOLD_9
CE_NET_PE_HIGH_POWER: VE_PET_HIGHVOLTDCSYSTEM_9
CE_DEVICE_PE_HIGH_POWER: VE_PET_HIGHVOLTDCPOWER_12
CE_DEVICE_PE_HIGH_DC_DISTRIBUTION: VE_PET_HIGHVOLTDC_11
CE_NET_PE_LOW_DISTRIBUTION: VE_PET_LOWVOLTSYSTEM_8
CE_DEVICE_PE_LOW_AC_DISTRIBUTION: VE_PET_LOWVOLTAC_11
CE_NET_PE_SWITCH_POWER: VE_PET_GENERATORCOMSYSTEM_7
CE_DEVICE_PE_POWER_GENERATION: VE_PET_GENERATORCOM_12
CE_NET_PE_OPEN_POWER: VE_PET_SWITCHINGPOWERSYSTEM_9
CE_DEVICE_PE_SWITCH_POWER: VE_PET_SWITCHINGPOWER_13
CE_DEVICE_PE_LOW_DC_DISTRIBUTION: VE_PET_LOWVOLTDC_10
CE_NET_PE_UPS: VE_PET_UPSSYSTEM_9
CE_DEVICE_PE_UPS: VE_PET_UPS_13
CE_DEVICE_PE_BATTERY_LI: VE_PET_BATTERYDEVICE_13
这个蓄电池分铅酸电池和锂电池，这里配置全部写入到锂电池
CE_DEVICE_PE_AIR: VE_PET_AIRCONDITION_13
CE_DEVICE_PE_ENERY_SAVE: VE_PET_ENERGYSAVINGDEVICE_6
CE_DEVICE_PE_POWER_MONITOR: VE_PET_MONITORINGDEVICE_13
CE_DEVICE_PE_SMART_METER: VE_PET_AMMETER_9
CE_LINK_PE_IN: VE_PET_POWERLINEIN_7
CE_LINK_PE_OUT: VE_PET_POWERLINEOUT_7

触发写入es,如果提示java.io.FileNotFoundException: /tmp/shareCenterData/VE_PET_AMMETER_9_20250717.CSV (No such file or directory)cicd需要进入容器内部。进入/tmp/目录下 mkdir shareCenterData后再执行 ftp写入es

映射表（综资各设备文件映射关系）：es映射、mysql映射
t_sync_field_config
t_zz_field_mapping

记得看下产品给的最新的标准映射表.xlsx,如果发现es上面的字段少了或者es上面对应字段值不对，直接检查上面es对应索引表的字段之间映射关系是否准确。

这个直接触两个操作（读取FTP文件写入ES索引，持久化到mysql,所以直接执行这个就可以）
curl —location —request GET ‘http://10.188.99.5:21530/v1/schedule/shareCenterDataSync/all‘ &

以上同步只会读取上一天的文件夹日期综资数据/home/vsftpd/tmp/zhongzi/ 下的，有则执行，没有跳过直接结束同步。

修改日期：复制旧一天全量数据的那个的文件夹，改成上一天的日期。执行我以下这个脚步，记得改下对应文件目录的日期，脚本路径在：/root/rename_zhongzhi_file.sh

# 使用mv命令的替代方案（如：把20250807/文件夹下的包含 "*20250806*"格式的.csv文件名的日期，遍历全部改成new_base的目标日期20250807）
find "/home/vsftpd/tmp/zhongzhi/20250807/" -depth -name "*20250806*" -exec sh -c '
  for file do
    dir=$(dirname "$file")
    base=$(basename "$file")
    new_base=${base//20250806/20250807}
    mv -- "$file" "$dir/$new_base"
  done
' sh {} +
```





# 陕西层级【简化版】

```
数据来源
	1、FTP 服务器：综资数据每天以 CSV 文件形式推送到 FTP 指定目录
		（如 /home/vsftpd/tmp/zhongzi/YYYYMMDD/）。
	2、文件命名规范：如 VE_PET_POWERSITE_14_yyyymmdd.CSV，其中 yyyymmdd 为数据日期
	
	
数据处理流程
	1、FTP → ES：通过接口读取 FTP 文件，解析并写入 Elasticsearch 索引
	2、ES → MySQL：从 ES 中读取数据，处理后写入 MySQL 数据库
	3、设备与动环数据关联：将综资设备与动环系统中的设备、机房、测点等进行匹配
	
	
使用综资数据
	触发数据同步
		从 FTP 同步到 ES
			curl --request GET \
'http://localhost:13554/v1/schedule/shareCenterDataSync?dataDate=20250717&isDelIdxName=true&fileName=VE_PET_xxx.CSV,...'
		从 ES 同步到 MySQL
			curl --request GET \
'http://localhost:13554/v1/schedule/shareCenterEsDataSync?dataDate=20250717&deviceId=0,101,102,...'
		一键全量同步（推荐测试用）
			curl --request GET 'http://10.188.99.5:21530/v1/schedule/shareCenterDataSync/all' &
```

```
主要数据库表说明
	表名	用途
    t_zz_space_resources	存储站点（101）和机房（102）信息
    t_zz_power_device		存储设备信息，含动环设备ID关联
    t_zz_power_specialty	动环专业分路设备存储
    t_sync_field_config		字段映射配置表
    zz_admin_area			区域表，用于权限控制
    
    
数据关联关键字段
    zh_label：资源名称，用于关联不同表
    device_id：动环设备ID，若匹配成功则不为空
    device_type_id：设备类型ID，与动环一致
    precinct_id：机房ID，用于关联动环机房  
```

```
文件与目录
	若报错 FileNotFoundException，需在容器内创建目录：mkdir -p /tmp/shareCenterData
	同步只会读取前一天的文件夹，若需测试需手动复制并重命名文件（可使用提供的 rename_zhongzhi_file.sh）
```

```
非标准文件处理
	enableNotStandardFile: true
    notstandardfileconfig:
      map:
        RM_AREA_SITE: VE_PET_POWERSITE_14
        ...
```

```
数据一致性检查
	同步后需检查：
		ES 索引字段是否完整（参考最新标准映射表）
		MySQL 表中数据是否与 FTP 文件数量一致
		设备是否成功关联动环（device_id 不为空）
```

```
动环关联验证
	查询是否能关联到动环设备、机房、测点
	
	SELECT * FROM t_cfg_device WHERE device_id IN (...);
	SELECT * FROM t_cfg_metemodel_detail WHERE model_id IN (...);
```

```
快速上手建议
	掌握两个核心接口：
		shareCenterDataSync（FTP → ES）
		shareCenterEsDataSync（ES → MySQL）
		
	理解表结构
        t_zz_power_device
        t_zz_space_resources
        t_sync_field_config
    
    学会排查问题
        检查文件是否存在、格式是否正确
        检查 ES 索引是否生成
        检查 MySQL 数据是否写入且关联成功
        
        
    使用提供的脚本
    	文件重命名脚本：/root/rename_zhongzhi_file.sh
		一键同步脚本：直接调用 /all 接口
		
	总结
		综资数据通过 FTP 提供，经由 ES 中转最终落地 MySQL，并与动环系统进行设备关联。
		需要关注文件日期、字段映射、动环关联三个关键点，使用提供的接口和脚本即可完成同步与验证
		
		如果有新的需求或问题，可优先检查：
            FTP 文件是否存在且格式正确
            字段映射配置是否更新
            动环设备ID是否能匹配
```

# 陕西层级【详细版】

```
数据来源与流向

    源头：省级综资系统。

    传输方式：
    	通过 FTP 协议，每天自动生成并推送一批 CSV 文件到指定服务器目录。
    	文件命名有固定规则（如 VE_PET_POWERSITE_14_20250807.CSV）。

    中间缓存：
    	Elasticsearch (ES)。数据首先从文件写入 ES，作为高性能的临时存储和转换层。

    最终存储：
    	MySQL 数据库。数据从 ES 中读出，经过业务逻辑处理（如关联动环设备）后，持久化到多个业务表中。

    核心目标：
    	将综资的“资源”数据（站点、机房、设备）与动环系统的“实体”数据（设备ID、测点、机房）进行关联匹配，
    	从而实现基于综资数据的动环精细化监控
```

```
关键服务与配置

    核心服务：external-service（外部服务）。

    核心配置（在Nacos的 application-external.yml 中）:
    	enableNotStandardFile: true：启用非标文件处理。
        notstandardfileconfig.map：非标文件与标准类型的映射关系。这是理解文件内容的钥匙。
        例如，VE_PET_POWERSITE_14 文件对应的是 RM_AREA_SITE（站点区域）这种标准类型
        
    核心数据库表:

		t_sync_field_config：字段映射配置表。
            定义了 CSV文件字段、ES索引字段、MySQL表字段三者间的映射关系。
            如果页面显示字段缺失或错误，首先检查此表。

        t_zz_field_mapping：另一张映射表，需结合使用。

        t_zz_power_device：综资设备表。核心表，device_id 字段如果不为空，则表示成功与动环设备关联。

        t_zz_space_resources：综资空间资源表（站点、机房）。space_type: 101-站点, 102-机房。

        t_zz_power_specialty：动环专业分路设备表
```

![deepseek_mermaid_20250917_b317e0](./assets/deepseek_mermaid_20250917_b317e0.png)

```
测试的核心是：验证数据流在每个环节的准确性、完整性、一致性，并确保与动环系统的关联正确。

（一）测试前置准备
    环境确认：
    	确认测试环境（FTP地址、ES地址、MySQL库、服务地址10.1.4.226:21530）。
    文件准备：
        获取或构造测试用的 CSV 文件。最好使用真实导出的文件，并在此基础上修改。
        将文件上传到 FTP 服务器前一天日期的目录下（例如今天20250808，则目录应为20250807）。
        	这是自动同步的约定。
        如需手动指定日期，使用 dataDate 参数。
    脚本准备：
    	获取文件重命名脚本 /root/rename_zhongzhi_file.sh，用于灵活构造测试数据。



（二）分阶段测试要点

阶段一：FTP -> ES 同步测试 (shareCenterDataSync)
正常流测试：
	上传1-2个完整的 CSV 文件到 FTP。
	调用接口，指定 dataDate 和 fileName。
	验证点：
		查看 ES 中对应的索引是否被创建/更新。
		通过 Kibana 或 ES 查询语句检查数据条数是否与文件行数一致，关键字段值是否正确。
异常流测试：
    文件不存在：
    	上传一个接口参数中不存在的文件名，观察日志报错是否符合预期（如 FileNotFoundException）。
    文件格式错误：
    	修改某个 CSV 文件，制造格式错误（如列数不对、特殊字符），观察同步是否失败并有良好日志记录。
    目录不存在：
    	确认 /tmp/shareCenterData 目录是否存在，不存在则模拟此错误。
	配置测试：
		修改 notstandardfileconfig.map 中的映射关系，指向一个错误的文件名，
		观察同步是否出错或数据是否无法写入正确的 ES 索引。






阶段二：ES -> MySQL 同步测试 (shareCenterEsDataSync)
正常流测试：
	在 ES 数据就绪后，调用该接口。
验证点：
    查询 t_zz_power_device 等表，检查数据是否成功插入。
    数据一致性：对比 ES 索引中的数据与 MySQL 表中的数据是否一致（数量、关键字段）。
    关联逻辑：
        重点关注 device_id 字段。
        选择一些已知在动环中存在设备的站点/设备名称，查看其 device_id 是否被正确填充。
异常流测试：
	ES索引不存在：指定一个不存在的 dataDate，观察同步结果是否会报错或返回空。






阶段三：数据关联性与业务逻辑测试
设备关联测试：
    目的：
        验证综资设备是否能正确匹配到动环设备。
    方法：
        在 t_zz_power_device 中找一个 device_id 不为空的记录。
        用该 device_id 去查询动环设备表 t_cfg_device，确认该设备确实存在，且名称、机房等信息吻合。
        找一个 device_id 为空的记录，检查其 zh_label（设备名称）是否确实在 t_cfg_device 中不存在，确认这不是一个 bug。

空间资源关联测试：
	目的：
		验证站点、机房信息是否正确关联到动环机房。
	方法：
		检查 t_zz_space_resources 中的 precinct_id 是否能关联到 t_cfg_precinct 表中的动环机房。


数据覆盖测试：
	目的：验证同步是“增量”还是“全量覆盖”。
	方法：

		记录同步前某类设备的数量（SELECT COUNT(*) FROM t_zz_power_device WHERE device_type_id='4'）。
		在 FTP 文件中删除几条该设备的记录。
		重新执行完整同步流程。
		检查同步后数据库中的数量是否相应减少。（从文档看，似乎是全量覆盖式同步）

（三）全流程回归测试
	使用 http://.../shareCenterDataSync/all 接口，完成一次从 FTP 到 MySQL 的完整同步。
	编写 SQL 脚本，对最终数据库中的核心表进行数据校验，确保所有数据类型都同步成功，且关键关联关系已建立。
```

```
三、 常见问题排查清单 (Checklist)
	同步后数据缺失：
        FTP 文件是否上传到正确日期的目录？
        FTP 文件名是否在接口参数或非标配置中正确映射？
        ES 索引中是否有数据？（检查中间环节）
        t_sync_field_config 字段映射配置是否正确？

    设备未关联动环 (device_id 为空)：
        动环设备表 t_cfg_device 中是否存在同名同站点的设备？
        综资数据中的站点/设备名称是否包含多余字符（空格、换行符）？

    页面显示字段错误或缺失：
        首先检查 t_sync_field_config 表，确认字段映射关系。
        检查 ES 索引中该字段是否存在且值正确。
    同步报错：
        查看 external-service 服务日志，是最直接的定位方式。
        检查 /tmp/shareCenterData 目录权限。
```

# 综资系统【简化版】

```
这是一个从功能测试深入到系统集成的关键点，理解“综资系统”是什么，对于设计准确的测试用例至关重要

```

### 综资系统是什么？

**综资**，全称为**综合资源管理系统**。它是运营商（中国移动、电信、联通）最核心的IT系统之一，可以理解为整个运营商网络的“**资产户口本**”和“**资源数据库**”。

1. **它不是一个简单的页面或服务器**：它是一个**庞大的、复杂的企业级应用系统**。它通常由多个模块组成（如网络资源管理、空间资源管理、逻辑资源管理等），有自己的**数据库服务器、应用服务器**，当然也有**前端操作页面**。
2. **它的核心作用**：
   - **全生命周期管理**：记录从设备采购、入库、部署到机房、上架、开通业务、维护、直到最终报废退网的整个过程。
   - **资源台账**：存储所有网络设备（如交换机、路由器、动环设备）、机房、机架、端口、线路、IP地址等资源的详细信息。
   - **数据权威源**：它是所有设备信息的“唯一可信数据源”（Single Source of Truth）。其他系统（如动环监控、网管、客服系统）都需要从它这里获取准确的设备信息。

### 在测试环境中的形态

在你们的测试环境中，综资系统同样会以一套独立的系统形式存在。测试环境的搭建通常有以下几种方式，其测试策略也随之不同：

![deepseek_mermaid_20250918_f23230](./assets/deepseek_mermaid_20250918_f23230.png)

从上图可以看出，无论采用哪种环境搭建策略，测试的核心目标都是相通的。你需要重点关注以下方面，并据此设计测试用例：

### 🤔 测试时需要关注什么？（基于你对综资的理解）

因为你测试的“动环设备生命周期管理”系统**严重依赖综资的数据**，所以你的测试用例必须考虑与综资交互的各种场景：

1. **数据一致性测试**：
   - **用例**：在综资后台修改一台设备的`start_time`（开始使用时间），查看你们的页面上该设备的“在网运行时长”是否**立即**或**通过同步后**正确重新计算。
   - **目的**：确保两个系统之间的数据同步机制（无论是实时接口调用还是定时任务）工作正常。
2. **关联性测试**：
   - **用例**：在综资中删除一台设备，或解除设备与站点的关联关系，查看在你们的系统中，该设备是否按要求**不再显示**。
   - **目的**：验证“已关联综资”和“未关联综资”的逻辑处理是否正确。
3. **接口容错性测试**：
   - **用例**：模拟综资接口**返回空数据**、**返回错误**、**响应超时**等情况，查看你们的系统界面是否展示合理的提示信息（如“综资数据获取失败”），而不是页面崩溃或显示异常。
   - **目的**：确保你们的系统对综资的依赖不是脆弱的，有良好的异常处理机制。
4. **数据映射测试**：
   - **用例**：确认从综资取过来的每一个字段都能在你们系统的页面上**正确显示**。例如，综资里的`vendor_id`（厂家ID）是否被正确地转换成了你们页面上显示的厂家中文名称。
   - **目的**：确保数据转换和映射规则正确。

### 总结

**综资是一个有完整页面、服务器和数据库的独立核心系统。** 在测试环境，它可能是一个简化版或Mock服务，但你们必须确保其数据模型和接口契约与生产环境一致。

你的测试策略需要从“只测试界面功能”上升到“**测试系统集成和数据流**”的层面。你需要和开发或项目经理确认测试环境中综资的形态，并据此设计包括**数据同步、异常处理、关联逻辑**在内的更深度的测试用例，这样才能保证上线后与真实综资系统对接万无一失。
